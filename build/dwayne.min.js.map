{"version":3,"file":"dwayne.min.js","sources":["../lib/helpers/toStringTag.js","../lib/helpers/checkTypes.js","../lib/D.js","../lib/helpers/iterate.js","../lib/helpers/assign.js","../lib/helpers/defineProperty.js","../lib/helpers/toArray.js","../lib/helpers/validate.js","../lib/Alphabet.js","../lib/Switcher.js","../lib/Super.js","../lib/Arr.js","../lib/BlobObject.js","../lib/Func.js","../lib/Num.js","../lib/Str.js","../lib/constants/formats.js","../lib/Dat.js","../lib/helpers/constructURL.js","../lib/Fetch.js","../lib/Elem.js","../lib/Router.js","../lib/constants/global.js","../lib/helpers/Symbol.js","../lib/constants/validateCheckExpressions.js","../lib/Promise.js","../lib/constants/regexpSpecialCharacters.js","../lib/helpers/parseHeaders.js","../lib/helpers/transformData.js","../lib/constants/appliedRegExps.js","../lib/constants/elements.js","../lib/constants/canvasMethods.js","../lib/helpers/resolveURL.js","../browser.js"],"sourcesContent":["/**\n * @module helpers/toStringTag\n * @private\n * @description Exports toStringTag method.\n */\n\n/**\n * @function toStringTag\n * @param {*} object - Object to get toStringTag of.\n * @returns {String} Cut string.\n * @description Cut \"Type\" string from \"[object Type]\" string that gotten from {}.toString,call(object).\n */\nexport function toStringTag(object) {\n  return {}.toString.call(object).replace(/^\\[object |]$/g, '');\n}\n","/**\r\n * @module helpers/checkTypes\r\n * @private\r\n * @mixin\r\n * @description Exports is<Type> methods.\r\n */\r\n\r\nimport { toStringTag } from './toStringTag';\r\n\r\n/**\r\n * @function isArray\r\n * @public\r\n * @param {*} value - Value to check if it is an array.\r\n * @returns {Boolean} If the argument is an array or not.\r\n * \r\n * @example\r\n * isArray([]);                             // true\r\n * isArray(0);                              // true\r\n * isArray(document.querySelectorAll('*')); // false\r\n */\r\nexport function isArray(value) {\r\n  return toStringTag(value) === 'Array';\r\n}\r\n\r\n/**\r\n * @function isArrayLike\r\n * @public\r\n * @param {*} value - Value to check if it is array-like.\r\n * @returns {Boolean} If the argument is array-like or not.\r\n * @description Basically returns if the argument has non-negative integer \"length\" property and isn't a function.\r\n * \r\n * @example\r\n * isArrayLike([]);                             // true\r\n * isArrayLike('');                             // true\r\n * isArrayLike(() => {});                       // false\r\n * isArrayLike(document.querySelectorAll('*')); // true\r\n */\r\nexport function isArrayLike(value) {\r\n  if (!value || isFunction(value)) {\r\n    return false;\r\n  }\r\n  \r\n  const length = value.length;\r\n  \r\n  return isInteger(length) && length >= 0;\r\n}\r\n\r\n/**\r\n * @function isBoolean\r\n * @public\r\n * @param {*} value - Value to check if it is a boolean.\r\n * @returns {Boolean} If the argument is a boolean or not.\r\n * \r\n * @example\r\n * isBoolean(true);               // true\r\n * isBoolean(new Boolean(false)); // true\r\n * isBoolean(null);               // false\r\n */\r\nexport function isBoolean(value) {\r\n  return toStringTag(value) === 'Boolean';\r\n}\r\n\r\n/**\r\n * @function isDate\r\n * @public\r\n * @param {*} value - Value to check if it is a date.\r\n * @returns {Boolean} If the argument is a date or not.\r\n * \r\n * @example\r\n * isDate(new Date());                 // true\r\n * isDate('1999-12-31T23:59:59.999Z'); // false\r\n */\r\nexport function isDate(value) {\r\n  return toStringTag(value) === 'Date';\r\n}\r\n\r\n/**\r\n * @function isDateLike\r\n * @public\r\n * @param {*} value - Value to check if it is date-like.\r\n * @returns {Boolean} If the argument is date-like or not.\r\n * @description Basically returns if new Date(argument) is not invalid date.\r\n * \r\n * @example\r\n * isDateLike(new Date());                 // true\r\n * isDateLike('1999-12-31T23:59:59.999Z'); // true\r\n * isDateLike(0);                          // true\r\n */\r\nexport function isDateLike(value) {\r\n  value = new Date(value);\r\n  \r\n  return !isNaN(value.getTime());\r\n}\r\n\r\n/**\r\n * @function isElement\r\n * @public\r\n * @param {*} value - Value to check if it is an element.\r\n * @returns {Boolean} If the argument is element or not.\r\n *\r\n * @example\r\n * isElement(document.querySelector('html')); // true\r\n */\r\nexport function isElement(value) {\r\n  return /Element$/.test(toStringTag(value));\r\n}\r\n\r\n/**\r\n * @function isFinite\r\n * @public\r\n * @param {*} value - Value to check if it is finite.\r\n * @returns {Boolean} If the argument is finite or not.\r\n * \r\n * @example\r\n * isFinite(0);        // true\r\n * isFinite('0');      // false\r\n * isFinite(Infinity); // false\r\n * isFinite(NaN);      // false\r\n */\r\nexport function isFinite(value) {\r\n  if (!isNumber(value)) {\r\n    return false;\r\n  }\r\n  \r\n  value = Number(value);\r\n\r\n  return !isNaN(value) && value !== Infinity && value !== -Infinity;\r\n}\r\n\r\n/**\r\n * @function isFunction\r\n * @public\r\n * @param {*} value - Value to check if it is a function.\r\n * @returns {Boolean} If the argument is a function or not.\r\n * \r\n * @example\r\n * isFunction(() => {});            // true\r\n * \r\n * const func = () => {};\r\n * Object.setPrototypeOf(func, {});\r\n * isFunction(func);                // true\r\n */\r\nexport function isFunction(value) {\r\n  return toStringTag(value) === 'Function' || typeof value === 'function';\r\n}\r\n\r\n/**\r\n * @function isInteger\r\n * @public\r\n * @param {*} value - Value to check if it is an integer.\r\n * @returns {Boolean} If the argument is an integer or not.\r\n *\r\n * @example\r\n * isInteger(0);             // true\r\n * isInteger(0.1);           // false\r\n * isInteger(new Number(0)); // true\r\n * isInteger('0');           // false\r\n * isInteger(Infinity);      // false\r\n * isInteger(NaN);           // false\r\n */\r\nexport function isInteger(value) {\r\n  return isNumber(value) && value % 1 === 0;\r\n}\r\n\r\n/**\r\n * @function isIntegerLike\r\n * @public\r\n * @param {*} value - Value to check if it is integer-like.\r\n * @returns {Boolean} If the argument is integer-like or not.\r\n *\r\n * @example\r\n * isIntegerLike(0);             // true\r\n * isIntegerLike(new Number(0)); // true\r\n * isIntegerLike(0.1);           // false\r\n * isIntegerLike('0');           // true\r\n */\r\nexport function isIntegerLike(value) {\r\n  value = parseInt(Number(value));\r\n\r\n  return !!(value || value === 0);\r\n}\r\n\r\n/**\r\n * @function isNaN\r\n * @public\r\n * @param {*} value - Value to check if it is NaN.\r\n * @returns {Boolean} If the argument is NaN or not.\r\n *\r\n * @example\r\n * isNaN(0);               // false\r\n * isNaN('NaN');           // false\r\n * isNaN(NaN);             // true\r\n * isNaN(new Number(NaN)); // true\r\n */\r\nexport function isNaN(value) {\r\n  if (!isNumber(value)) {\r\n    return false;\r\n  }\r\n  \r\n  value = Number(value);\r\n\r\n  return value !== value;\r\n}\r\n\r\n/**\r\n * @function isNull\r\n * @public\r\n * @param {*} value - Value to check if it is null.\r\n * @returns {Boolean} If the argument is null or not.\r\n *\r\n * @example\r\n * isNull(null);      // true\r\n * isNull(undefined); // false\r\n */\r\nexport function isNull(value) {\r\n  return value === null;\r\n}\r\n\r\n/**\r\n * @function isNullOrUndefined\r\n * @public\r\n * @param {*} value - Value to check if it is null or undefined.\r\n * @returns {Boolean} If the argument is null or undefined or not.\r\n *\r\n * @example\r\n * isNullOrUndefined(null);      // true\r\n * isNullOrUndefined(undefined); // true\r\n * isNullOrUndefined(false);     // false\r\n */\r\nexport function isNullOrUndefined(value) {\r\n  return value === null || typeof value === 'undefined';\r\n}\r\n\r\n/**\r\n * @function isNumber\r\n * @public\r\n * @param {*} value - Value to check if it is a number.\r\n * @returns {Boolean} If the argument is a number or not.\r\n *\r\n * @example\r\n * isNumber(0);             // true\r\n * isNumber(new Number(0)); // true\r\n * isNumber(NaN);           // true\r\n * isNumber('0');           // false\r\n */\r\nexport function isNumber(value) {\r\n  return toStringTag(value) === 'Number';\r\n}\r\n\r\n/**\r\n * @function isNumberLike\r\n * @public\r\n * @param {*} value - Value to check if it is number-like.\r\n * @returns {Boolean} If the argument is number-like or not.\r\n *\r\n * @example\r\n * isNumberLike(0);          // true\r\n * isNumberLike('0');        // true\r\n * isNumberLike('Infinity'); // true\r\n * isNumberLike('NaN');      // true\r\n * isNumberLike(NaN);        // true\r\n */\r\nexport function isNumberLike(value) {\r\n  if (isNaN(value) || value === 'NaN') {\r\n    return true;\r\n  }\r\n  \r\n  value = Number(value);\r\n  \r\n  return !!(value || value === 0);\r\n}\r\n\r\n/**\r\n * @function isObject\r\n * @public\r\n * @param {*} value - Value to check if it is an object.\r\n * @returns {Boolean} If the argument is an object or not.\r\n *\r\n * @example\r\n * isObject({});   // true\r\n * isObject(1);    // false\r\n * isObject(null); // false\r\n */\r\nexport function isObject(value) {\r\n  return !!value && (toStringTag(value) === 'Object' || typeof value === 'object' || value instanceof Object);\r\n}\r\n\r\n/**\r\n * @function isPlainObject\r\n * @public\r\n * @param {*} value - Value to check if it is a plain object.\r\n * @returns {Boolean} If the argument is a plain object or not.\r\n *\r\n * @example\r\n * const obj = {};\r\n *\r\n * ifPlainObject(obj); // true\r\n *\r\n * Object.setPrototypeOf(object, null);\r\n *\r\n * ifPlainObject(obj); // true\r\n *\r\n * Object.setPrototypeOf(object, {});\r\n *\r\n * ifPlainObject(obj); // false\r\n */\r\nexport function isPlainObject(value) {\r\n  if (isPrimitive(value)) {\r\n    return false;\r\n  }\r\n\r\n  const proto = Object.getPrototypeOf(value);\r\n\r\n  if (isNull(proto)) {\r\n    return true;\r\n  }\r\n\r\n  const constructor = proto.constructor;\r\n\r\n  return isFunction(constructor) &&\r\n    constructor instanceof constructor &&\r\n    isNull(Object.getPrototypeOf(proto));\r\n}\r\n\r\n/**\r\n * @function isPrimitive\r\n * @public\r\n * @param {*} value - Value to check if it is primitive.\r\n * @returns {Boolean} If the argument is primitive or not.\r\n *\r\n * @example\r\n * isPrimitive(1);             // true\r\n * isPrimitive({});            // false\r\n * isPrimitive('');            // true\r\n * isPrimitive(new Number(0)); // false\r\n * isPrimitive(true);          // true\r\n * isPrimitive(Symbol('foo')); // true\r\n * isPrimitive(null);          // true\r\n * isPrimitive(undefined);     // true\r\n */\r\nexport function isPrimitive(value) {\r\n  return isNull(value) || /^(number|string|boolean|symbol|undefined)$/.test(typeof value);\r\n}\r\n\r\n/**\r\n * @function isRegExp\r\n * @public\r\n * @param {*} value - Value to check if it is a regular expression.\r\n * @returns {Boolean} If the argument is a regular expression or not.\r\n *\r\n * @example\r\n * isRegExp(/foo/);             // true\r\n * isRegExp('/foo/');           // false\r\n * isRegExp(new RegExp('foo')); // true\r\n */\r\nexport function isRegExp(value) {\r\n  return toStringTag(value) === 'RegExp';\r\n}\r\n\r\n/**\r\n * @function isString\r\n * @public\r\n * @param {*} value - Value to check if it is a string.\r\n * @returns {Boolean} If the argument is a string or not.\r\n *\r\n * @example\r\n * isString('0');             // true\r\n * isString(new String('0')); // true\r\n */\r\nexport function isString(value) {\r\n  return toStringTag(value) === 'String';\r\n}\r\n\r\n/**\r\n * @function isSymbol\r\n * @public\r\n * @param {*} value - Value to check if it is a symbol.\r\n * @returns {Boolean} If the argument is a symbol or not.\r\n *\r\n * @example\r\n * isSymbol(Symbol('1')); // true\r\n */\r\nexport function isSymbol(value) {\r\n  return toStringTag(value) === 'Symbol';\r\n}\r\n\r\n/**\r\n * @function isUndefined\r\n * @public\r\n * @param {*} value - Value to check if it is undefined.\r\n * @returns {Boolean} If the argument is undefined or not.\r\n *\r\n * @example\r\n * isUndefined(null);      // false\r\n * isUndefined(undefined); // true\r\n */\r\nexport function isUndefined(value) {\r\n  return typeof value === 'undefined';\r\n}\r\n","/**\n * @module D\n * @private\n * @description Exports D function.\n */\n\nimport constructors from './constants/constructors';\n\nexport * from './helpers/checkTypes';\n\n/**\n * @function D\n * @public\n * @param {*} [value] - Any value.\n * @returns {DWrap} Wrap of the argument.\n * @description Function for creating a D-wrap of an object.\n *\n * @example\n * D({});            // Super\n * D(() => {});      // Func\n * D([]);            // Arr\n * D(1);             // Num\n * D('1');           // Str\n * D(new Date());    // Dat\n * D(document.body); // Elem\n */\nexport function D(value) {\n  for (let i = constructors.length - 1; i >= 0; i--) {\n    const levelConstructors = constructors[i];\n\n    for (let k = 0, len = levelConstructors.length; k < len; k++) {\n      const constructor = levelConstructors[k];\n\n      if (value instanceof constructor.cls) {\n        return value;\n      }\n\n      if (constructor.check(value)) {\n        return new constructor.cls(value);\n      }\n    }\n  }\n}\n\nexport default D;\n","/**\r\n * @module helpers/iterate\r\n * @private\r\n * @description Exports iterate method.\r\n */\r\n\r\nimport { isArrayLike, isUndefined } from './checkTypes';\r\n\r\n/**\r\n * @callback IterationCallback\r\n * @param {*} value - Iteration value.\r\n * @param {String|Number} key - Iteration key.\r\n * @param {*} object - Initial iterable object.\r\n */\r\n\r\n/**\r\n * @function iterate\r\n * @param {(Object|Array|null|undefined)} object - Value to iterate over.\r\n * @param {IterationCallback} callback - Callback that is called on every iteration.\r\n * @returns {*} If callback returns not undefined then iterate returns this value.\r\n * @description Function for iterating over all types of values.\r\n */\r\nexport function iterate(object, callback) {\r\n  const array = isArrayLike(object);\r\n\r\n  let iterated = 0;\r\n\r\n  for (const key in object) {\r\n    if ({}.hasOwnProperty.call(object, key)) {\r\n      if (array && iterated++ >= object.length) {\r\n        break;\r\n      }\r\n\r\n      const value = callback(object[key], array ? Number(key) : key, object);\r\n\r\n      if (!isUndefined(value)) {\r\n        return value;\r\n      }\r\n    }\r\n  }\r\n}\r\n","/**\n * @module helpers/assign\n * @private\n * @description Exports Object.assign-like method.\n */\n\nimport { iterate } from './iterate';\n\n/**\n * @const\n * @function assign\n * @param {Object} target - Object to assign rest of arguments to.\n * @param {...Object} objects - Objects that are assigned to the target.\n * @returns {Object} Target.\n */\nexport function assign(target) {\n  iterate(arguments, (source, index) => {\n    if (index) {\n      iterate(source, (value, key) => {\n        target[key] = value;\n      });\n    }\n  });\n    \n  return target;\n}\n","/**\n * @module helpers/defineProperty\n * @private\n * @description Exports defineProperty and dynamicDefineProperties methods.\n */\n\nimport { iterate } from './iterate';\n\n/**\n * @callback propertyGeneratorCallback\n * @param {String} name - Name of the property.\n * @returns {*} Generated property.\n */\n\n/**\n * @function dynamicDefineProperties\n * @param {Object} target - Object to define properties for.\n * @param {Array} properties - Object which keys are properties.\n * @param {propertyGeneratorCallback} propertyGenerator - Callback for every property.\n * @returns {void}\n * @description Function for dynamic creating properties based on name of the method.\n */\nexport function dynamicDefineProperties(target, properties, propertyGenerator) {\n  iterate(properties, (name) => {\n    Object.defineProperty(target, name, {\n      value: propertyGenerator(name),\n      writable: true,\n      enumerable: false,\n      configurable: true\n    });\n  });\n}\n\n/**\n * @function defineProperties\n * @param {Object} target - Target to define properties for.\n * @param {Object} properties - Object with properties needed to be assign to the target.\n * @returns {void}\n * @description Function for defining properties of an object.\n */\nexport function defineProperties(target, properties) {\n  iterate(properties, (method, name) => {\n    if (/^get /.test(name)) {\n      Object.defineProperty(target, name.replace(/^get /, ''), {\n        get: method,\n        set: undefined,\n        enumerable: false,\n        configurable: true\n      });\n\n      return;\n    }\n\n    if (/^set /.test(name)) {\n      Object.defineProperty(target, name.replace(/^set /, ''), {\n        set: method,\n        get: undefined,\n        enumerable: false,\n        configurable: true\n      });\n\n      return;\n    }\n\n    if (/^get\\/set /.test(name)) {\n      Object.defineProperty(target, name.replace(/^get\\/set /, ''), {\n        get: method.get,\n        set: method.set,\n        enumerable: false,\n        configurable: true\n      });\n\n      return;\n    }\n\n    if (name !== 'Symbol.toStringTag') {\n      Object.defineProperty(target, name, {\n        value: method,\n        writable: true,\n        enumerable: false,\n        configurable: true\n      });\n    }\n  });\n}\n","/**\n * @module helpers/toArray\n * @private\n * @description Exports toArray method.\n */\n\nimport { isArray, isArrayLike, isString } from './checkTypes';\nimport { iterate } from './iterate';\n\n/**\n * @function toArray\n * @param {*} value - Any value.\n * @param {Boolean} [createNewArray = false] - If it is needed to create new array.\n * @returns {Array} Create array.\n * @description Function for creating an array of any value.\n */\nexport function toArray(value, createNewArray) {\n  if (isArray(value) && !createNewArray) {\n    return value;\n  }\n\n  const array = [];\n\n  if (isArrayLike(value) && !isString(value)) {\n    iterate(value, (value) => {\n      array.push(value);\n    });\n  } else {\n    array.push(value);\n  }\n\n  return array;\n}\n","/**\r\n * @module helpers/validate\r\n * @private\r\n * @description Exports validate method.\r\n */\r\n\r\nimport checkExpressions from '../constants/validateCheckExpressions';\r\nimport { iterate } from './iterate';\r\nimport { isArray } from './checkTypes';\r\n\r\nconst numbers = ['1st', '2nd', '3rd', '4th', '5th', '6th', '7th'];\r\n\r\n/**\r\n * @function validate\r\n * @private\r\n * @param {Object} args - Arguments of function.\r\n * @param {Object} options - Object with validate parameters.\r\n * @param {String} [name] - Name of the function what called validate.\r\n * @returns {void}\r\n * @description Function for checking arguments of other functions.\r\n */\r\nexport function validate(args, options, name) {\r\n  iterate(options, (array, number) => {\r\n    if (!isArray(array)) {\r\n      array = [array];\r\n    }\r\n\r\n    iterate(array, (checker) => {\r\n      checker = checkExpressions[checker];\r\n\r\n      if (!checker.check(args[number])) {\r\n        throw new checker.error(checker.text.replace('$n', numbers[number]) + (name ? ` (at ${ name })` : ''));\r\n      }\r\n    });\r\n  });\r\n}\r\n","/**\r\n * @module Alphabet\r\n * @private\r\n * @mixin\r\n * @description Exports Alphabet class.\r\n */\r\n\r\nimport { isString, validate, defineProperties, Symbol } from './helpers';\r\n\r\n/**\r\n * @typedef {String} Char\r\n * @public\r\n * @description A string of one char.\r\n */\r\n\r\n/**\r\n * @class Alphabet\r\n * @public\r\n * @param {ArrayLike} alphabet - Alphabet to wrap.\r\n * @returns {Alphabet} Instance of Alphabet.\r\n * @description Class for alphabet manipulations: add, delete symbols, generate a token from an alphabet,\r\n * check if an alphabet contains a word.\r\n *\r\n * @example\r\n * new Alphabet(['a', 'b', 'c']);\r\n */\r\nexport class Alphabet {\r\n  constructor(alphabet = []) {\r\n    const a = {};\r\n\r\n    for (let i = 0, length = alphabet.length; i < length; i++) {\r\n      const char = alphabet[i];\r\n\r\n      if (!check(char)) {\r\n        throw new Error('Each element of an array must be a single char! (in Alphabet)');\r\n      }\r\n\r\n      a[char] = char;\r\n    }\r\n\r\n    /**\r\n     * @member {Object} Alphabet#$$\r\n     * @public\r\n     * @description The alphabet.\r\n     */\r\n    Object.defineProperty(this, '$$', { value: a });\r\n  }\r\n\r\n  /**\r\n   * @method Alphabet#add\r\n   * @public\r\n   * @param {...Char} chars - Chars to add.\r\n   * @returns {Alphabet} Returns this.\r\n   * @description Method for adding new letters to the alphabet.\r\n   *\r\n   * @example\r\n   * const alphabet = new Alphabet(['a', 'b', 'c']);\r\n   *\r\n   * alphabet.add('d', 'e');\r\n   *\r\n   * alphabet.get().$; // ['a', 'b', 'c', 'd', 'e']\r\n   */\r\n  add(...chars) {\r\n    for (let i = 0, length = chars.length; i < length; i++) {\r\n      const char = chars[i];\r\n\r\n      if (!check(char)) {\r\n        throw new Error('Each argument must be a single char! (in Alphabet#add)');\r\n      }\r\n\r\n      this.$$[char] = char;\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @method Alphabet#contains\r\n   * @public\r\n   * @param {String} word - Word to check if it is in the alphabet or not.\r\n   * @returns {Boolean} If the word in the alphabet or not.\r\n   * @description Method that returns if a word is in alphabet or not.\r\n   *\r\n   * @example\r\n   * const alphabet = new Alphabet(['f', 'b', 'o', 'a', 'r']);\r\n   *\r\n   * alphabet.contains('foo'); // true\r\n   * alphabet.contains('bar'); // true\r\n   * alphabet.contains('baz'); // false\r\n   */\r\n  contains(word) {\r\n    validate([word], ['string'], 'Alphabet#contains');\r\n\r\n    const alphabet = this.$$;\r\n\r\n    for (let i = 0, length = word.length; i < length; i++) {\r\n      if (!alphabet[word[i]]) {\r\n        return false;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  }\r\n\r\n  /**\r\n   * @method Alphabet#delete\r\n   * @public\r\n   * @param {...Char} chars - Chars to delete.\r\n   * @returns {Alphabet} Returns this.\r\n   * @description Method for deleting letters from the alphabet.\r\n   *\r\n   * @example\r\n   * const alphabet = new Alphabet(['a', 'b', 'c', 'd']);\r\n   *\r\n   * alphabet.delete('a');\r\n   *\r\n   * alphabet.get().$; // ['b', 'c', 'd']\r\n   *\r\n   * alphabet.delete('b', 'd');\r\n   *\r\n   * alphabet.get().$; // ['c']\r\n   */\r\n  delete(...chars) {\r\n    for (let i = 0, length = chars.length; i < length; i++) {\r\n      const char = chars[i];\r\n\r\n      if (!check(char)) {\r\n        throw new Error('Each argument must be a single char! (in Alphabet#delete)');\r\n      }\r\n\r\n      delete this.$$[char];\r\n    }\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @method Alphabet#get\r\n   * @returns {Array} Wrap of an array of alphabet letters.\r\n   * @description Method for getting array of alphabet letters.\r\n   *\r\n   * @example\r\n   * new Alphabet(['a', 'b', 'c']).get().$; // ['a', 'b', 'c']\r\n   */\r\n  get() {\r\n    return Object.keys(this.$$);\r\n  }\r\n\r\n  /**\r\n   * @method Alphabet#token\r\n   * @public\r\n   * @param {Number} length - Token length.\r\n   * @returns {String} Token.\r\n   * @description Method for generating random token with given length.\r\n   *\r\n   * @example\r\n   * new Alphabet(['a', 'b', 'c']).token(4); // 'abcb'\r\n   */\r\n  token(length) {\r\n    validate([length], [['intLike', '>0']], 'Alphabet#token');\r\n\r\n    const alphabet = Object.keys(this.$$);\r\n    const len = alphabet.length;\r\n    let token = '';\r\n\r\n    for (let i = 0; i < length; i++) {\r\n      token += alphabet[Math.floor(Math.random() * len)];\r\n    }\r\n\r\n    return token;\r\n  }\r\n}\r\n\r\ndefineProperties(Alphabet.prototype, {\r\n  [Symbol.toStringTag]: 'Alphabet'\r\n});\r\n\r\nfunction check(char) {\r\n  return isString(char) && char.length === 1;\r\n}\r\n\r\n/**\r\n * @function alphabet\r\n * @public\r\n * @param {String} string - String to generate an alphabet from.\r\n * @returns {Alphabet} New instance of Alphabet.\r\n * @description Function for creating an alphabet from a string that has format like this:\r\n * '&lt;char1&gt;-&lt;char2&gt; &lt;char3&gt;-&lt;char4&gt;'\r\n *\r\n * @example\r\n * const a1 = alphabet('a-c 1-3');\r\n * const a2 = alphabet('5-5f-g');\r\n *\r\n * a1.get().$; // ['1', '2', '3', 'a', 'b', 'c']\r\n * a2.get().$; // ['5', 'f', 'g']\r\n */\r\nexport function alphabet(string) {\r\n  validate([string], ['string']);\r\n\r\n  const ranges = string.split(/([\\s\\S]\\-+[\\s\\S])?/g);\r\n  const length = ranges.length;\r\n  const alphabet = [];\r\n\r\n  for (let i = 0; i < length; i++) {\r\n    const range = ranges[i];\r\n\r\n    if (!range || range === ' ') {\r\n      continue;\r\n    }\r\n\r\n    if (/\\-/.test(range) && !/[\\s\\S]\\-+[\\s\\S]/.test(range)) {\r\n      throw new Error(`Wrong part of the string (${ range })! (in alphabet)`);\r\n    }\r\n\r\n    if (/\\-/.test(range)) {\r\n      const start = range.charCodeAt(0);\r\n      const end = range.charCodeAt(2);\r\n\r\n      if (start > end) {\r\n        throw new Error('Start of the range must be before its end! (in alphabet)');\r\n      }\r\n\r\n      for (let k = 0, len = end - start + 1; k < len; k++) {\r\n        alphabet.push(String.fromCharCode(start + k));\r\n      }\r\n\r\n      continue;\r\n    }\r\n\r\n    if (range.length === 1) {\r\n      alphabet.push(range);\r\n    }\r\n  }\r\n\r\n  return new Alphabet(alphabet);\r\n}\r\n\r\nexport default Alphabet;\r\n","/**\r\n * @module Switcher\r\n * @private\r\n * @mixin\r\n * @description Exports Switcher class.\r\n */\r\n\r\nimport {\r\n  isArray, isFunction, isString, isUndefined,\r\n  iterate, Symbol, toArray, defineProperties\r\n} from './helpers';\r\n\r\n/**\r\n * @typedef {'boolean'|'equals'|'strictEquals'|'call'} SwitcherMode\r\n * @public\r\n * @description Enum type of switcher modes.\r\n */\r\n\r\n/**\r\n * @callback SwitcherCallCallback\r\n * @public\r\n * @param {*} value - Switcher value.\r\n * @returns {Boolean|*} On what the callback returns depends if the case is a match (truthy for the match).\r\n */\r\n\r\n/**\r\n * @callback SwitcherMatchCallback\r\n * @public\r\n * @param {...*} args - Arguments from the second argument that switcher was called with.\r\n * @param {*} value - Switcher value.\r\n * @param {*} matched - Switcher matched case.\r\n */\r\n\r\n/**\r\n * @class Switcher\r\n * @public\r\n * @param {Object} [cases = {}] - Object of cases.\r\n * @param {SwitcherMode} [mode = 'equals'] - Switcher mode.\r\n * @param {*} [defaultValue] - Switcher default value.\r\n * @returns {Switcher} - Instance of Switcher.\r\n * @description Switcher class for creating functions working similar to switch (value) {} construction,\r\n * but with the value assignment. Switcher instance is a function that accepts a value argument and an optional\r\n * args argument. Args with additional switcher value and matched case\r\n * are passed into the function of the matched case (if it is a function).\r\n *\r\n * @example\r\n * const switcher = new Switcher();\r\n * const switcher = new Switcher({\r\n *   case1: 'value1',\r\n *   case2: 'value2'\r\n * });\r\n * const switcher = new Switcher('strictEquals');\r\n * const switcher = new Switcher({\r\n *   case1: 'value1',\r\n *   case2: 'value2'\r\n * }, 'strictEquals');\r\n * const switcher = new Switcher('strictEquals', 'defaultValue');\r\n * const switcher = new Switcher({\r\n *   case1: 'value1',\r\n *   case2: 'value2'\r\n * }, 'strictEquals', 'defaultValue');\r\n *\r\n * // See [switcher]{@link switcher} examples for more information.\r\n */\r\nexport class Switcher extends Function {\r\n  constructor(cases = {}, mode = 'equals', defaultValue) {\r\n    super();\r\n\r\n    if (isString(cases)) {\r\n      if (!isUndefined(arguments[1])) {\r\n        defaultValue = mode;\r\n      }\r\n\r\n      mode = cases;\r\n      cases = {};\r\n    }\r\n\r\n    const eventualCases = [];\r\n\r\n    iterate(cases, (value, Case) => {\r\n      eventualCases.push({ case: Case, value });\r\n    });\r\n\r\n    function switcher(value, args = []) {\r\n      const { mode, default: def, cases } = switcher.$$;\r\n\r\n      let ret = iterate(cases, ({ value: val, case: Case }) => {\r\n        if (\r\n          (mode === 'boolean' && Case) ||\r\n          /* eslint eqeqeq: 0 */\r\n          (mode === 'equals' && Case == value) ||\r\n          (mode === 'strictEquals' && Case === value) ||\r\n          (mode === 'call' && Case(value))\r\n        ) {\r\n          return { case: Case, value: val };\r\n        }\r\n      });\r\n\r\n      if (isUndefined(ret)) {\r\n        ret = { value: def };\r\n      }\r\n\r\n      if (!isFunction(ret.value)) {\r\n        return ret.value;\r\n      }\r\n\r\n      args = toArray(args, true);\r\n      args.push(value, ret.case);\r\n\r\n      return ret.value.apply(null, args);\r\n    }\r\n\r\n    /**\r\n     * @member Switcher#$$\r\n     * @type {Object}\r\n     * @protected\r\n     * @property {Array} cases - Array of cases.\r\n     * @property {SwitcherMode} mode - Switcher mode.\r\n     * @property {*} default - Switcher default value.\r\n     * @description Config parameters.\r\n     */\r\n    Object.defineProperty(switcher, '$$', {\r\n      value: {\r\n        cases: eventualCases,\r\n        mode,\r\n        default: defaultValue\r\n      }\r\n    });\r\n    Object.setPrototypeOf(switcher, Switcher.prototype);\r\n\r\n    return switcher;\r\n  }\r\n\r\n  /**\r\n   * @method Switcher#case\r\n   * @public\r\n   * @param {*|SwitcherCallCallback|Array.<*|SwitcherCallCallback>} cases - Case or an array of cases.\r\n   * @param {*|SwitcherMatchCallback} value - Value that has to be assigned or a function\r\n   * that is called with switcher value, if it's the case.\r\n   * @returns {Switcher} Returns this.\r\n   * @description Method for defining new cases.\r\n   *\r\n   * @example\r\n   * const sw = new Switcher()\r\n   *   .case(1, 'one')\r\n   *   .case(2, 'two');\r\n   *\r\n   * sw(1); // 'one'\r\n   * sw(2); // 'two'\r\n   */\r\n  case(cases, value) {\r\n    if (!isArray(cases)) {\r\n      cases = [cases];\r\n    }\r\n\r\n    iterate(cases, (Case) => {\r\n      this.$$.cases.push({ case: Case, value });\r\n    });\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @method Switcher#default\r\n   * @public\r\n   * @param {*} def - New default value.\r\n   * @returns {Switcher} Returns this.\r\n   * @description Method for redefining default switcher value.\r\n   *\r\n   * @example\r\n   * const sw = new Switcher()\r\n   *   .case(1, 'one')\r\n   *   .default('three');\r\n   *\r\n   * sw(1); // 'one'\r\n   * sw(2); // 'three'\r\n   */\r\n  default(def) {\r\n    this.$$.default = def;\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @method Switcher#mode\r\n   * @public\r\n   * @param {SwitcherMode} mode - New switcher mode.\r\n   * @returns {Switcher} Returns this.\r\n   * @description Method for redefining switcher mode.\r\n   *\r\n   * @example\r\n   * const sw = new Switcher()\r\n   *   .mode('strictEquals')\r\n   *   .case(1, 'number')\r\n   *   .case('1', 'string');\r\n   *\r\n   * sw(1);   // 'number'\r\n   * sw('1'); // 'string'\r\n   */\r\n  mode(mode) {\r\n    this.$$.mode = mode;\r\n\r\n    return this;\r\n  }\r\n}\r\n\r\ndefineProperties(Switcher.prototype, {\r\n  [Symbol.toStringTag]: 'Switcher'\r\n});\r\n\r\n/**\r\n * @function switcher\r\n * @public\r\n * @param {Object} [cases = {}] - Object of cases.\r\n * @param {SwitcherMode} [mode = 'equals'] - Switcher mode.\r\n * @param {*} [defaultValue] - Switcher default value.\r\n * @returns {Switcher} New instance of Switcher.\r\n * @description Simple wrap of [new Switcher(...)]{@link Switcher}.\r\n * \r\n * @example\r\n * const sw = switcher({\r\n *   1: 'foo',\r\n *   2: 'bar'\r\n * });\r\n * sw(1); // 'foo'\r\n * sw(2); // 'bar'\r\n * sw(3); // undefined\r\n * \r\n * @example\r\n * const sw = switcher()\r\n *   .case([1, 2], 'foo')\r\n *   .case(3, 'bar');\r\n *   \r\n * sw(1); // 'foo'\r\n * sw(2); // 'foo'\r\n * sw(3); // 'bar'\r\n * \r\n * @example\r\n * const sw = switcher('call')\r\n *   .case(isArray, 'array')\r\n *   .case(isString, 'string')\r\n *   .case(isNumber, 'number')\r\n *   .default('rest');\r\n *   \r\n * sw([]);    // 'array'\r\n * sw('foo'); // 'string'\r\n * sw(123);   // 'number'\r\n * sw({});    // 'rest'\r\n * \r\n * @example\r\n * const sw = switcher({\r\n *   1: (value) => {\r\n *     console.log(value + 1);\r\n *   },\r\n *   2: () => {\r\n *     console.log(value - 1);\r\n *   }\r\n * });\r\n * \r\n * sw(1); // 2\r\n * sw(2); // 1\r\n * \r\n * @example\r\n * const sw = switcher({\r\n *   first: (array) => array[0],\r\n *   last: (array) => array[array.length - 1]\r\n * }, 'equals', (array, index) => array[index]);\r\n * const array = [1, 2, 3, 4];\r\n * \r\n * sw('first', [array]); // 1\r\n * sw('last', [array]);  // 4\r\n * sw(1, [array]);       // 2\r\n * sw(2, [array]);       // 3\r\n */\r\nexport function switcher(cases, mode, defaultValue) {\r\n  return new Switcher(...arguments);\r\n}\r\n\r\n/**\r\n * @function when\r\n * @public\r\n * @param {Boolean|*} condition - Condition used for returning the proper value.\r\n * @param {*} value1 - Value if the condition is truthy.\r\n * @param {*} value2 - Value if the condition is falsey.\r\n * @returns {*} value1 or value2.\r\n * @description Synonym for\r\n * [ternary operator]{@link https://developer.mozilla.org/nl/docs/Web/JavaScript/Reference/Operators/Conditional_Operator}.\r\n * \r\n * @example\r\n * when(true, 'true', 'false'); // 'true'\r\n */\r\nexport function when(condition, value1, value2) {\r\n  return condition ? value1 : value2;\r\n}\r\n\r\nexport default Switcher;\r\n","/**\n * @module Super\n * @private\n * @mixin\n * @description Exports Super class.\n */\n\nimport D from './D';\nimport { switcher } from './Switcher';\nimport constructors from './constants/constructors';\nimport {\n  isArray, isArrayLike, isDate, isElement, isFunction, isNaN, isNull, isNullOrUndefined,\n  isObject, isPlainObject, isPrimitive, isRegExp, isString, isUndefined,\n  validate, toStringTag, iterate, Symbol, defineProperties\n} from './helpers';\n\n/**\n * @typedef {Super|Arr|Func|Elem|Str|Num|Dat|BlobObject} DWrap\n * @public\n * @description Any kind of D-Wrap.\n */\n\n/**\n * @typedef {String|Number|null} Key\n * @public\n * @description Key type used in many methods.\n */\n\n/**\n * @typedef {TreeElement[]} Tree\n * @public\n */\n\n/**\n * @typedef {Object} TreeElement\n * @public\n * @property {Key} key - Tree element key.\n * @property {*} value - Tree element value.\n * @description {@link Tree} element.\n */\n\n/**\n * @callback DeepIterationCallback\n * @public\n * @param {*} value - Current iteration value.\n * @param {String|Number} key - Current iteration key/index.\n * @param {*} object - Iteration object.\n * @param {Tree} tree - Tree of { key, value } elements.\n */\n\n/**\n * @callback DeepReduceCallback\n * @public\n * @param {*} previousValue - Previous value.\n * @param {*} value - Current iteration value.\n * @param {String|Number} key - Current iteration key/index.\n * @param {*} object - Iteration object.\n * @param {Tree} tree - Tree of { key, value } elements.\n */\n\n/**\n * @callback IterationCallback\n * @public\n * @param {*} value - Current iteration value.\n * @param {String|Number} key - Current iteration key/index.\n * @param {*} object - Iteration object.\n */\n\n/**\n * @callback JSONCallback\n * @public\n * @param {String|null} key - Current value.\n * @param {*} value - Current key.\n * @param {Object} object - Iteration object.\n */\n\n/**\n * @callback ObjectCallback\n * @public\n * @param {Object} newObject - The new object.\n * @param {*} value - Current iteration value.\n * @param {String|Number} key - Current iteration key/index.\n * @param {*} object - Iteration object.\n */\n\n/**\n * @callback ReduceCallback\n * @public\n * @param {*} previousValue - Previous value.\n * @param {*} value - Current iteration value.\n * @param {String|Number} key - Current iteration key/index.\n * @param {*} object - Iteration object.\n */\n\n/**\n * @callback SuperMethod\n * @public\n * @this {DWrap}\n */\n\nconst cloneSwitcher = switcher('call', (object) => object)\n  .case(\n    (object) => new Super(object) === object,\n    (object) => new (object.proto().$.constructor)(object)\n  )\n  .case(isElement, (object, deep) => object.clone(deep))\n  .case(isDate, (object) => new Date(object))\n  .case(isRegExp, (object) => new RegExp(object.source, object.flags))\n  .case(isArray, () => [])\n  .case(isPlainObject, () => ({}));\n\n/**\n * @class Super\n * @public\n * @param {*} [object] - An object to wrap.\n * @returns {DWrap} Instance of Super.\n * @description Wrap of any value. And there is no way to create a nested wrap.\n *\n * @example\n * new Super({}); // Super\n */\nexport class Super {\n  constructor(object) {\n    if (object instanceof Super) {\n      return object;\n    }\n\n    /**\n     * @member Super#$\n     * @type {*}\n     * @public\n     * @description Wrapped object.\n     */\n    Object.defineProperty(this, '$', { value: object });\n  }\n\n  /**\n   * @method Super.addStaticProperties\n   * @public\n   * @param {String|Object} property - Either a string of a property or an object\n   * with properties keys and values values.\n   * @param {Object} [value] - If a property parameter is a string this has to be a property value.\n   * @returns {this} Returns this.\n   * @description Sets static properties for DWrap constructors.\n   *\n   * @example\n   * Super.addStaticProperties('cool', 42);\n   * Super.addStaticProperties('superCool', 42*42);\n   */\n  static addStaticProperties(property, value) {\n    if (arguments.length >= 2) {\n      property = { [property]: value };\n    }\n\n    defineProperties(this, property);\n\n    return this;\n  }\n\n  /**\n   * @method Super.addInstanceProperties\n   * @public\n   * @param {String|Object} property - Either a string of a property or an object\n   * with properties keys and values values.\n   * @param {Object} [value] - If a property parameter is a string this has to be a property value.\n   * @returns {this} Returns this.\n   * @description Sets static properties for DWrap prototypes.\n   *\n   * @example\n   * Super.addInstanceProperties('cool', 42);\n   * Super.addInstanceProperties('superCool', 42*42);\n   */\n  static addInstanceProperties(property, value) {\n    if (arguments.length >= 2) {\n      property = { [property]: value };\n    }\n\n    defineProperties(this.prototype, property);\n\n    return this;\n  }\n\n  /**\n   * @method Super#assign\n   * @public\n   * @param {...*} objects - Objects to be assigned to the object.\n   * @returns {DWrap} Returns this.\n   * @description Synonym for\n   * [Object.assign]\n   * {@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/assign}.\n   *\n   * @example\n   * new Super({ a: 1, b: 2 }).assign({ a: 3 }, { c: 3, d: 4 }, { d: 5 }).$; // { a: 3, b: 2, c: 3, d: 5 }\n   */\n  assign(...objects) {\n    const object = this.$;\n\n    iterate(object && arguments, (o) => {\n      iterate(new Super(o).$, (value, key) => {\n        object[key] = value;\n      });\n    });\n\n    return this;\n  }\n\n  /**\n   * @method Super#average\n   * @public\n   * @param {IterationCallback} [callback = null] - Callback that is passed to {@link Super#sum}.\n   * @returns {Number} Average value.\n   * @description Synonym for object.sum(callback) / object.count.\n   *\n   * @example\n   * new Super({ a: 1, b: 2, c: 3 }).average();                         // 2\n   * new Super({ a: 1, b: 2, c: 5 }).average((value) => value * value); // 10\n   */\n  average(callback = null) {\n    validate([callback], ['function||!'], 'Super#average');\n\n    return this.sum(callback) / this.count;\n  }\n\n  /**\n   * @method Super#call\n   * @public\n   * @param {SuperMethod} func - Function to be called with this context.\n   * @param {...*} args - Arguments to be called with.\n   * @returns {*} Return of function call.\n   * @description Synonym for func.call(DObject, ...args);\n   *\n   * @example\n   * new Super({ a: 1 }).call(function (b, c) {\n   *   return this.a + b + c;\n   * }, 2, 3); // 6\n   */\n  call(func, ...args) {\n    validate([func], ['function'], 'Super#call');\n\n    return func.apply(this, args);\n  }\n\n  /**\n   * @method Super#clone\n   * @returns {DWrap} New object.\n   * @description Method assigns properties of the object to an empty one and returns the new one.\n   *\n   * @example\n   * new Super({ a: 1, b: { c: 2 } }).clone().$; // { a: 1, b: { c: 2 } }\n   */\n  clone() {\n    const object = this.$;\n    const clone = cloneSwitcher(object, [object, false]);\n\n    if (clone !== object) {\n      iterate(object, (value, key) => {\n        clone[key] = value;\n      });\n    }\n\n    return new this.constructor(clone);\n  }\n\n  /**\n   * @member Super#count\n   * @type {Number}\n   * @public\n   * @readonly\n   * @description Returns number of own enumerable keys of the object.\n   *\n   * @example\n   * new Super({ a: 1, b: 2 }).count; // 2\n   */\n  get count() {\n    const object = this.$;\n\n    if (!isObject(object)) {\n      return 0;\n    }\n\n    return isArrayLike(object) ? object.length : Object.keys(object).length;\n  }\n\n  /**\n   * @method Super#create\n   * @public\n   * @param {Object} [descriptors] - Descriptors passed to Object.create.\n   * @returns {DWrap} New instance of D-Wrap.\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/create\n   * @description Synonym for\n   * [Object.create]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/create}.\n   *\n   * @example\n   * new Super({}).create({\n   *   a: {\n   *     value: 1,\n   *     enumerable: false,\n   *     writable: true,\n   *     configurable: false\n   *   }\n   * }).$; // { a: 1 }\n   */\n  create(descriptors) {\n    return D(isPrimitive(this.$) ? undefined : Object.create(this.$, descriptors));\n  }\n\n  /**\n   * @method Super#deepAssign\n   * @public\n   * @param {...*} objects - Objects to be assigned to the object.\n   * @returns {DWrap} Returns this.\n   * @description Deep analogue of {@link Super#assign}.\n   *\n   * @example\n   * new Super({ a: 1 }).deepAssign(\n   *   {\n   *     b: {\n   *       c: 2\n   *     }\n   *   },\n   *   {\n   *     a: {\n   *       b: 1\n   *     }\n   *   },\n   *   {\n   *     a: {\n   *       c: {\n   *         d: 1\n   *       }\n   *     },\n   *     b: 2\n   *   },\n   *   null\n   * });\n   * // {\n   * //   a: {\n   * //     b: 1,\n   * //     c: {\n   * //       d: 1\n   * //     }\n   * //   },\n   * //   b: 2,\n   * // }\n   */\n  deepAssign(...objects) {\n    const object = this.$;\n\n    if (isPrimitive(object)) {\n      return this;\n    }\n\n    iterate(arguments, (o) => {\n      deepAssign(object, o);\n    });\n\n    return this;\n  }\n\n  /**\n   * @method Super#deepClone\n   * @public\n   * @returns {DWrap} New instance of DWrap.\n   * @description Deep cloning method. Clones plain objects, arrays, regular expressions and elements, the rest stays the same.\n   *\n   * @example\n   * new Super({ a: 1, b: [2, 3], c: { d: 4 } }).deepClone().$;\n   * // {\n   * //   a: 1,\n   * //   b: [2, 3],\n   * //   c: { d: 4 }\n   * // }\n   */\n  deepClone() {\n    return new this.constructor(deepClone(this.$));\n  }\n\n  /**\n   * @method Super#deepEquals\n   * @public\n   * @param {*} [object] - Object to compare to.\n   * @returns {Boolean} - If the objects are deep equal or not.\n   * @description Method for deep comparison of two objects.\n   *\n   * @example\n   * new Super({ a: 1 }).deepEquals({ a: '1' }); // true\n   * new Super(/1/).deepEquals(/1/);             // true\n   */\n  deepEquals(object = null) {\n    return deepEqual(this.$, object, false);\n  }\n\n  /**\n   * @method Super#deepEvery\n   * @public\n   * @param {DeepIterationCallback} [callback = Boolean] - Called on each iteration.\n   * If returns truthy iteration goes on and if falsey it stops.\n   * @param {Number} [n = Infinity] - Iteration depth.\n   * @returns {Boolean} If all the callback calls returned truthy value.\n   * @description Returns boolean if all the callback calls returned truthy value.\n   * Otherwise false. Deep analogue of {@link Super#every}.\n   *\n   * @example\n   * new Super({ a: 1, b: { c: 2, d: 3 } }).deepEvery((value) => value < 4); // true\n   * new Super({ a: {}, b: {}, c: {} }).deepEvery(() => false);              // true\n   */\n  deepEvery(callback, n) {\n    if (arguments.length === 1 && !isFunction(callback)) {\n      n = callback;\n      callback = Boolean;\n    } else if (arguments.length === 1) {\n      n = Infinity;\n    } else if (!arguments.length) {\n      n = Infinity;\n      callback = Boolean;\n    }\n\n    validate([callback, n], ['function', ['numberLike', '>0']], 'Super#deepEvery');\n\n    n = Number(n);\n\n    return deepEvery(this.$, callback, n, [{ key: null, value: this.$ }]);\n  }\n\n  /**\n   * @method Super#deepFilter\n   * @public\n   * @param {DeepIterationCallback} [callback = Boolean] - Called on each iteration.\n   * If returns truthy the element is included and if falsey it's excluded.\n   * @param {Number} [n = Infinity] - Iteration depth.\n   * @returns {DWrap} New D-Wrap of filtered object.\n   * @description Returns filtered by the callback object. Deep analogue of {@link Super#filter}.\n   *\n   * @example\n   * new Super({ a: 1, b: { c: 2, d: 3 } }).deepFilter((value) => value%2).$;     // { a: 1, b: { d: 3 } }\n   * new Super({ a: 1, b: { c: 2, d: 3 } }).deepFilter((value) => value === 1).$; // { a: 1 }\n   * new Super({ a: 1, b: { c: 2, d: 3 } }).deepFilter((value) => value > 3).$;   // {}\n   */\n  deepFilter(callback, n) {\n    if (arguments.length === 1 && !isFunction(callback)) {\n      n = callback;\n      callback = Boolean;\n    } else if (arguments.length === 1) {\n      n = Infinity;\n    } else if (!arguments.length) {\n      n = Infinity;\n      callback = Boolean;\n    }\n\n    validate([callback, n], ['function', ['numberLike', '>0']], 'Super#deepFilter');\n\n    const filtered = deepFilter(this.$, callback, n, [{ key: null, value: this.$ }]);\n\n    return D(isNullOrUndefined(filtered) ? filtered : filtered || {});\n  }\n\n  /**\n   * @method Super#deepFind\n   * @public\n   * @param {DeepIterationCallback} [callback = Boolean] - Called on each iteration.\n   * If returns truthy iteration stops and if falsey it continues.\n   * @param {Number} [n = Infinity] - Iteration depth.\n   * @returns {Tree|null} Tree of { key, value } if something found and null if not.\n   * @description Returns tree of the elements if something found and null if nothing found.\n   * Deep analogue of {@link Super#find}.\n   *\n   * @example\n   * new Super({ a: 1, b: { c: 2, d: 3 } }).deepFind((value) => value === 2);\n   * // [\n   * //   { key: 'c', value: 2 },\n   * //   { key: 'b', value: { c: 2, d: 3 } },\n   * //   { key: null, value: <initial object> }\n   * // ]\n   */\n  deepFind(callback, n) {\n    if (arguments.length === 1 && !isFunction(callback)) {\n      n = callback;\n      callback = Boolean;\n    } else if (arguments.length === 1) {\n      n = Infinity;\n    } else if (!arguments.length) {\n      n = Infinity;\n      callback = Boolean;\n    }\n\n    validate([callback, n], ['function', ['numberLike', '>0']], 'Super#deepFind');\n\n    return deepFind(this.$, callback, n, [{ key: null, value: this.$ }]);\n  }\n\n  /**\n   * @method Super#deepForEach\n   * @public\n   * @param {DeepIterationCallback} callback - Called on each iteration.\n   * @param {Number} [n = Infinity] - Iteration depth.\n   * @returns {DWrap} Returns this.\n   * @description Method for iterating over any object. Deep analogue of {@link Super#forEach}.\n   *\n   * @example\n   * new Super({ a: 1, b: { c: 2, d: 3 } }).deepForEach((value, key, object) => object[key] = value * value).$;\n   * // { a: 1, b: { c: 4, d: 9 } }\n   */\n  deepForEach(callback, n = Infinity) {\n    validate([callback, n], ['function', ['numberLike', '>0']], 'Super#deepForEach');\n\n    n = Number(n);\n\n    deepForEach(this.$, callback, n, [{ key: null, value: this.$ }]);\n\n    return this;\n  }\n\n  /**\n   * @method Super#deepFreeze\n   * @public\n   * @returns {DWrap} Returns this.\n   * @description Deep analogue of {@link Super#freeze}.\n   *\n   * @example\n   * new Super({ a: 1, b: { c: 2, d: 3 } }).deepFreeze(); // Super\n   */\n  deepFreeze() {\n    deepFreeze(this.$);\n\n    return this;\n  }\n\n  /**\n   * @method Super#deepMap\n   * @public\n   * @param {DeepIterationCallback} callback - Called on each iteration.\n   * Return value is used for creating a new object.\n   * @param {Number} [n = Infinity] - Iteration depth.\n   * @returns {DWrap} D-Wrap of the new object.\n   * @description Returns a wrap of a new object using the callback. Deep analogue of {@link Super#map}.\n   *\n   * @example\n   * new Super({ a: 1, b: { c: 2, d: 3 } }).deepMap((value) => value * value).$;\n   * // { a: 1, b: { c: 4, d: 9 } }\n   */\n  deepMap(callback, n = Infinity) {\n    validate([callback, n], ['function', ['numberLike', '>0']], 'Super#deepMap');\n\n    n = Number(n);\n\n    return D(deepMap(this.$, callback, n, [{ key: null, value: this.$ }]));\n  }\n\n  /**\n   * @method Super#deepReduce\n   * @public\n   * @param {DeepReduceCallback} callback - Called on each iteration.\n   * Return value is passed to the next callback call.\n   * @param {Number} [n = Infinity] - Iteration depth.\n   * @param {*} [IV = <first value>|undefined] - Initial value.\n   * @returns {*} Modified IV.\n   * @description Returns modified IV. Deep analogue of {@link Super#reduce}.\n   *\n   * @example\n   * new Super({ a: 1, b: { c: 2, d: 3 } }).deepReduce((sum, value) => sum + value * value, Infinity, 0); // 14\n   */\n  deepReduce(callback, n = Infinity, IV) {\n    validate([callback, n], ['function', ['numberLike', '>0']], 'Super#deepReduce');\n\n    n = Number(n);\n\n    const object = this.$;\n    const tree = [{ key: null, value: this.$ }];\n\n    if (arguments.length < 3) {\n      return deepReduce(object, callback, n, false, undefined, tree).IV;\n    }\n\n    return deepReduce(object, callback, n, false, { IV }, tree).IV;\n  }\n\n  /**\n   * @method Super#deepSome\n   * @public\n   * @param {DeepIterationCallback} [callback = Boolean] - Called on each iteration.\n   * If returns truthy iteration stops and if falsey it continues.\n   * @param {Number} [n = Infinity] - Iteration depth.\n   * @returns {Boolean} If all the callback calls returned truthy value.\n   * @description Returns true if some of the callback calls returned truthy value.\n   * Otherwise false. Deep analogue of {@link Super#some}.\n   *\n   * @example\n   * new Super({ a: 1, b: { c: 2, d: 3 } }).deepSome((value) => value > 4); // false\n   * new Super({ a: {}, b: {}, c: {} }).deepSome(() => true);               // false\n   */\n  deepSome(callback, n) {\n    if (arguments.length === 1 && !isFunction(callback)) {\n      n = callback;\n      callback = Boolean;\n    } else if (arguments.length === 1) {\n      n = Infinity;\n    } else if (!arguments.length) {\n      n = Infinity;\n      callback = Boolean;\n    }\n\n    validate([callback, n], ['function', ['numberLike', '>0']], 'Super#deepSome');\n\n    n = Number(n);\n\n    return deepSome(this.$, callback, n, [{ key: null, value: this.$ }]);\n  }\n\n  /**\n   * @method Super#deepStrictEquals\n   * @public\n   * @param {*} [object] - Object to compare to.\n   * @returns {Boolean} - If the objects are deep strict equal or not.\n   * @description Method for deep strict comparison of two objects.\n   *\n   * @example\n   * new Super({ a: 1 }).deepStrictEquals({ a: '1' }); // false\n   * new Super(/1/).deepStrictEquals(/1/);             // true\n   */\n  deepStrictEquals(object = null) {\n    return deepEqual(this.$, object, true);\n  }\n\n  /**\n   * @method Super#define\n   * @param {String|Object} property - Either a string of a property or a descriptors object.\n   * @param {Object} [descriptor] - If a property parameter is a string this has to be a property descriptor.\n   * @returns {DWrap} Returns this.\n   * @description Synonym for both\n   * [Object.defineProperty]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperty}\n   * and\n   * [Object.defineProperties]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/defineProperties}.\n   *\n   * @example\n   * new Super({}).define('a', {\n   *   value: 1,\n   *   enumerable: false,\n   *   writable: true,\n   *   configurable: false\n   * }).$; // { a: 1 }\n   * new Super({}).define({\n   *   a: {\n   *     value: 1,\n   *     enumerable: false,\n   *     writable: true,\n   *     configurable: false\n   *   }\n   * }).$; // { a: 1 }\n   */\n  define(property, descriptor) {\n    if (arguments.length >= 2) {\n      property = { [property]: descriptor };\n    }\n\n    property = new Super(property).$;\n\n    if (isObject(this.$)) {\n      Object.defineProperties(this.$, property);\n    }\n\n    return this;\n  }\n\n  /**\n   * @method Super#delete\n   * @public\n   * @param {...String} props - List of properties to delete.\n   * @returns {DWrap} Returns this.\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/delete\n   * @description Synonym for multiple\n   * [\"delete\" operator]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/delete}.\n   *\n   * @example\n   * new Super({ a: 1, b: 2, c: 3 }).delete('c', 'a').$; // { b: 2 }\n   */\n  delete(...props) {\n    const object = this.$;\n\n    iterate(object && props, (property) => {\n      delete object[property];\n    });\n\n    return this;\n  }\n\n  /**\n   * @method Super#equals\n   * @public\n   * @param {*} [object] - Object to compare.\n   * @returns {Boolean} If the objects are equal or not.\n   * @description Returns true if objects are equal using '==' operator and false if not. NaNs are considered to be equal.\n   *\n   * @example\n   * new Super(3).equals('3');   // true\n   * new Super(NaN).equals(NaN); // true\n   */\n  equals(object) {\n    const o = this.$;\n\n    object = new Super(object).$;\n\n    /* eslint eqeqeq: 0 */\n    return o == object || (isNaN(o) && isNaN(object));\n  }\n\n  /**\n   * @method Super#every\n   * @public\n   * @param {IterationCallback} [callback = Boolean] - Called on each iteration.\n   * If returns truthy iteration goes on and if falsey it stops.\n   * @returns {Boolean} If all the callback calls returned truthy value.\n   * @description Returns boolean if all the callback calls returned truthy value.\n   *\n   * @example\n   * new Super({ a: 1, b: 2, c: 3 }).every((value) => value < 4); // true\n   * new Super({}).every(() => false);                            // true\n   */\n  every(callback = Boolean) {\n    validate([callback], ['function'], 'Super#every');\n\n    return iterate(this.$, (value, key, object) => {\n      if (!callback(value, key, object)) {\n        return false;\n      }\n    }) !== false;\n  }\n\n  /**\n   * @method Super#filter\n   * @public\n   * @param {IterationCallback} [callback = Boolean] - Called on each iteration.\n   * If returns truthy the element is included and if falsey it's excluded.\n   * @returns {DWrap} New D-Wrap of filtered object.\n   * @description Returns filtered by the callback object.\n   *\n   * @example\n   * new Super({ a: 1, b: 2, c: 3 }).filter((value) => value%2).$; // { a: 1, c: 3 }\n   * new Super(null).filter((value) => value%2).$;                 // null\n   */\n  filter(callback = Boolean) {\n    validate([callback], ['function'], 'Super#filter');\n\n    const object = this.$;\n    const array = isArrayLike(object);\n\n    /* eslint no-nested-ternary: 0 */\n    const o = array ? [] : isNullOrUndefined(object) ? object : {};\n\n    iterate(object, (value, key) => {\n      if (callback(value, key, object)) {\n        if (array) {\n          o.push(value);\n        } else {\n          o[key] = value;\n        }\n      }\n    });\n\n    return D(o);\n  }\n\n  /**\n   * @method Super#find\n   * @public\n   * @param {IterationCallback} [callback = Boolean] - Called on each iteration.\n   * If returns truthy iteration stops and if falsey it continues.\n   * @returns {{ key: Key, value: * }|null} { key, value } if found and null if not.\n   * @description Returns found { key, value } if something found and null if nothing found.\n   *\n   * @example\n   * new Super({ a: 1, b: 2, c: 3 }).find((value) => value === 2); // { key: 'b', value: 2 }\n   * new Super([1, 2, 3]).find((value) => value === 2);            // { key: 1, value: 2 }\n   */\n  find(callback) {\n    validate([callback], ['function'], 'Super#find');\n\n    return iterate(this.$, (value, key, object) => {\n      if (callback(value, key, object)) {\n        return { key, value };\n      }\n    }) || null;\n  }\n\n  /**\n   * @method Super#forEach\n   * @public\n   * @param {IterationCallback} callback - Called on each iteration.\n   * @returns {DWrap} Returns this.\n   * @description Method for iterating over any object.\n   *\n   * @example\n   * new Super({ a: 1, b: 2, c: 3 }).forEach((value, key, object) => {\n   *   object[key] = value * value;\n   * }).$; // { a: 1, b: { c: 4, d: 5 } }\n   */\n  forEach(callback) {\n    validate([callback], ['function'], 'Super#forEach');\n\n    iterate(this.$, (value, key, object) => {\n      callback(value, key, object);\n    });\n\n    return this;\n  }\n\n  /**\n   * @method Super#freeze\n   * @public\n   * @returns {DWrap} Returns this.\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze\n   * @description Synonym for\n   * [Object.freeze]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/freeze}.\n   *\n   * @example\n   * new Super({ a: 1, b: 2, c: 3 }).freeze(); // Super\n   */\n  freeze() {\n    Object.freeze(this.$);\n\n    return this;\n  }\n\n  /**\n   * @method Super#get\n   * @public\n   * @param {String|Object.<String, Function>} property - Either a string of a property or a getters object.\n   * @param {Function} [getter] - If a property parameter is a string this has to be a getter function.\n   * @returns {DWrap} Returns this.\n   * @description Method for defining getters.\n   *\n   * @example\n   * const object1 = new Super({}).get('a', () => 1).$;\n   * object1.a; // 1\n   *\n   * const object2 = new Super({}).get({\n   *   a: () => 2\n   * }).$;\n   * object2.a; // 2\n   */\n  get(property, getter) {\n    if (arguments.length >= 2) {\n      property = { [property]: getter };\n    }\n\n    const object = this.$;\n\n    iterate(isObject(object) && new Super(property).$, (getter, property) => {\n      Object.defineProperty(object, property, { get: getter });\n    });\n\n    return this;\n  }\n\n  /**\n   * @method Super#has\n   * @public\n   * @param {String|*} key - Property to check.\n   * @returns {Boolean} Returns true if the object has the key and false if not.\n   * @see https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Operators/in\n   * @description Synonym for\n   * [\"in\" operator]{@link https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Operators/in}.\n   *\n   * @example\n   * new Super({ a: 1, b: 2, c: 3 }).has('b'); // true\n   */\n  has(key) {\n    const object = this.$;\n\n    if (!isObject(object)) {\n      return false;\n    }\n\n    return key in object;\n  }\n\n  /**\n   * @method Super#hasOwn\n   * @public\n   * @param {String|*} key - Property to check.\n   * @returns {Boolean} Returns true if the object has its own key and false if not.\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/hasOwnProperty\n   * @description Synonym for\n   * [Object#hasOwnProperty]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/hasOwnProperty}.\n   *\n   * @example\n   * new Super({ a: 1, b: 2, c: 3 }).hasOwn('b');              // true\n   * new Super({ a: 1, b: 2, c: 3 }).hasOwn('hasOwnProperty'); // false\n   */\n  hasOwn(key) {\n    const object = this.$;\n\n    if (!isObject(object)) {\n      return false;\n    }\n\n    return {}.hasOwnProperty.call(object, key);\n  }\n\n  /**\n   * @method Super#instanceof\n   * @public\n   * @param {Function} constructor - Constructor to check.\n   * @returns {Boolean} If the object is an instance of constructor.\n   * @see https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Operators/instanceof\n   * @description Synonym for\n   * [\"instanceof\" operator]{@link https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Operators/instanceof}.\n   */\n  instanceof(constructor) {\n    return this.$ instanceof constructor;\n  }\n\n  /**\n   * @method Super#isFrozen\n   * @public\n   * @returns {Boolean} If the object is frozen.\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/isFrozen\n   * @description Synonym for\n   * [Object.isFrozen]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/isFrozen}.\n   *\n   * @example\n   * new Super({}).freeze().isFrozen(); // true\n   */\n  isFrozen() {\n    return Object.isFrozen(this.$);\n  }\n\n  /**\n   * @method Super#json\n   * @public\n   * @param {JSONCallback|String[]} [replacer] - See the link.\n   * @param {String|Number} [space] - See the link.\n   * @returns {String} JSON string.\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify\n   * @description Synonym for\n   * [JSON.stringify]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify}.\n   *\n   * @example\n   * new Super({ a: 1, b: 2, c: 3 }).json(); // '{\"a\":1,\"b\":2,\"c\":3}'\n   * new Super({ a: 1, b: 2, c: 3 }).json('    ');\n   * // {\n   * //     \"a\": 1,\n   * //     \"b\": 2,\n   * //     \"c\": 3\n   * // }\n   * new Super({ a: 1, b: 2, c: 3 }).json((key, value) => {\n   *   if (typeof value === 'number') {\n   *     return value%2 ? key + value0 : undefined;\n   *   }\n   *\n   *   return value;\n   * }, 2);\n   * // {\n   * //   \"a\": \"a1\",\n   * //   \"c\": \"c3\"\n   * // }\n   */\n  json(replacer, space) {\n    if (arguments.length === 1 && !isFunction(replacer) && !isArray(replacer)) {\n      [].unshift.call(arguments, null);\n    }\n\n    [].unshift.call(arguments, this.$);\n\n    return JSON.stringify.apply(JSON, arguments);\n  }\n\n  /**\n   * @method Super#keyOf\n   * @public\n   * @param {*} value - Value to find.\n   * @returns {String|Number|null} A key or an index if found and null if not.\n   * @description Method for finding equal to the argument value in the object. NaNs are considered to be equal.\n   *\n   * @example\n   * new Super({ a: 1, b: 2, c: 3 }).keyOf(2);   // 'b'\n   * new Super({ a: 1, b: 2, c: 3 }).keyOf('2'); // 'b'\n   */\n  keyOf(value) {\n    const key = iterate(this.$, (val, key) => {\n      if (val == value || (isNaN(val) && isNaN(value))) {\n        return key;\n      }\n    });\n\n    return isUndefined(key) ? null : key;\n  }\n\n  /**\n   * @method Super#keyOfStrict\n   * @public\n   * @param {*} value - Value to find.\n   * @returns {String|Number|null} A key or an index if found and null if not.\n   * @description Method for finding strict equal to the argument value in the object. NaNs are considered to be equal.\n   *\n   * @example\n   * new Super({ a: 1, b: 2, c: 3 }).keyOfStrict(2);   // 'b'\n   * new Super({ a: 1, b: 2, c: 3 }).keyOfStrict('2'); // 'b'\n   */\n  keyOfStrict(value) {\n    const key = iterate(this.$, (val, key) => {\n      if (val === value || (isNaN(val) && isNaN(value))) {\n        return key;\n      }\n    });\n\n    return isUndefined(key) ? null : key;\n  }\n\n  /**\n   * @method Super#keys\n   * @public\n   * @returns {DWrap} A wrap of the keys array.\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/keys\n   * @description Synonym for\n   * [Object.keys]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/keys}.\n   *\n   * @example\n   * new Super({ a: 1, b: 2, c: 3 }).keys().$; // ['a', 'b', 'c']\n   * new Super(null).keys().$;                 // []\n   */\n  keys() {\n    const object = this.$;\n\n    return D(isObject(object) ? Object.keys(object) : []);\n  }\n\n  /**\n   * @method Super#map\n   * @public\n   * @param {IterationCallback} callback - Called on each iteration.\n   * Return value is used for creating a new object.\n   * @returns {DWrap} D-Wrap of the new object.\n   * @description Returns a wrap of a new object using the callback.\n   *\n   * @example\n   * new Super({ a: 1, b: 2, c: 3 }).map((value) => value * 2).$; // { a: 2, b: 4, c: 6 }\n   * new Super(null).map((value) => value * 2).$;                 // null\n   */\n  map(callback) {\n    validate([callback], ['function'], 'Super#map');\n\n    const object = this.$;\n    const o = isArrayLike(object) ? [] : isNull(object) ? null : {};\n\n    iterate(object, (value, key) => {\n      o[key] = callback(value, key, object);\n    });\n\n    return D(o);\n  }\n\n  /**\n   * @method Super#max\n   * @public\n   * @param {IterationCallback} callback - Called on each iteration.\n   * Return value is used for comparison with the previous max value.\n   * @returns {{key: Key, value: Number}} Object with max value and key of the max value.\n   * @description Method for finding max value in the object.\n   * If no callback is present comparison is between values of the object.\n   *\n   * @example\n   * new Super({ a: 1, b: 2, c: 3 }).max();                     // { key: 'c', value: 3 }\n   * new Super({ a: 1, b: 2, c: 3 }).max((value) => 4 - value); // { key: 'a', value: 3 }\n   * new Super({ a: 'a', b: 'b', c: 'c' }).max();               // { key: null, value: -Infinity }\n   */\n  max(callback = null) {\n    validate([callback], ['function||!'], 'Super#max');\n\n    return this.object((max, value, key, object) => {\n      const val = Number(callback ? callback(value, key, object) : value);\n\n      if (val > max.value) {\n        max.key = key;\n        max.value = val;\n      }\n    }, { key: null, value: -Infinity }).$;\n  }\n\n  /**\n   * @method Super#min\n   * @public\n   * @param {IterationCallback} callback - Called on each iteration.\n   * Return value is used for comparison with the previous min value.\n   * @returns {{key: Key, value: Number}} Object with min value and key of the min value.\n   * @description Method for finding min value in the object.\n   * If no callback is present comparison is between values of the object.\n   *\n   * @example\n   * new Super({ a: 1, b: 2, c: 3 }).min();                     // { key: 'a', value: 1 }\n   * new Super({ a: 1, b: 2, c: 3 }).min((value) => 4 - value); // { key: 'c', value: 1 }\n   * new Super({ a: 'a', b: 'b', c: 'c' }).min();               // { key: null, value: Infinity }\n   */\n  min(callback = null) {\n    validate([callback], ['function||!'], 'Super#min');\n\n    return this.object((min, value, key, object) => {\n      const val = Number(callback ? callback(value, key, object) : value);\n\n      if (val < min.value) {\n        min.key = key;\n        min.value = val;\n      }\n    }, { key: null, value: Infinity }).$;\n  }\n\n  /**\n   * @method Super#object\n   * @public\n   * @param {ObjectCallback} callback - Called on each iteration.\n   * @param {Object|*} [object = {}] - Object that is passed to the callback.\n   * @returns {DWrap} Wrap of the new object.\n   * @description Type of {@link Super#reduce}.\n   * The object is passed as an argument into the callback. The output is this object.\n   *\n   * @example\n   * new Super({ a: 1, b: 2 }).object((object, value, key) => {\n   *   object[key] = value;\n   *   object[key + key] = value * 2;\n   * }).$; // { a: 1, aa: 2, b: 2, bb: 4 }\n   */\n  object(callback, object = {}) {\n    validate([callback], ['function'], 'Super#object');\n\n    iterate(this.$, (value, key, obj) => {\n      callback(object, value, key, obj);\n    });\n\n    return D(object);\n  }\n\n  /**\n   * @method Super#prop\n   * @public\n   * @param {String|Object.<String, *>} property - Either a string of a property or an assigned object.\n   * @param {*} [value] - If a property parameter is a string\n   * this has to be an assigned value if it's present.\n   * @returns {DWrap|*} Returns this if it's a setter or a value if getter.\n   * @description Method for getting and setting properties.\n   *\n   * @example\n   * new Super({ a: 1, b: 2, c: 3 }).prop('a');              // 1\n   * new Super({ a: 1, b: 2, c: 3 }).prop('a', 7).$;         // { a: 7, b: 2, c: 3 }\n   * new Super({ a: 1, b: 2, c: 3 }).prop({ a: 7, b: 8 }).$; // { a: 7, b: 8, c: 3 }\n   */\n  prop(property, value) {\n    if (arguments.length <= 1 && isString(property)) {\n      return this.$ ? this.$[property] : undefined;\n    }\n\n    if (arguments.length >= 2) {\n      property = { [property]: value };\n    }\n\n    return this.assign(property);\n  }\n\n  /**\n   * @method Super#propertyDescriptor\n   * @public\n   * @param {String} property - Property of the object.\n   * @returns {Object|undefined} Property descriptor.\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertyDescriptor\n   * @descriptor Synonym for\n   * [Object.getOwnPropertyDescriptor]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertyDescriptor}.\n   *\n   * @example\n   * new Super({ a: 1 }).propertyDescriptor('a');\n   * // {\n   * //   value: 1,\n   * //   enumerable: true,\n   * //   writable: true,\n   * //   configurable: true\n   * // }\n   */\n  propertyDescriptor(property) {\n    const object = this.$;\n\n    return isObject(object) ? Object.getOwnPropertyDescriptor(object, property) : undefined;\n  }\n\n  /**\n   * @method Super#propertyNames\n   * @public\n   * @returns {DWrap} D-Wrap of the names array.\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertyNames\n   * @descriptor Synonym for\n   * [Object.getOwnPropertyNames]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertyNames}.\n   *\n   * @example\n   * new Super({ a: 1, b: 2 }).define('c', { value: 3 }).$; // ['a', 'b', 'c']\n   */\n  propertyNames() {\n    const object = this.$;\n\n    return D(isObject(object) ? Object.getOwnPropertyNames(object) : []);\n  }\n\n  /**\n   * @method Super#propertySymbols\n   * @public\n   * @returns {DWrap} D-Wrap of the names array.\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertySymbols\n   * @descriptor Synonym for\n   * [Object.getOwnPropertySymbols]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/getOwnPropertySymbols}.\n   *\n   * @example\n   * new Super({ [Symbol('foo')]: 1 }).define(Symbol('bar'), { value: 2 }).$; // [Symbol('foo'), Symbol('bar')]\n   */\n  propertySymbols() {\n    const object = this.$;\n\n    return D(isObject(object) ? Object.getOwnPropertySymbols(object) : []);\n  }\n\n  /**\n   * @method Super#proto\n   * @public\n   * @param {*} [proto] - If it's present it's set as a prototype to the object.\n   * @returns {DWrap} In getter mode returns wrap of the prototype and in setter mode returns this.\n   * @description Synonym for both\n   * [Object.getPrototypeOf]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/getPrototypeOf}\n   * and\n   * [Object.setPrototypeOf]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Object/setPrototypeOf}.\n   */\n  proto(proto) {\n    const object = this.$;\n    const isContextObject = !isNullOrUndefined(object);\n\n    if (arguments.length) {\n      if (isContextObject && (isObject(proto) || isNull(proto))) {\n        Object.setPrototypeOf(object, proto);\n      }\n\n      return this;\n    }\n\n    return isContextObject ? new Super(Object.getPrototypeOf(object)) : new Super();\n  }\n\n  /**\n   * @method Super#reduce\n   * @public\n   * @param {ReduceCallback} callback - Called on each iteration.\n   * Return value is passed to the next callback call.\n   * @param {*} [IV = <first value>|undefined] - Initial value.\n   * @returns {*} Modified IV.\n   * @description Returns modified IV. If the second argument is not present first value in the object is taken\n   *\n   * @example\n   * new Super({ a: 1, b: 2, c: 3 }).reduce((sum, value) => sum + value * value, 0); // 14\n   */\n  reduce(callback, IV) {\n    validate([callback], ['function'], 'Super#reduce');\n\n    const object = this.$;\n\n    let startKey;\n\n    if (arguments.length === 1) {\n      iterate(object, (value, key) => {\n        startKey = key;\n        IV = value;\n\n        return true;\n      });\n    }\n\n    iterate(object, (value, key) => {\n      if (key !== startKey) {\n        IV = callback(IV, value, key, object);\n      }\n    });\n\n    return IV;\n  }\n\n  /**\n   * @method Super#set\n   * @public\n   * @param {String|Object.<String, Function>} property - Either a string of a property or a setters object.\n   * @param {Function} [setter] - If a property parameter is a string this has to be a setter function.\n   * @returns {DWrap} Returns this.\n   * @description Method for defining setters.\n   *\n   * @example\n   * const object = new Super({})\n   *   .get('public', function () {\n   *     return this._private;\n   *   })\n   *   .set('public', function (value) {\n   *     if (typeof value === 'number') {\n   *       this._private = value;\n   *     }\n   *   });\n   * object.prop('public', '1').$; // { public: undefined }\n   * object.prop('public', 1).$;   // { public: 1, _private: 1 }\n   *\n   * new Super({}).set({\n   *   public(value) {\n   *     if (typeof value === 'number') {\n   *       this._private = value;\n   *     }\n   *   }\n   * });\n   */\n  set(property, setter) {\n    if (arguments.length >= 2) {\n      property = { [property]: setter };\n    }\n\n    const object = this.$;\n\n    iterate(isObject(object) && new Super(property).$, (setter, property) => {\n      Object.defineProperty(object, property, { set: setter });\n    });\n\n    return this;\n  }\n\n  /**\n   * @method Super#some\n   * @public\n   * @param {IterationCallback} [callback = Boolean] - Called on each iteration.\n   * If returns truthy iteration stops and if falsey it continues.\n   * @returns {Boolean} If all the callback calls returned truthy value.\n   * @description Returns true if some of the callback calls returned truthy value. Otherwise false.\n   *\n   * @example\n   * new Super({ a: 1, b: 2, c: 3 }).some((value) => value > 4); // false\n   * new Super({}).some(() => true);                             // false\n   */\n  some(callback = Boolean) {\n    validate([callback], ['function'], 'Super#some');\n\n    return iterate(this.$, (value, key, object) => {\n      if (callback(value, key, object)) {\n        return true;\n      }\n    }) || false;\n  }\n\n  /**\n   * @method Super#strictEquals\n   * @public\n   * @param {*} [object] - Object to compare.\n   * @returns {Boolean} If the objects are equal or not.\n   * @description Returns true if objects are equal using '===' operator and false if not.\n   * NaNs are considered to be strict equal.\n   *\n   * @example\n   * new Super(3).strictEquals('3');   // false\n   * new Super(NaN).strictEquals(NaN); // true\n   */\n  strictEquals(object) {\n    const o = this.$;\n\n    object = new Super(object).$;\n\n    return o === object || (isNaN(o) && isNaN(object));\n  }\n\n  /**\n   * @method Super#sum\n   * @public\n   * @param {IterationCallback} [callback = null] - Called on each iteration.\n   * @returns {Number} Sum.\n   * @description Type of {@link Super#reduce}.\n   * If the callback is present it's used for summing. If not the value is used.\n   *\n   * @example\n   * new Super({ a: 1, b: 2, c: 3 }).sum();                         // 6\n   * new Super({ a: 1, b: 2, c: 3 }).sum((value) => value * value); // 14\n   */\n  sum(callback = null) {\n    validate([callback], ['function||!'], 'Super#sum');\n\n    return this.reduce((sum, value, key, object) => (\n      sum + Number(callback ? callback(value, key, object) : value)\n    ), 0);\n  }\n\n  toJSON() {\n    return this.$;\n  }\n\n  /**\n   * @member Super#toStringTag\n   * @type {String}\n   * @public\n   * @readonly\n   * @description Returns toString tag of the object.\n   *\n   * @example\n   * new Super({}).toStringTag; // 'Object'\n   * new Super([]).toStringTag; // 'Array'\n   * new Super(1).toStringTag;  // 'Number'\n   */\n  get toStringTag() {\n    return toStringTag(this.$);\n  }\n\n  /**\n   * @member Super#type\n   * @type {String}\n   * @public\n   * @readonly\n   * @description Synonym for\n   * [\"typeof\" operator]{@link https://developer.mozilla.org/ru/docs/Web/JavaScript/Reference/Operators/instanceof}..\n   *\n   * @example\n   * new Super({}).type;   // 'object'\n   * new Super(1).type;    // 'number'\n   * new Super('1').type;  // 'string'\n   * new Super(true).type; // 'boolean'\n   */\n  get type() {\n    return typeof this.$;\n  }\n\n  /**\n   * @method Super#value\n   * @public\n   * @param {String|Object.<String, *>} property - Either a string of a property or a values object.\n   * @param {Object.<String, *>} [value] - If a property parameter is a string this has to be a value to be set.\n   * @returns {DWrap} Returns this.\n   * @description Method for defining non-enumerable, non-writable, non-configurable values.\n   * Synonym for object.define(property, { value: value }).\n   *\n   * @example\n   * new Super({}).value('a', 1).$; // { a: 1 }\n   * new Super({}).value({\n   *   a: 1\n   * }).$;                          // { a: 1 }\n   */\n  value(property, value) {\n    if (arguments.length >= 2) {\n      property = { [property]: value };\n    }\n\n    const object = this.$;\n\n    iterate(isObject(object) && new Super(property).$, (value, property) => {\n      Object.defineProperty(object, property, { value });\n    });\n\n    return this;\n  }\n\n  /**\n   * @method Super#values\n   * @public\n   * @returns {DWrap} A wrap of the values array.\n   * @description Returns D-Wrap of the values array.\n   *\n   * @example\n   * new Super({ a: 1, b: 2, c: 3 }).values().$; // [1, 2, 3]\n   * new Super(null).values().$;                 // []\n   */\n  values() {\n    const array = [];\n\n    iterate(this.$, (value) => {\n      array.push(value);\n    });\n\n    return D(array);\n  }\n\n  /**\n   * @method Super#word\n   * @public\n   * @param {IterationCallback} callback - Called on each iteration.\n   * @returns {String} Concatenated string.\n   * @description Type of {@link Super#reduce}.\n   * If the callback is present it's used for concatenating. If not the value is used.\n   *\n   * @example\n   * new Super({ a: 1, b: 2, c: 3 }).word();                         // '123'\n   * new Super({ a: 1, b: 2, c: 3 }).word((value) => value + value); // '112233'\n   */\n  word(callback = null) {\n    validate([callback], ['function||!'], 'Super#word');\n\n    return this.reduce((word, value, key, object) => (\n      word + String(callback ? callback(value, key, object) : value)\n    ), '');\n  }\n}\n\ndefineProperties(Super.prototype, {\n  [Symbol.toStringTag]: 'Super'\n});\n\n/**\n * @function deepAssign\n * @private\n * @param {*} target - Object to assign properties to.\n * @param {*} object - Object to assign properties from.\n * @returns {void}\n */\nfunction deepAssign(target, object) {\n  iterate(object, (value, key) => {\n    if (isPrimitive(value)) {\n      target[key] = value;\n\n      return;\n    }\n\n    const hasProperty = {}.hasOwnProperty.call(target, key);\n\n    if (isPrimitive(target[key]) || !hasProperty) {\n      target[key] = deepClone(value);\n\n      return;\n    }\n\n    deepAssign(target[key], value);\n  });\n}\n\n/**\n * @function deepClone\n * @private\n * @param {*} object - Object to clone.\n * @description Does the deep cloning.\n */\nfunction deepClone(object) {\n  const clone = cloneSwitcher(object, [object, true]);\n\n  if (clone !== object) {\n    iterate(object, (value, key) => {\n      clone[key] = deepClone(value);\n    });\n  }\n\n  return clone;\n}\n\n/**\n * @function deepEqual\n * @private\n * @param {*} o1 - First object to compare.\n * @param {*} o2 - Second object to compare.\n * @param {Boolean} strict - If comparison should be strict or not.\n * @returns {Boolean} - If the object are deep equal or not.\n */\nfunction deepEqual(o1, o2, strict) {\n  if (o1 === o2) {\n    return true;\n  }\n\n  if (isNaN(o1) && isNaN(o2) && isPrimitive(o1) && isPrimitive(o2)) {\n    return true;\n  }\n\n  if (isNaN(o1) || isNaN(o2)) {\n    return false;\n  }\n\n  if (isPrimitive(o1) || isPrimitive(o2)) {\n    return strict ? o1 === o2 : o1 == o2;\n  }\n\n  if (isDate(o1) && isDate(o2)) {\n    return o1.getTime() === o2.getTime();\n  }\n\n  if (isDate(o1) || isDate(o2)) {\n    return false;\n  }\n\n  if (isRegExp(o1) && isRegExp(o2)) {\n    return o1.source === o2.source &&\n      o1.flags === o2.flags &&\n      o1.lastIndex === o2.lastIndex;\n  }\n\n  if (isRegExp(o1) || isRegExp(o2)) {\n    return false;\n  }\n\n  if ((!isPlainObject(o1) && !isArray(o1)) || (!isPlainObject(o2) && !isArray(o2))) {\n    return false;\n  }\n\n  const p1 = Object.getPrototypeOf(o1);\n  const p2 = Object.getPrototypeOf(o1);\n\n  if (Object.keys(o1).length !== Object.keys(o2).length) {\n    return false;\n  }\n\n  if (p1 && p2 && (toStringTag(p1.constructor) !== toStringTag(p2.constructor))) {\n    return false;\n  }\n\n  return iterate(o1, (value, key) => {\n    if (!(key in o2) || !deepEqual(value, o2[key], strict)) {\n      return false;\n    }\n  }) !== false;\n}\n\n/**\n * @function deepEvery\n * @private\n * @param {*} object - Object to iterate over.\n * @param {DeepIterationCallback} callback - Callback that is called on every element.\n * If returns truthy the iteration goes on and if not it stops.\n * @param {Number} n - Depth of iteration.\n * @param {Tree} tree - Tree of { key, value } objects of iteration.\n * @returns {Boolean} - If all the callback calls returned truthy value.\n */\nfunction deepEvery(object, callback, n, tree) {\n  const end = n === 1;\n\n  return iterate(object, (value, key, object) => {\n    const newTree = [{ key, value }].concat(tree);\n\n    if (\n      end || isPrimitive(value)\n        ? !callback(value, key, object, newTree)\n        : !deepEvery(value, callback, n - 1, newTree)\n    ) {\n      return false;\n    }\n  }) !== false;\n}\n\n/**\n * @function deepFilter\n * @private\n * @param {*} object - Object to iterate over.\n * @param {DeepIterationCallback} callback - Callback that is called on every element.\n * If returns truthy the element is included in the output and if not it's excluded.\n * @param {Number} n - Depth of iteration.\n * @param {Tree} tree - Tree of { key, value } objects of iteration.\n * @returns {*} Filtered object.\n */\nfunction deepFilter(object, callback, n, tree) {\n  const array = isArrayLike(object);\n  const nul = isNullOrUndefined(object);\n  const o = array ? [] : nul ? object : {};\n  const end = n === 1;\n\n  iterate(object, (value, key, object) => {\n    const newTree = [{ key, value }].concat(tree);\n\n    if ((end || isPrimitive(value)) && callback(value, key, object, newTree)) {\n      if (array) {\n        o.push(value);\n      } else {\n        o[key] = value;\n      }\n\n      return;\n    }\n\n    if (!end) {\n      const filtered = deepFilter(value, callback, n - 1, newTree);\n\n      if (filtered) {\n        if (array) {\n          o.push(filtered);\n        } else {\n          o[key] = filtered;\n        }\n      }\n    }\n  });\n\n  if (array) {\n    return o.length ? o : undefined;\n  }\n\n  if (!nul) {\n    return Object.keys(o).length ? o : undefined;\n  }\n\n  return o;\n}\n\n/**\n * @function deepFind\n * @private\n * @param {*} object - Object to iterate over.\n * @param {DeepIterationCallback} callback - Callback that is called on every element.\n * If returns truthy the iteration stops and if not it continues.\n * @param {Number} n - Depth of iteration.\n * @param {Tree} tree - Tree of { key, value } objects of iteration.\n * @returns {Tree|null} - If found the whole tree is returned and if not it's null what's returned.\n */\nfunction deepFind(object, callback, n, tree) {\n  const end = n === 1;\n\n  return iterate(object, (value, key, object) => {\n    const newTree = [{ key, value }].concat(tree);\n\n    if (end || isPrimitive(value)) {\n      if (callback(value, key, object, newTree)) {\n        return newTree;\n      }\n\n      return;\n    }\n\n    const result = deepFind(value, callback, n - 1, newTree);\n\n    if (result) {\n      return result;\n    }\n  }) || null;\n}\n\n/**\n * @function deepFreeze\n * @private\n * @param {*} object - Object to freeze.\n * @returns {void}\n */\nfunction deepFreeze(object) {\n  Object.freeze(object);\n  iterate(object, deepFreeze);\n}\n\n/**\n * @function deepForEach\n * @private\n * @param {*} object - Object to iterate over.\n * @param {DeepIterationCallback} callback - Callback that is called on every element.\n * @param {Number} n - Depth of iteration.\n * @param {Tree} tree - Tree of { key, value } objects of iteration.\n * @returns {void}\n */\nfunction deepForEach(object, callback, n, tree) {\n  const end = n === 1;\n\n  iterate(object, (value, key, object) => {\n    const newTree = [{ key, value }].concat(tree);\n\n    if (end || isPrimitive(value)) {\n      callback(value, key, object, newTree);\n    } else {\n      deepForEach(value, callback, n - 1, newTree);\n    }\n  });\n}\n\n/**\n * @function deepMap\n * @private\n * @param {*} object - Object to iterate over.\n * @param {DeepIterationCallback} callback - Callback that is called on every element.\n * Returned value is used to create to new object.\n * @param {Number} n - Depth of iteration.\n * @param {Tree} tree - Tree of { key, value } objects of iteration.\n * @returns {*} New object.\n */\nfunction deepMap(object, callback, n, tree) {\n  const o = isArrayLike(object) ? [] : isNullOrUndefined(object) ? object : {};\n  const end = n === 1;\n\n  iterate(object, (value, key, object) => {\n    const newTree = [{ key, value }].concat(tree);\n\n    o[key] = end || isPrimitive(value)\n      ? callback(value, key, object, newTree)\n      : deepMap(value, callback, n - 1, newTree);\n  });\n\n  return o;\n}\n\n/**\n * @function deepReduce\n * @private\n * @param {*} object - Object to iterate over.\n * @param {DeepReduceCallback} callback - Callback that is called on every element.\n * Returned value is used to create to new object.\n * @param {Number} n - Depth of iteration.\n * @param {Boolean} start - If callback was called already or not.\n * @param {{ IV: * }|undefined} IV - If callback was called already or not.\n * @param {Tree} tree - Tree of { key, value } objects of iteration.\n * @returns {{ IV: * }} Transformed IV.\n */\nfunction deepReduce(object, callback, n, start, IV, tree) {\n  const end = n === 1;\n\n  iterate(object, (value, key, object) => {\n    if (!IV && (end || isPrimitive(value)) && !start) {\n      IV = { IV: value };\n      start = true;\n\n      return;\n    }\n\n    const newTree = [{ key, value }].concat(tree);\n\n    IV = end || isPrimitive(value)\n      ? { IV: callback(IV.IV, value, key, object, newTree) }\n      : deepReduce(value, callback, n - 1, start, IV, newTree);\n  });\n\n  return IV;\n}\n\n/**\n * @function deepSome\n * @private\n * @param {*} object - Object to iterate over.\n * @param {DeepIterationCallback} callback - Callback that is called on every element.\n * If returns truthy the iteration stops and if not it continues.\n * @param {Number} n - Depth of iteration.\n * @param {Tree} tree - Tree of { key, value } objects of iteration.\n * @returns {Boolean} - If some of the callback calls returned truthy value.\n */\nfunction deepSome(object, callback, n, tree) {\n  const end = n === 1;\n\n  return iterate(object, (value, key, object) => {\n    const newTree = [{ key, value }].concat(tree);\n\n    if (\n      end || isPrimitive(value)\n        ? callback(value, key, object, newTree)\n        : deepSome(value, callback, n - 1, newTree)\n    ) {\n      return true;\n    }\n  }) || false;\n}\n\nconstructors[0].push({\n  check: () => true,\n  cls: Super\n});\n\nexport default Super;\n","/**\r\n * @module Arr\r\n * @private\r\n * @mixin\r\n * @description Exports Arr class.\r\n */\r\n\r\nimport Super from './Super';\r\nimport constructors from './constants/constructors';\r\nimport {\r\n  isArrayLike, isNaN, isNumber, isString,\r\n  toArray, validate, iterate as iterator, Symbol, defineProperties\r\n} from './helpers';\r\n\r\n/**\r\n * @typedef {Array|*} ArrayLike\r\n * @public\r\n * @description Array-like type.\r\n */\r\n\r\n/**\r\n * @callback ArrayCallback\r\n * @public\r\n * @param {Number} i - Iteration index.\r\n */\r\n\r\n/**\r\n * @callback IterateCallback\r\n * @public\r\n * @param {Number} i - Iteration index.\r\n */\r\n\r\n/**\r\n * @callback CompareFunction\r\n * @public\r\n * @param {*} x - First value to be compared.\r\n * @param {*} y - Second value to be compared.\r\n */\r\n\r\n/**\r\n * @class Arr\r\n * @extends Super\r\n * @public\r\n * @param {Array} [array = []] - An array to wrap.\r\n * @returns {Arr} Instance of Arr.\r\n * @description Wrap of an array.\r\n *\r\n * @example\r\n * new Arr([1, 2]);\r\n */\r\nexport class Arr extends Super {\r\n  constructor(array = []) {\r\n    super(toArray(array));\r\n\r\n    /**\r\n     * @member Arr#$\r\n     * @type {Array}\r\n     * @public\r\n     * @description Made array.\r\n     */\r\n  }\r\n\r\n  /**\r\n   * @method Arr#concat\r\n   * @public\r\n   * @param {...(Array|*)} values - Arrays or any other values to concat the array with.\r\n   * @returns {Arr} New instance of Arr.\r\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/concat\r\n   * @description Synonym for\r\n   * [Array#concat]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/concat}.\r\n   */\r\n  concat(...values) {\r\n    const array = toArray(this.$, true);\r\n\r\n    iterator(arguments, (value) => {\r\n      value = new Super(value).$;\r\n\r\n      if (isArrayLike(value) && !isString(value)) {\r\n        iterator(value, (value) => {\r\n          array.push(value);\r\n        });\r\n\r\n        return;\r\n      }\r\n\r\n      array.push(value);\r\n    });\r\n\r\n    return new this.constructor(array);\r\n  }\r\n\r\n  /**\r\n   * @member Arr#first\r\n   * @type {*}\r\n   * @public\r\n   * @readonly\r\n   * @description Returns the first element of the array.\r\n   *\r\n   * @example\r\n   * new Arr([1, 2, 3]).first; // 1\r\n   * new Arr([]).first;        // undefined\r\n   */\r\n  get first() {\r\n    return this.$[0];\r\n  }\r\n\r\n  /**\r\n   * @method Arr#indexOf\r\n   * @public\r\n   * @param {*} value - Value to search.\r\n   * @returns {Number} Index of the argument.\r\n   * @description Almost the same as {@link Super#keyOf}. The difference is that if the value is not found\r\n   * -1 returned instead of null and if found Number(key) returned.\r\n   *\r\n   * @example\r\n   * new Arr([1, 2, 3]).indexOf(1);       // 0\r\n   * new Arr([1, 2, 3]).indexOf('1');     // 0\r\n   * new Arr([1, 2, 3]).indexOf(3);       // -1\r\n   * new Arr([1, 2, NaN]).indexOf(NaN);   // 2\r\n   */\r\n  indexOf(value) {\r\n    const key = this.keyOf(value);\r\n\r\n    return key === null ? -1 : Number(key);\r\n  }\r\n\r\n  /**\r\n   * @method Arr#indexOfStrict\r\n   * @public\r\n   * @param {*} value - Value to search.\r\n   * @returns {Number} Index of the argument.\r\n   * @description Almost the same as {@link Super#keyOfStrict}. The difference is that if the value is not found\r\n   * -1 returned instead of null and if found Number(key) returned.\r\n   *\r\n   * @example\r\n   * new Arr([1, 2, 3]).indexOfStrict(1);       // 0\r\n   * new Arr([1, 2, 3]).indexOfStrict('1');     // -1\r\n   * new Arr([1, 2, 3]).indexOfStrict(3);       // -1\r\n   * new Arr([1, 2, NaN]).indexOfStrict(NaN);   // 2\r\n   */\r\n  indexOfStrict(value) {\r\n    const key = this.keyOfStrict(value);\r\n\r\n    return key === null ? -1 : Number(key);\r\n  }\r\n\r\n  /**\r\n   * @method Arr#join\r\n   * @public\r\n   * @param {String} [separator = ','] - See the link.\r\n   * @returns {String} - String of joined array.\r\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/join\r\n   * @description Synonym for\r\n   * [Array#join]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/join}.\r\n   */\r\n  join(separator) {\r\n    return this.$.join.apply(this.$, arguments);\r\n  }\r\n\r\n  /**\r\n   * @member Arr#last\r\n   * @type {*}\r\n   * @public\r\n   * @readonly\r\n   * @description The last element of the array.\r\n   *\r\n   * @example\r\n   * new Arr([1, 2, 3]).last; // 3\r\n   * new Arr([]).last;        // undefined\r\n   */\r\n  get last() {\r\n    const array = this.$;\r\n\r\n    return array[array.length - 1];\r\n  }\r\n\r\n  /**\r\n   * @member Arr#length\r\n   * @type {Number}\r\n   * @public\r\n   * @readonly\r\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/length\r\n   * @description Synonym for\r\n   * [Array#length]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/length}.\r\n   */\r\n  get length() {\r\n    return this.$.length;\r\n  }\r\n\r\n  /**\r\n   * @method Arr#pop\r\n   * @public\r\n   * @returns {*} Returns deleted element.\r\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/pop\r\n   * @description Synonym for\r\n   * [Array#pop]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/pop}.\r\n   */\r\n  pop() {\r\n    return this.$.pop();\r\n  }\r\n\r\n  /**\r\n   * @method Arr#push\r\n   * @public\r\n   * @param {...*} values See the link.\r\n   * @this {Arr}\r\n   * @returns {Arr} Returns this.\r\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/push\r\n   * @description Synonym for\r\n   * [Array#push]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/push}\r\n   * besides returning this.\r\n   */\r\n  push(...values) {\r\n    this.$.push.apply(this.$, arguments);\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @method Arr#reverse\r\n   * @public\r\n   * @returns {Arr} A wrap of the reversed array.\r\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/reverse\r\n   * @description Synonym for\r\n   * [Array#reverse]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/reverse}.\r\n   */\r\n  reverse() {\r\n    this.$.reverse();\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @method Arr#shift\r\n   * @public\r\n   * @returns {*} Returns deleted element.\r\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/shift\r\n   * @description Synonym for\r\n   * [Array#shift]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/shift}.\r\n   */\r\n  shift() {\r\n    return this.$.shift();\r\n  }\r\n\r\n  /**\r\n   * @method Arr#shuffle\r\n   * @public\r\n   * @returns {Arr} Returns this.\r\n   * @description Method for shuffling.\r\n   *\r\n   * @example\r\n   * new Arr([1, 2, 3, 4]).shuffle().$; // [4, 2, 3, 1]\r\n   * new Arr([1, 2, 3, 4]).shuffle().$; // [1, 3, 4, 2]\r\n   */\r\n  shuffle() {\r\n    const length = this.$.length;\r\n\r\n    return this.forEach((value, index, array) => {\r\n      const randomIndex = index + Math.floor((length - index) * Math.random());\r\n\r\n      array[index] = array[randomIndex];\r\n      array[randomIndex] = value;\r\n    });\r\n  }\r\n\r\n  /**\r\n   * @method Arr#slice\r\n   * @public\r\n   * @param {Number} [begin = 0] - See the link.\r\n   * @param {Number} [end = array.length] - See the link.\r\n   * @returns {Arr} A wrap of a sliced array.\r\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/slice\r\n   * @description Synonym for\r\n   * [Array#slice]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/slice}.\r\n   */\r\n  slice(begin, end) {\r\n    return new this.constructor(this.$.slice.apply(this.$, arguments));\r\n  }\r\n\r\n  /**\r\n   * @method Arr#sort\r\n   * @public\r\n   * @param {CompareFunction} [compareFunction] - See the link.\r\n   * @returns {Arr} Returns this.\r\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/sort\r\n   * @description Synonym for\r\n   * [Array#sort]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/sort}.\r\n   */\r\n  sort(compareFunction) {\r\n    validate([compareFunction], ['function||!'], 'Arr#sort');\r\n\r\n    this.$.sort(compareFunction);\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @method Arr#sortAsc\r\n   * @public\r\n   * @returns {Arr} Returns this.\r\n   * @description Method for ascending sorting. Puts non-numbers first, then NaNs, then sorted values.\r\n   *\r\n   * @example\r\n   * new Arr([NaN, 1, -7, '100', 5]).sortAsc().$; // ['100', NaN, -7, 1, 5]\r\n   */\r\n  sortAsc() {\r\n    return this.sort(asc);\r\n  }\r\n\r\n  /**\r\n   * @method Arr#sortDesc\r\n   * @public\r\n   * @returns {Arr} Returns this.\r\n   * @description Method for descending sorting. Puts sorted values first, then NaNs, then non-numbers.\r\n   *\r\n   * @example\r\n   * new Arr([NaN, 1, -7, '100', 5]).sortDesc().$; // [5, 1, -7, NaN, '100']\r\n   */\r\n  sortDesc() {\r\n    return this.sort((y, x) => asc(x, y));\r\n  }\r\n\r\n  /**\r\n   * @method Arr#splice\r\n   * @public\r\n   * @param {Number} [start] - See the link.\r\n   * @param {Number} [deleteCount] - See the link.\r\n   * @param {...*} [items] - See the link.\r\n   * @returns {Arr} A wrap of return value of #splice call.\r\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/splice\r\n   * @description Synonym for\r\n   * [Array#splice]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/splice}.\r\n   */\r\n  splice(start, deleteCount, ...items) {\r\n    return new Arr(this.$.splice.apply(this.$, arguments));\r\n  }\r\n\r\n  /**\r\n   * @method Arr#string\r\n   * @public\r\n   * @returns {String} Concatenated array.\r\n   * @description Synonym for array.join('').\r\n   *\r\n   * @example\r\n   * new Arr([1, 2, 3]).string(); // '123'\r\n   */\r\n  string() {\r\n    return this.join('');\r\n  }\r\n\r\n  /**\r\n   * @method Arr#unshift\r\n   * @public\r\n   * @param {...*} [values] - See the link.\r\n   * @returns {Arr} Returns this.\r\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/unshift\r\n   * @description Synonym for\r\n   * [Array#unshift]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Array/unshift}\r\n   * besides returning this.\r\n   */\r\n  unshift(...values) {\r\n    this.$.unshift.apply(this.$, arguments);\r\n\r\n    return this;\r\n  }\r\n}\r\n\r\ndefineProperties(Arr.prototype, {\r\n  [Symbol.toStringTag]: 'Arr'\r\n});\r\n\r\n/**\r\n * @function asc\r\n * @private\r\n * @param {*} x - First value to be compared.\r\n * @param {*} y - Second value to be compared.\r\n * @returns {Number} Where to put the first element: before or after.\r\n */\r\nfunction asc(x, y) {\r\n  if (!isNumber(x) && !isNumber(y)) {\r\n    return 0;\r\n  }\r\n\r\n  if (!isNumber(x)) {\r\n    return -1;\r\n  }\r\n\r\n  if (!isNumber(y)) {\r\n    return 1;\r\n  }\r\n\r\n  if (isNaN(x) && isNaN(y)) {\r\n    return 0;\r\n  }\r\n\r\n  if (isNaN(x)) {\r\n    return -1;\r\n  }\r\n\r\n  if (isNaN(y)) {\r\n    return 1;\r\n  }\r\n\r\n  return x - y;\r\n}\r\n\r\nconstructors[1].push({\r\n  check: isArrayLike,\r\n  cls: Arr\r\n});\r\n\r\n/**\r\n * @function array\r\n * @public\r\n * @param {Number} number - Length of the array.\r\n * @param {ArrayCallback} [callback] - If it's present it has to be a function\r\n * that returns the element that is pushed to the new array.\r\n * @returns {Arr} New instance of Arr.\r\n * @description Method for creating new array from the length using optional callback.\r\n *\r\n * @example\r\n * array(3).$;               // [0, 1, 2]\r\n * array(3, (i) => i * 2).$; // [0, 2, 4]\r\n */\r\nexport function array(number, callback) {\r\n  validate([number, callback], [['intLike', '>=0'], 'function||!'], 'array');\r\n\r\n  const array = [];\r\n\r\n  for (let i = 0; i < number; i++) {\r\n    array.push(callback ? callback(i) : i);\r\n  }\r\n\r\n  return new Arr(array);\r\n}\r\n\r\n/**\r\n * @function iterate\r\n * @public\r\n * @param {Number} number - Number of iterations.\r\n * @param {IterateCallback} callback - Callback that is called on each iteration with the iteration index.\r\n * @returns {void}\r\n * @description Method for replacing for (...) construction.\r\n *\r\n * @example\r\n * iterate();\r\n */\r\nexport function iterate(number, callback) {\r\n  validate([number, callback], [['intLike', '>=0'], 'function'], 'iterate');\r\n\r\n  for (let i = 0; i < number; i++) {\r\n    callback(i);\r\n  }\r\n}\r\n\r\nexport default Arr;\r\n","/**\n * @module BlobObject\n * @private\n * @mixin\n * @description Exports BlobObject class.\n */\n\nimport Super from './Super';\nimport Promise from './Promise';\nimport constructors from './constants/constructors';\nimport {\n  isArray, isFunction,\n  toStringTag, Symbol, defineProperties\n} from './helpers';\n\n/**\n * @typedef {{ buffer: String, binary: String, dataURL: String, text: String }} methods\n * @private\n * @description List of read blob methods.\n */\nconst methods = {\n  buffer: 'ArrayBuffer',\n  binary: 'BinaryString',\n  dataURL: 'DataURL',\n  text: 'Text'\n};\nconst { URL } = global;\n\n/**\n * @typedef {('buffer'|'binary'|'dataURL'|'text')} ReadBlobMethod\n * @public\n * @description Enum type of read blob methods.\n */\n\n/**\n * @typedef {ArrayBuffer|ArrayBufferView|Blob|String} BlobParts\n * @public\n * @description Allowed blob parts.\n */\n\n/**\n * @callback ReaderEventListener\n * @public\n * @param {Event} e - Fired event.\n * @param {FileReader} reader - FileReader.\n */\n\n/**\n * @class BlobObject\n * @extends Super\n * @public\n * @param {Blob} blob - Blob to wrap.\n * @returns {BlobObject} Instance of BlobObject.\n * @description Wrap of a blob.\n *\n * @example\n * new BlobObject(new Blob(['{\"foo\":\"bar\"}'], { type: 'application/json' }));\n */\nexport class BlobObject extends Super {\n  /**\n   * @member BlobObject#$\n   * @type {Blob}\n   * @public\n   * @description Original Blob.\n   */\n\n  /**\n   * @member {String} BlobObject#dataURL\n   * @type {String}\n   * @public\n   * @readonly\n   * @description Returns dataURL representation of the blob.\n   */\n  get dataURL() {\n    return URL.createObjectURL(this.$);\n  }\n\n  /**\n   * @method BlobObject#readAs\n   * @public\n   * @param {ReadBlobMethod} method - Method that is used for reading from blob.\n   * @param {ReaderEventListener} [progress] - Progress listener.\n   * @returns {Promise} Promise that could be aborted.\n   * @description Method for reading from blobs.\n   *\n   * @example\n   * new BlobObject(new Blob(['{\"foo\":\"bar\"}'], { type: 'application/json' }))\n   *   .readAs('text')\n   *   .then((value) => {\n   *     console.log(value); // '{\"foo\":\"bar\"}'\n   *   });\n   */\n  readAs(method, progress) {\n    if (!methods[method]) {\n      throw new Error('1st argument must be one of following values: buffer, binary, dataURL, text');\n    }\n\n    let reader = new FileReader();\n    let toReject;\n\n    if (isFunction(progress)) {\n      reader.onprogress = function (e) {\n        progress(e, this);\n      };\n    }\n\n    const promise = new Promise((resolve, reject) => {\n      toReject = reject;\n\n      reader.onerror = ({ target }) => {\n        if (reader) {\n          reject(target.error);\n        }\n      };\n\n      reader.onload = ({ target }) => {\n        resolve(target.result);\n      };\n\n      reader[`readAs${ methods[method] }`](this.$);\n    });\n\n    promise.abort = function abort() {\n      toReject(new Error('Reading was aborted'));\n\n      reader.abort();\n\n      reader = null;\n\n      return this;\n    };\n\n    return promise;\n  }\n\n  /**\n   * @method BlobObject#saveAs\n   * @public\n   * @param {String} [name] - Name that is used for saving file.\n   * @returns {BlobObject} Returns this.\n   * @description Method for saving blobs.\n   *\n   * @example\n   * new BlobObject(new Blob(['{\"foo\":\"bar\"}'], { type: 'application/json' }))\n   *   .saveAs('blob.json');\n   */\n  saveAs(name = 'download') {\n    const anchor = document.createElement('a');\n\n    anchor.href = this.dataURL;\n    anchor.setAttribute('download', name);\n    anchor.click();\n\n    return this;\n  }\n}\n\ndefineProperties(BlobObject.prototype, {\n  [Symbol.toStringTag]: 'BlobObject'\n});\n\nconstructors[1].push({\n  check: (blob) => /^(Blob|File)$/.test(toStringTag(blob)),\n  cls: BlobObject\n});\n\n/**\n * @function blob\n * @public\n * @param {(BlobParts[]|BlobParts)} blobParts - Blob parts that are passed to\n * [Blob]{@link https://developer.mozilla.org/en-US/docs/Web/API/Blob/Blob} constructor.\n * @param {Object} [options] - Options that are passed to\n * [Blob]{@link https://developer.mozilla.org/en-US/docs/Web/API/Blob/Blob} constructor.\n * @returns {BlobObject} New instance of BlobObject.\n * @description Function for creating blobs not involving BlobObject and Blob constructors.\n */\nexport function blob(blobParts, options = {}) {\n  if (!isArray(blobParts)) {\n    blobParts = [blobParts];\n  }\n\n  return new BlobObject(new Blob(blobParts, options));\n}\n\nexport default BlobObject;\n","/**\n * @module Func\n * @private\n * @mixin\n * @description Exports Func class.\n */\n\nimport Super from './Super';\nimport Promise from './Promise';\nimport constructors from './constants/constructors';\nimport { isFunction, validate, toArray, Symbol, defineProperties, iterate } from './helpers';\n\n/**\n * @callback BeforeMiddleware\n * @param {Array} args - Previous arguments.\n * @param {Func} func - This function.\n * @returns {Array} - New arguments.\n */\n\n/**\n * @callback AfterMiddleware\n * @param {*} returnValue - Previous return value.\n * @param {Func} func - This function.\n * @returns {*} - New return value.\n */\n\n/**\n * @class Func\n * @extends Super\n * @public\n * @param {Function} [func = function () {}] - Function to wrap.\n * @returns {Func} Instance of Func.\n * @description A wrap of a function.\n *\n * @example\n * const func = new Func(Math.max);\n *\n * func(1, 4, -2, 5); // 5\n */\nexport class Func extends Super {\n  constructor(func = () => {}) {\n    super();\n\n    function proxy() {\n      if (++proxy.$$.called < proxy.$$.canBeCalled) {\n        const { before, after, sync, contextLocked } = proxy.$$;\n        let { context, args } = proxy.$$;\n        let ret;\n\n        context = contextLocked ? context : context || this;\n        args = args.concat(toArray(arguments));\n\n        if (sync) {\n          iterate(before, (middleware) => {\n            args = middleware.call(context, toArray(args), proxy);\n          });\n\n          ret = func.apply(context, toArray(args));\n\n          iterate(after, (middleware) => {\n            ret = middleware.call(context, ret, proxy);\n          });\n\n          return ret;\n        }\n\n        let promise = Promise.resolve(args);\n\n        iterate(before, (middleware) => {\n          promise = promise.then((args) => middleware.call(context, toArray(args), proxy));\n        });\n\n        promise = promise.then((args) => func.apply(context, toArray(args)));\n\n        iterate(after, (middleware) => {\n          promise = promise.then((ret) => middleware.call(context, ret, proxy));\n        });\n\n        return promise;\n      }\n    }\n\n    /**\n     * @member {Object} Func#$$\n     * @type {Object}\n     * @protected\n     * @property {Array} after - After middleware array.\n     * @property {Array} args - Locked and bound arguments.\n     * @property {Array} argsLocked - Locked arguments.\n     * @property {Array} before - Before middleware array.\n     * @property {Number} called - How many times the function was called.\n     * @property {Number} canBeCalled - How many times the function can be actually called.\n     * @property {*} context - Locked or bound context.\n     * @property {Boolean} contextLocked - Is context locked or not.\n     * @property {Boolean} sync - Is function synchronous or not.\n     * @description Config parameters.\n     */\n    Object.defineProperty(proxy, '$$', {\n      value: {\n        after: [],\n        args: [],\n        argsLocked: [],\n        before: [],\n        called: 0,\n        canBeCalled: Infinity,\n        context: null,\n        contextLocked: false,\n        sync: true\n      }\n    });\n\n    /**\n     * @member {Function} Func#$\n     * @type {Function}\n     * @public\n     * @description Original function.\n     */\n    Object.defineProperty(proxy, '$', { value: func });\n    Object.setPrototypeOf(proxy, Func.prototype);\n\n    return proxy;\n  }\n\n  /**\n   * @method Func#after\n   * @public\n   * @param {AfterMiddleware} middleware - After middleware.\n   * @param {Boolean|*} [afterAll = true] - Boolean parameter where to put middleware.\n   * Truthy parameter stands for \"to the end\" and falsey for \"to the beginning\".\n   * @returns {Func} Returns this.\n   * @description Adds after middleware.\n   *\n   * @example\n   * const func = new Func((a) => a + 1)\n   *   .after((result) => result * result);\n   *\n   * func(4);  // 25\n   * func(-4); // 9\n   */\n  after(middleware, afterAll = true) {\n    validate([middleware], ['function'], 'Func#after');\n\n    const { after } = this.$$;\n\n    if (afterAll) {\n      after.push(middleware);\n    } else {\n      after.unshift(middleware);\n    }\n\n    return this;\n  }\n\n  /**\n   * @method Func#apply\n   * @public\n   * @param {*} [context] - Context to call with.\n   * @param {(Array|Arguments)} [args] - Arguments to call with.\n   * @returns {*} Return of function call.\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Function/apply\n   * @description Synonym for\n   * [Function#apply]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Function/apply}.\n   */\n  apply(context, args) {\n    return (() => {}).apply.apply(this, arguments);\n  }\n\n  /**\n   * @method Func#async\n   * @public\n   * @param {Boolean|*} [condition] - If the function should be synchronous or not.\n   * @returns {Func} Returns this.\n   * @description If the function should be synchronous or not.\n   *\n   * @example\n   * const func = new Func((a) => a + 1).async();\n   *\n   * func(4).then((result) => {\n   *   console.log(result); // 5\n   * });\n   */\n  async(condition = true) {\n    this.$$.sync = !condition;\n\n    return this;\n  }\n\n  /**\n   * @method Func#before\n   * @public\n   * @param {BeforeMiddleware} middleware - Before middleware.\n   * @param {Boolean|*} [beforeAll = true] - Boolean parameter where to put middleware.\n   * Truthy parameter stands for \"to the beginning\" and falsey for \"to the end\".\n   * @returns {Func} Returns this.\n   * @description Adds before middleware.\n   *\n   * @example\n   * const func = new Func((a) => a + 1)\n   *   .before(([arg]) => [arg * arg]);\n   *\n   * func(4); // 17\n   * func(3); // 10\n   */\n  before(middleware, beforeAll = true) {\n    validate([middleware], ['function'], 'Func#before');\n\n    const { before } = this.$$;\n\n    if (beforeAll) {\n      before.unshift(middleware);\n    } else {\n      before.push(middleware);\n    }\n\n    return this;\n  }\n\n  /**\n   * @method Func#bind\n   * @public\n   * @param {*} context - Context to bind.\n   * @param {...(Array|Arguments|*)} args - Arguments to bind.\n   * @returns {Func} Returns this.\n   * @description Composition of {@link Func#bindContext} and {@link Func#bindArgs}.\n   *\n   * @example\n   * const func = new Func(function (a, b) {\n   *   return this.a + a + b;\n   * }).bind({ a: 2 }, 1);\n   *\n   * func(1); // 4\n   * func(3); // 6\n   */\n  bind(context, ...args) {\n    return this\n      .bindContext(context)\n      .bindArgs(args);\n  }\n\n  /**\n   * @method Func#bindArgs\n   * @public\n   * @param {(Array|Arguments)} args - Arguments to bind.\n   * @returns {Func} Returns this.\n   * @description Binds arguments in addition to already locked and bound ones.\n   *\n   * @example\n   * const func = new Func((...args) => {\n   *   let sum = 0;\n   *\n   *   for (let i = 0; i < args.length; i++) {\n   *     sum += args[i];\n   *   }\n   *\n   *   return sum;\n   * });\n   *\n   * func(1, 2, 3); // 6\n   *\n   * func.bindArgs([4]);\n   *\n   * func(1, 2, 3); // 10\n   *\n   * func.bindArgs([5]);\n   *\n   * func(1, 2, 3); // 15\n   */\n  bindArgs(args) {\n    const func = this.$$;\n\n    func.args = func.args.concat(toArray(args));\n\n    return this;\n  }\n\n  /**\n   * @method Func#bindContext\n   * @public\n   * @param {*} context - Context to bind.\n   * @returns {Func} Returns this.\n   * @description Bind new context if it's not already locked.\n   *\n   * @example\n   * const func = new Func(function () {\n   *   return this.a;\n   * }).bindContext({ a: 1 });\n   *\n   * func(); // 1\n   *\n   * func.bindContext({ a: 2 });\n   *\n   * func(); // 2\n   */\n  bindContext(context) {\n    const func = this.$$;\n\n    if (!func.contextLocked) {\n      func.context = context;\n    }\n\n    return this;\n  }\n\n  /**\n   * @method Func#call\n   * @public\n   * @param {*} [context] - Context to call with.\n   * @param {...*} [args] - Arguments to call with.\n   * @returns {*} Return of function call.\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Function/call\n   * @description Synonym for\n   * [Function#call]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Function/call}.\n   */\n  call(context, ...args) {\n    return (() => {}).call.apply(this, arguments);\n  }\n\n  /**\n   * @member {Number} Func#called\n   * @public\n   * @readonly\n   * @description Returns how many times the function was called.\n   *\n   * @example\n   * const func = new Func((a) => a + 1);\n   *\n   * func();\n   * func();\n   *\n   * func.called // 2\n   */\n  get called() {\n    return this.$$.called;\n  }\n\n  /**\n   * @method Func#canBeCalled\n   * @public\n   * @param {Number} times - Number of maximum times the function is called (middlewares are also taken for a count).\n   * @returns {Func} Returns this.\n   * @description Method for limiting call times of function.\n   *\n   * @example\n   * const func = new Func((a) => a + 1)\n   *   .canBeCalled(1);\n   *\n   * func(1); // 2\n   * func(1); // undefined\n   */\n  canBeCalled(times) {\n    this.$$.canBeCalled = times;\n\n    return this;\n  }\n\n  /**\n   * @method Func#limitArgsTo\n   * @public\n   * @param {Number} number - Number of arguments to limit to.\n   * @returns {Func} Returns this.\n   * @description Built-in before middleware for limiting number of arguments\n   * that is put to the end of before middlewares.\n   *\n   * @example\n   * const func = new Func((a, b) => [a, b]);\n   *\n   * func(1, 2); // [1, 2]\n   *\n   * func.limitArgsTo(1);\n   *\n   * func(1, 2); // [1, undefined]\n   */\n  limitArgsTo(number) {\n    return this.before((args) => args.slice(0, number), false);\n  }\n\n  /**\n   * @method Func#lock\n   * @public\n   * @param {*} context - Context to lock.\n   * @param {(Array|Arguments|*)} args - Arguments to lock.\n   * @returns {Func} Returns this.\n   * @description Composition of {@link Func#lockContext} and {@link Func#lockArgs}.\n   *\n   * @example\n   * const func = new Func(function (a, b) {\n   *   return this.a + a + b;\n   * }).lock({ a: 2 }, [1]);\n   *\n   * func(1); // 4\n   * func(3); // 6\n   */\n  lock(context, args) {\n    return this\n      .lockContext(context)\n      .lockArgs(args);\n  }\n\n  /**\n   * @method Func#lockArgs\n   * @public\n   * @param {(Array|Arguments|*)} args - Arguments to lock.\n   * @returns {Func} Returns this.\n   * @description Erases bound arguments and adds new arguments to already locked ones.\n   *\n   * @example\n   * const func = new Func((...args) => {\n   *   let sum = 0;\n   *\n   *   for (let i = 0; i < args.length; i++) {\n   *     sum += args[i];\n   *   }\n   *\n   *   return sum;\n   * });\n   *\n   * func(1, 2, 3); // 6\n   *\n   * func.lockArgs([4]);\n   *\n   * func(1, 2, 3); // 10\n   *\n   * func.bindArgs([6, 7]);\n   * func.lockArgs([5]);\n   *\n   * func(1, 2, 3); // 15\n   */\n  lockArgs(args) {\n    const func = this.$$;\n\n    func.args = func.argsLocked = func.argsLocked.concat(toArray(args));\n\n    return this;\n  }\n\n  /**\n   * @method Func#lockContext\n   * @public\n   * @param {*} context - Context to lock.\n   * @returns {Func} Returns this.\n   * @description Locks context if it's not already locked.\n   *\n   * @example\n   * const func = new Func(function () {\n   *   return this.a;\n   * }).lockContext({ a: 1 });\n   *\n   * func(); // 1\n   *\n   * func.lockContext({ a: 2 });\n   *\n   * func(); // 1\n   */\n  lockContext(context) {\n    const func = this.$$;\n\n    if (!func.contextLocked) {\n      func.context = context;\n      func.contextLocked = true;\n    }\n\n    return this;\n  }\n\n  /**\n   * @method Func#timing\n   * @public\n   * @param {String} mark - Argument that is passed to console.time() and console.timeEnd().\n   * By default name of the original function, or if it's not present, 'anonymous' is used.\n   * @returns {Func} Returns this.\n   * @description Built-in before and after middlewares for noting calling time.\n   * In case of asynchronous functions it notes time between calling function and resolving or rejecting the result.\n   *\n   * @example\n   * const func = new Func((a) => a + 1)\n   *   .timing('plus 1');\n   *\n   * func(2); // plus 1: 0.010ms\n   *\n   * const async = new Func(() => new Promise(() => {\n   *     setTimeout(resolve, 1000);\n   *   }))\n   *   .async()\n   *   .timing();\n   *\n   * async();\n   * // After 1 second...\n   * // anonymous: 1000.010ms\n   */\n  timing(mark) {\n    mark = arguments.length ? String(mark) : this.$.name || 'anonymous';\n\n    this.before((args) => {\n      console.time(mark);\n\n      return args;\n    }, false);\n\n    this.after((ret) => {\n      console.timeEnd(mark);\n\n      return ret;\n    }, false);\n\n    return this;\n  }\n\n  toString() {\n    return (() => {}).toString.call(this.$);\n  }\n\n  /**\n   * @method Func#unbind\n   * @public\n   * @returns {Func} Returns this.\n   * @description Composition of {@link Func#unbindContext} and {@link Func#unbindArgs}.\n   *\n   * @example\n   * const func = new Func(function (a) {\n   *   return this.foo + ' & ' +  a;\n   * }).bind({ foo: 2 }, 1);\n   *\n   * func(); // '2 & 1'\n   *\n   * func.unbind();\n   *\n   * func(); // 'undefined & undefined'\n   */\n  unbind() {\n    return this\n      .unbindContext()\n      .unbindArgs();\n  }\n\n  /**\n   * @method Func#unbindArgs\n   * @public\n   * @returns {Func} Returns this.\n   * @description Erases all bound arguments.\n   *\n   * @example\n   * const func = new Func((...args) => {\n   *   let sum = 0;\n   *\n   *   for (let i = 0; i < args.length; i++) {\n   *     sum += args[i];\n   *   }\n   *\n   *   return sum;\n   * }).bindArgs([4, 5]);\n   *\n   * func(1, 2, 3); // 15\n   *\n   * func.unbindArgs();\n   *\n   * func(1, 2, 3); // 6\n   */\n  unbindArgs() {\n    const func = this.$$;\n\n    func.args = func.argsLocked;\n\n    return this;\n  }\n\n  /**\n   * @method Func#unbindContext\n   * @public\n   * @returns {Func} Returns this.\n   * @description Erases context if it's not locked.\n   *\n   * @example\n   * const func = new Func(function () {\n   *   return this.foo;\n   * }).bindContext({ foo: 1 });\n   *\n   * func(); // 1\n   *\n   * func.unbindArgs();\n   *\n   * func(); // undefined\n   */\n  unbindContext() {\n    const func = this.$$;\n\n    if (!func.contextLocked) {\n      func.context = null;\n    }\n\n    return this;\n  }\n}\n\ndefineProperties(Func.prototype, {\n  [Symbol.toStringTag]: 'Func'\n});\n\nconstructors[1].push({\n  check: isFunction,\n  cls: Func\n});\n\n/**\n * @function method\n * @public\n * @param {String} method - Method to call.\n * @param {(Array|Arguments|*)} args - Arguments to call the method with.\n * @returns {Function} Function that calls stated method with given arguments.\n * @description Function that returns the function\n * that calls stated method of its first argument with given arguments.\n *\n * @example\n * [1.2345, 2.789, 3.14].map(method('toFixed', [2])); // ['1.23', '2.79', '3.14']\n */\nexport function method(method, args = []) {\n  return (x) => x[method].apply(x, toArray(args));\n}\n\n/**\n * @function noop\n * @public\n * @returns {void}\n * @description Empty function.\n */\nexport function noop() {}\n\n/**\n * @function self\n * @public\n * @returns {*} First argument itself.\n * @description Function that returns the first argument.\n *\n * @example\n * [1, 2].map(self);                     // [1, 2]\n * [1, 3, NaN, 0, 7, null].filter(self); // [1, 3, 7]\n */\nexport function self() {\n  return arguments[0];\n}\n\nexport default Func;\n","/**\n * @module Num\n * @private\n * @mixin\n * @description Exports Num class.\n */\n\nimport Super from './Super';\nimport Func from './Func';\nimport Promise from './Promise';\nimport constructors from './constants/constructors';\nimport {\n  isNumber, isFinite, toArray,\n  defineProperties, validate, Symbol\n} from './helpers';\n\nconst toRadian = Math.PI / 180;\nconst toDegree = 180 / Math.PI;\nconst ln2 = Math.LN2;\nconst ln10 = Math.LN10;\n\n/**\n * @class Num\n * @extends Super\n * @public\n * @param {Number} [number = 0] - A number to wrap.\n * @returns {Num} Instance of Num.\n * @description Wrap of a number.\n *\n * @example\n * const num = new Num(1);\n */\nexport class Num extends Super {\n  constructor(number = 0) {\n    super(number);\n\n    /**\n     * @member Num#$\n     * @type {Number}\n     * @public\n     * @description Original number.\n     */\n  }\n\n  /**\n   * @member Num#abs\n   * @type {Number}\n   * @public\n   * @readonly\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Math/abs\n   * @description Synonym for\n   * [Math.abs]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Math/abs}.\n   *\n   * @example\n   * new Num(1).abs;  // 1\n   * new Num(-1).abs; // 1\n   */\n  get abs() {\n    return Math.abs(this.$);\n  }\n\n  /**\n   * @method Num#acos\n   * @public\n   * @param {Boolean|*} [toDegrees = false] If it is truthy the return value is transformed into degrees.\n   * @returns {Number} Arccosine of the number.\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Math/acos\n   * @description Synonym for\n   * [Math.acos]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Math/acos}.\n   */\n  acos(toDegrees) {\n    return (toDegrees ? toDegree : 1) * Math.acos(this.$);\n  }\n\n  /**\n   * @member Num#acosh\n   * @type {Number}\n   * @public\n   * @readonly\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Math/acosh\n   * @description Synonym for\n   * [Math.acosh]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Math/acosh}.\n   */\n  get acosh() {\n    const number = this.$;\n\n    return Math.log(number + Math.sqrt(number * number - 1));\n  }\n\n  /**\n   * @member Num#asinh\n   * @type {Number}\n   * @public\n   * @readonly\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Math/asinh\n   * @description Synonym for\n   * [Math.asinh]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Math/asinh}.\n   */\n  get asinh() {\n    const number = this.$;\n\n    return Math.log(number + Math.sqrt(number * number + 1));\n  }\n\n  /**\n   * @method Num#asin\n   * @public\n   * @param {Boolean|*} [toDegrees = false] If it is truthy the return value is transformed into degrees.\n   * @returns {Number} Arcsine of the number.\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Math/asin\n   * @description Synonym for\n   * [Math.asin]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Math/asin}.\n   */\n  asin(toDegrees) {\n    return (toDegrees ? toDegree : 1) * Math.asin(this.$);\n  }\n\n  /**\n   * @method Num#atan\n   * @public\n   * @param {Boolean|*} [toDegrees = false] If it is truthy the return value is transformed into degrees.\n   * @returns {Number} Arcsine of the number.\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Math/atan\n   * @description Synonym for\n   * [Math.atan]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Math/atan}.\n   */\n  atan(toDegrees) {\n    return (toDegrees ? toDegree : 1) * Math.atan(this.$);\n  }\n\n  /**\n   * @member Num#atanh\n   * @type {Number}\n   * @public\n   * @readonly\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Math/atanh\n   * @description Synonym for\n   * [Math.atanh]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Math/atanh}.\n   */\n  get atanh() {\n    const number = this.$;\n\n    return Math.log((1 + number) / (1 - number)) / 2;\n  }\n\n  /**\n   * @member Num#cbrt\n   * @type {Number}\n   * @public\n   * @readonly\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Math/cbrt\n   * @description Synonym for\n   * [Math.cbrt]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Math/cbrt}.\n   */\n  get cbrt() {\n    const cbrt = Math.pow(Math.abs(this.$), 1 / 3);\n\n    return this.$ > 0 ? cbrt : -cbrt;\n  }\n\n  /**\n   * @member Num#ceil\n   * @type {Number}\n   * @public\n   * @readonly\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Math/ceil\n   * @description Synonym for\n   * [Math.ceil]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Math/ceil}.\n   *\n   * @example\n   * new Num(1.1).ceil;  // 2\n   * new Num(-1.1).ceil; // -1\n   */\n  get ceil() {\n    return Math.ceil(this.$);\n  }\n\n  /**\n   * @method Num#cos\n   * @public\n   * @param {Boolean|*} [asDegrees = false] If it is truthy the number is treated as a degree value.\n   * @returns {Number} Cosine of the number.\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Math/cos\n   * @description Synonym for\n   * [Math.cos]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Math/cos}.\n   */\n  cos(asDegrees) {\n    return Math.cos((asDegrees ? toRadian : 1) * this.$);\n  }\n\n  /**\n   * @member Num#cosh\n   * @type {Number}\n   * @public\n   * @readonly\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Math/cosh\n   * @description Synonym for\n   * [Math.cosh]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Math/cosh}.\n   */\n  get cosh() {\n    const exp = this.exp;\n\n    return (exp + 1 / exp) / 2;\n  }\n\n  /**\n   * @member Num#cube\n   * @type {Number}\n   * @public\n   * @readonly\n   * @description Cube of the number.\n   *\n   * @example\n   * new Num(2).cube;  // 8\n   * new Num(-3).ceil; // -27\n   */\n  get cube() {\n    return this.$ * this.$ * this.$;\n  }\n\n  /**\n   * @member Num#exp\n   * @type {Number}\n   * @public\n   * @readonly\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Math/exp\n   * @description Synonym for\n   * [Math.exp]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Math/exp}.\n   */\n  get exp() {\n    return Math.exp(this.$);\n  }\n\n  /**\n   * @member Num#floor\n   * @type {Number}\n   * @public\n   * @readonly\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Math/floor\n   * @description Synonym for\n   * [Math.floor]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Math/floor}.\n   *\n   * @example\n   * new Num(1.1).floor;  // 1\n   * new Num(-1.1).floor; // -2\n   */\n  get floor() {\n    return Math.floor(this.$);\n  }\n\n  /**\n   * @method Num#interval\n   * @public\n   * @param {Function} func - Function that is called every <number> milliseconds.\n   * @param {Array} [args] - Arguments passed to the function.\n   * @returns {Function} Function that aborts the interval. The context of the function (if it's not already bound)\n   * is the object with the abort method.\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Math/setInterval\n   * @description Analogue of the\n   * [setInterval]{@link https://developer.mozilla.org/en/docs/Web/API/WindowTimers/setInterval}.\n   *\n   * @example\n   * const times = 0;\n   * new Num(50).interval(function () {\n   *   if (++times === 10) {\n   *     this.abort();\n   *   }\n   * });\n   */\n  interval(func, args = []) {\n    validate([func], ['function'], 'Num#interval');\n\n    func = new Func(func).bindContext({ abort });\n    args = toArray(args);\n\n    const number = this.$;\n\n    let timeout;\n    let aborted;\n\n    setTimeout(function interval() {\n      func.apply(null, args);\n\n      if (!aborted) {\n        timeout = setTimeout(interval, number);\n      }\n    }, 0);\n\n    return abort;\n\n    function abort() {\n      aborted = true;\n\n      return clearTimeout(timeout);\n    }\n  }\n\n  /**\n   * @member Num#ln\n   * @type {Number}\n   * @public\n   * @readonly\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Math/log\n   * @description Synonym for\n   * [Math.log]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Math/log}.\n   */\n  get ln() {\n    return Math.log(this.$);\n  }\n\n  /**\n   * @method Num#log\n   * @public\n   * @param {Number} number - Number to get logarithm of.\n   * @returns {Number} Logarithm of the argument number to the number base.\n   * @description Returns the logarithm of the argument number to the number base.\n   *\n   * @example\n   * new Num(2).log(16);  // 4\n   * new Num(3).log(243); // 5\n   */\n  log(number) {\n    return Math.log(number) / Math.log(this.$);\n  }\n\n  /**\n   * @member Num#log2\n   * @type {Number}\n   * @public\n   * @readonly\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Math/log2\n   * @description Synonym for\n   * [Math.log2]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Math/log2}.\n   */\n  get log2() {\n    return this.ln / ln2;\n  }\n\n  /**\n   * @member Num#log10\n   * @type {Number}\n   * @public\n   * @readonly\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Math/log10\n   * @description Synonym for\n   * [Math.log10]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Math/log10}.\n   */\n  get log10() {\n    return this.ln / ln10;\n  }\n\n  /**\n   * @method Num#pow\n   * @public\n   * @param {Number} power - Power the number should be raised to.\n   * @returns {Number} The number to the <power> power.\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Math/pow\n   * @description Synonym for\n   * [Math.pow]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Math/pow}.\n   *\n   * @example\n   * new Num(4).pow(.5); // 2\n   * new Num(3).pow(2);  // 9\n   */\n  pow(power) {\n    return Math.pow(this.$, power);\n  }\n\n  /**\n   * @method Num#root\n   * @public\n   * @param {Number} power - Power the number should be raised to.\n   * @returns {Number} The <power> root of the number.\n   * @description Synonym for number.pow(1 / power);\n   *\n   * @example\n   * new Num(4).root(2);   // 0.5\n   * new Num(243).root(5); // 3\n   */\n  root(power) {\n    return Math.pow(this.$, 1 / power);\n  }\n\n  /**\n   * @member Num#round\n   * @type {Number}\n   * @public\n   * @readonly\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Math/round\n   * @description Synonym for\n   * [Math.round]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Math/round}.\n   *\n   * @example\n   * new Num(1.1).floor;  // 1\n   * new Num(-1.1).floor; // -1\n   * new Num(1.5).floor;  // 2\n   */\n  get round() {\n    return Math.round(this.$);\n  }\n\n  /**\n   * @member Num#sign\n   * @type {Number}\n   * @public\n   * @readonly\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Math/sign\n   * @description Synonym for\n   * [Math.sign]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Math/sign}.\n   */\n  get sign() {\n    const number = this.$;\n\n    if (!number) {\n      return number;\n    }\n\n    return number > 0 ? 1 : -1;\n  }\n\n  /**\n   * @method Num#sin\n   * @public\n   * @param {Boolean|*} [asDegrees = false] If it is truthy the number is treated as a degree value.\n   * @returns {Number} Sine of the number.\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Math/sin\n   * @description Synonym for\n   * [Math.sin]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Math/sin}.\n   */\n  sin(asDegrees) {\n    return Math.sin((asDegrees ? toRadian : 1) * this.$);\n  }\n\n  /**\n   * @member Num#sinh\n   * @type {Number}\n   * @public\n   * @readonly\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Math/sinh\n   * @description Synonym for\n   * [Math.sinh]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Math/sinh}.\n   */\n  get sinh() {\n    const exp = this.exp;\n\n    return (exp - 1 / exp) / 2;\n  }\n\n  /**\n   * @member Num#sq\n   * @type {Number}\n   * @public\n   * @readonly\n   * @description The square of the number.\n   *\n   * @example\n   * new Num(2).sq;  // 4\n   * new Num(-3).sq; // 9\n   */\n  get sq() {\n    return this.$ * this.$;\n  }\n\n  /**\n   * @member Num#sqrt\n   * @type {Number}\n   * @public\n   * @readonly\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Math/sqrt\n   * @description Synonym for\n   * [Math.sqrt]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Math/sqrt}.\n   */\n  get sqrt() {\n    return Math.sqrt(this.$);\n  }\n\n  /**\n   * @method Num#tan\n   * @public\n   * @param {Boolean|*} [asDegrees = false] If it is truthy the number is treated as a degree value.\n   * @returns {Number} Tangent of the number.\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Math/tan\n   * @description Synonym for\n   * [Math.tan]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Math/tan}.\n   */\n  tan(asDegrees) {\n    return Math.tan((asDegrees ? toRadian : 1) * this.$);\n  }\n\n  /**\n   * @member Num#tanh\n   * @type {Number}\n   * @public\n   * @readonly\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Math/tanh\n   * @description Synonym for\n   * [Math.tanh]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Math/tanh}.\n   */\n  get tanh() {\n    const number = this.$;\n\n    if (!isFinite(number)) {\n      return this.sign;\n    }\n\n    const exp = Math.exp(2 * number);\n\n    return (exp - 1) / (exp + 1);\n  }\n\n  /**\n   * @method Num#timeout\n   * @public\n   * @param {*} [value] - Value to be resolved by the promise.\n   * @returns {Promise} Promise that could be aborted.\n   * @see https://developer.mozilla.org/en/docs/Web/API/WindowTimers/setTimeout\n   * @description Promise-based analogue of\n   * [setTimeout]{@link https://developer.mozilla.org/en/docs/Web/API/WindowTimers/setTimeout}.\n   *\n   * @example\n   * new Num(50).timeout('resolved').then((value) => {\n   *   console.log(value); // 'resolved'\n   * });\n   *\n   * const promise = new Num(50).timeout();\n   * promise.abort();\n   */\n  timeout(value) {\n    let timeout;\n    let reject;\n\n    const promise = new Promise((resolve, rej) => {\n      reject = rej;\n      timeout = setTimeout(resolve, this.$, value);\n    });\n\n    promise.abort = function abort() {\n      clearTimeout(timeout);\n\n      reject(new Error('Timeout was aborted'));\n\n      return this;\n    };\n\n    return promise;\n  }\n\n  /**\n   * @method Num#toBase\n   * @public\n   * @param {Number} [base = 10] - Base that the number should inverted to.\n   * @returns {String} A string representation of the number in <base> base.\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Number/toString\n   * @description Synonym for\n   * [Number#toString]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Number/toString}.\n   *\n   * @example\n   * new Num(4).toBase(2); // 100\n   * new Num(3).toBase();  // 3\n   */\n  toBase(base = 10) {\n    return this.$.toString(base);\n  }\n\n  /**\n   * @method Num#toExponential\n   * @public\n   * @param {Number} [fractionDigits] - See the link.\n   * @returns {String} A string representation of the number in the exponential format.\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Number/toExponential\n   * @description Synonym for\n   * [Number#toExponential]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Number/toExponential}.\n   */\n  toExponential(fractionDigits) {\n    return this.$.toExponential(fractionDigits);\n  }\n\n  /**\n   * @method Num#toFixed\n   * @public\n   * @param {Number} [digits = 0] - See the link.\n   * @returns {String} Fixed-point formatted number.\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Number/toFixed\n   * @description Synonym for\n   * [Number#toFixed]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Number/toFixed}.\n   */\n  toFixed(digits) {\n    return this.$.toFixed(digits);\n  }\n\n  /**\n   * @method Num#toPrecision\n   * @public\n   * @param {Number} [precision] - See the link.\n   * @returns {String} A string representation of the number to the specified precision.\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Number/toPrecision\n   * @description Synonym for\n   * [Number#toPrecision]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Number/toPrecision}.\n   */\n  toPrecision(precision) {\n    return this.$.toPrecision(precision);\n  }\n\n  valueOf() {\n    return Number(this.$);\n  }\n}\n\ndefineProperties(Num.prototype, {\n  [Symbol.toStringTag]: 'Num'\n});\n\nconstructors[1].push({\n  check: isNumber,\n  cls: Num\n});\n\n/**\n * @function rand\n * @public\n * @param {Number} [start = 0] - Start of the range.\n * @param {Number} [end = 1] - End of the range.\n * @returns {Number} Random number.\n * @description Returns a random number in the range specified by the arguments.\n *\n * @example\n * rand(1, 5); // 2.315\n * rand(1, 5); // 4.356763\n */\nexport function rand(start = 0, end = 1) {\n  return start + (end - start) * Math.random();\n}\n\n/**\n * @function random\n * @public\n * @param {Integer} start - Start of the range.\n * @param {Integer} end - End of the range.\n * @returns {Number} Random integer.\n * @description Returns a random integer number in the range specified by the arguments.\n *\n * @example\n * random(1, 5); // 3\n * random(1, 5); // 1\n */\nexport function random(start, end) {\n  validate([start, end], ['intLike', 'intLike'], 'random');\n\n  if (end <= start) {\n    throw new Error('The second argument must be greater than the first!', 'random');\n  }\n\n  return Math.floor(rand(start, end + 1));\n}\n\nexport default Num;\n","/**\n * @module Str\n * @private\n * @mixin\n * @description Exports Str class.\n */\n\nimport D from './D';\nimport Super from './Super';\nimport constructors from './constants/constructors';\nimport regexpSpecialCharacters from './constants/regexpSpecialCharacters';\nimport {\n  isFunction, isNumberLike, isObject, isString,\n  validate, Symbol, defineProperties, iterate\n} from './helpers';\n\nconst htmlSpecials = {\n  '&': '&amp;',\n  '<': '&lt;',\n  '>': '&gt;'\n};\nconst regexpSpecialsRegexp = new RegExp(\n  new Super(regexpSpecialCharacters)\n    .word((x) => `\\\\${ x }|`)\n    .replace(/\\|$/, ''),\n  'g'\n);\n\n/**\n * @class Str\n * @extends Super\n * @public\n * @param {String} [string = ''] - A string to wrap.\n * @returns {Str} Instance of Str.\n * @description Wrap of a string.\n *\n * @example\n * const s = new Num('1');\n */\nexport class Str extends Super {\n  constructor(string = '') {\n    super(string);\n\n    /**\n     * @member Str#$\n     * @type {String}\n     * @public\n     * @description Original string.\n     */\n  }\n\n  /**\n   * @method Str#capitalizeFirst\n   * @public\n   * @returns {Str} Capitalized string.\n   * @description Method capitalizing the first symbol.\n   *\n   * @example\n   * new Str('foo').capitalizeFirst().$; // 'Foo'\n   */\n  capitalizeFirst() {\n    const string = this.$;\n\n    return new Str(string.slice(0, 1).toUpperCase() + string.slice(1));\n  }\n\n  /**\n   * @method Str#endsWith\n   * @public\n   * @param {String} searchString - See the link.\n   * @param {Number} [position = string.length] - See the link.\n   * @returns {Boolean} If the string ends with the argument string.\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/String/endsWith\n   * @description Synonym for\n   * [String#endsWith]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/String/endsWith}.\n   */\n  endsWith(searchString, position) {\n    if (arguments.length < 2) {\n      position = this.$.length;\n    }\n\n    return this\n      .slice(0, position)\n      .revert()\n      .startsWith(new Str(searchString).revert().$);\n  }\n\n  /**\n   * @method Str#escapeHTML\n   * @public\n   * @returns {Str} New instance of Str.\n   * @description Methods escaping \"&\", \"<\" and \">\" symbols.\n   *\n   * @example\n   * new Str('\"1 < 2\" & \"7 > 4\" are true expressions.').escapeHTML().$;\n   * // '\"1 &lt; 2\" &amp \"7 &gt; 2\" are true expressions.'\n   */\n  escapeHTML() {\n    let string = this.$;\n\n    iterate(htmlSpecials, (escaped, symbol) => {\n      string = string.replace(new RegExp(symbol, 'g'), escaped);\n    });\n\n    return new Str(string);\n  }\n\n  /**\n   * @method Str#escapeRegExp\n   * @public\n   * @returns {Str} New instance of Str.\n   * @description Method escaping RegExp special characters.\n   *\n   * @example\n   * new Str('(213.98 - [] {})').escapeRegExp().$; // '\\(213\\.98 \\- \\[\\] \\{\\}\\)'\n   */\n  escapeRegExp() {\n    return this.replace(regexpSpecialsRegexp, '\\\\$&');\n  }\n\n  /**\n   * @method Str#in\n   * @public\n   * @param {*} object - Object to check the string as a property in.\n   * @returns {Boolean} If it is in the object or not.\n   * @description Returns string in object.\n   *\n   * @example\n   * new Str('a').in({ a: 1 }); // true\n   * new Str('toFixed').in(1);  // false\n   * new Str('a').in(null);     // false\n   */\n  in(object) {\n    if (!isObject(object)) {\n      return false;\n    }\n\n    return this.$ in object;\n  }\n\n  /**\n   * @method Str#indexOf\n   * @public\n   * @param {String} searchValue - See the link.\n   * @param {Number} [fromIndex = 0] - See the link.\n   * @returns {Number} Found index or -1.\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/String/indexOf\n   * @description Synonym for\n   * [String#indexOf]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/String/indexOf}.\n   */\n  indexOf(searchValue, fromIndex) {\n    return this.$.indexOf.apply(this.$, arguments);\n  }\n\n  /**\n   * @method Str#lastIndexOf\n   * @public\n   * @param {String} searchValue - See the link.\n   * @param {Number} [fromIndex = string.length] - See the link.\n   * @returns {Number} Found index or -1.\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/String/lastIndexOf\n   * @description Synonym for\n   * [String#lastIndexOf]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/String/lastIndexOf}.\n   */\n  lastIndexOf(searchValue, fromIndex) {\n    return this.$.lastIndexOf.apply(this.$, arguments);\n  }\n\n  /**\n   * @member Str#length\n   * @type {Number}\n   * @public\n   * @readonly\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/String/length\n   * @description Synonym for\n   * [String#length]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/String/length}.\n   */\n  get length() {\n    return this.$.length;\n  }\n\n  /**\n   * @method Str#match\n   * @public\n   * @returns {Arr|Super} D-Wrap of found match.\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/String/match\n   * @description Synonym for\n   * [String#match]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/String/match}.\n   */\n  match(regexp) {\n    return D(this.$.match.apply(this.$, arguments));\n  }\n\n  /**\n   * @method Str#repeat\n   * @public\n   * @param {Integer} times - Times to repeat the string.\n   * @returns {Str} New instance of Str.\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/String/repeat\n   * @description Synonym for\n   * [String#repeat]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/String/repeat}.\n   *\n   * @example\n   * new Str('123').repeat(2).$; // '123123'\n   * new Str('123').repeat(0).$; // ''\n   */\n  repeat(times) {\n    validate([times], [['intLike', '>=0']], 'Str#repeat');\n\n    times = +times;\n\n    const string = this.$;\n\n    let s = '';\n\n    for (let i = 0; i < times; i++) {\n      s += string;\n    }\n\n    return new Str(s);\n  }\n\n  /**\n   * @method Str#replace\n   * @public\n   * @param {RegExp|String} regexp - See the link.\n   * @param {String|Function} [replacer = ''] - See the link.\n   * @returns {Str} New instance of Str.\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/String/replace\n   * @description Synonym for\n   * [String#replace]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/String/replace}\n   * besides that replacer has a default value of ''.\n   */\n  replace(regexp, replacer = '') {\n    return new Str(this.$.replace(regexp, replacer));\n  }\n\n  /**\n   * @method Str#replaceString\n   * @public\n   * @param {String} string - String to replace.\n   * @param {String} [replacer = ''] - String to replace with.\n   * @returns {Str} New instance of Str.\n   * @description Method for global string replaceing.\n   *\n   * @example\n   * new Str('123123').replaceString('1', '4').$; // '423423'\n   * new Str('123123').replaceString('1').$;      // '2323'\n   */\n  replaceString(string, replacer = '') {\n    string = new Super(string).$;\n\n    validate([string], ['string'], 'Str#replaceString');\n\n    return new Str(this.$.split(string).join(replacer));\n  }\n\n  /**\n   * @method Str#revert\n   * @public\n   * @returns {Str} New instance of string.\n   * @description Method for reverting a string.\n   *\n   * @example\n   * new Str('1234').revert().$; // '4321'\n   */\n  revert() {\n    const string = this.$;\n    let str = '';\n\n    for (let i = string.length - 1; i >= 0; i--) {\n      str += string[i];\n    }\n\n    return new Str(str);\n  }\n\n  /**\n   * @method Str#search\n   * @public\n   * @param {RegExp} regexp - See the link.\n   * @returns {Number} Index of the first match, if found, and -1 if not.\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/String/search\n   * @description Synonym for\n   * [String#search]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/String/search}.\n   */\n  search(regexp) {\n    validate([regexp], ['regexp']);\n\n    return this.$.search.apply(this.$, arguments);\n  }\n\n  /**\n   * @method Str#slice\n   * @public\n   * @param {Number} [beginSlice = 0] - See the link.\n   * @param {Number} [endSlice = string.length] - See the link.\n   * @returns {Str} New instance of Str.\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/String/slice\n   * @description Synonym for\n   * [String#slice]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/String/slice}.\n   */\n  slice(beginSlice, endSlice) {\n    return new Str(this.$.slice.apply(this.$, arguments));\n  }\n\n  /**\n   * @method Str#split\n   * @public\n   * @param {RegExp|String} [separator] - See the link.\n   * @returns {Arr|Super} D-Wrap of the array.\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/String/split\n   * @description Synonym for\n   * [String#split]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/String/split}.\n   */\n  split(separator) {\n    return D(this.$.split.apply(this.$, arguments));\n  }\n\n  /**\n   * @method Str#startsWith\n   * @public\n   * @param {String} searchString - See the link.\n   * @param {Number} [position = 0] - See the link.\n   * @returns {Boolean} If the string ends with the argument string.\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/String/startsWith\n   * @description Synonym for\n   * [String#startsWith]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/String/startsWith}.\n   */\n  startsWith(searchString, position = 0) {\n    return this.$.indexOf.apply(this.$, arguments) === position;\n  }\n\n  /**\n   * @method Str#substr\n   * @public\n   * @param {Number} [start = 0] - See the link.\n   * @param {Number} [length = string.length] - See the link.\n   * @returns {Str} New instance of Str.\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/String/substr\n   * @description Synonym for\n   * [String#substr]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/String/substr}.\n   */\n  substr(start, length) {\n    return new Str(this.$.substr.apply(this.$, arguments));\n  }\n\n  /**\n   * @method Str#substring\n   * @public\n   * @param {Number} [indexStart = 0] - See the link.\n   * @param {Number} [indexEnd = string.length] - See the link.\n   * @returns {Str} New instance of Str.\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/String/substring\n   * @description Synonym for\n   * [String#substring]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/String/substring}.\n   */\n  substring(indexStart, indexEnd) {\n    return new Str(this.$.substring.apply(this.$, arguments));\n  }\n\n  /**\n   * @method Str#toCamelCase\n   * @public\n   * @returns {Str} New instance of Str.\n   * @description Removes following regexp /\\s\\-_\\./ making the string camel cased.\n   *\n   * @example\n   * new Str('spinal-case').toCamelCase().$;  // 'spinalCase'\n   * new Str('_snake_case_').toCamelCase().$; // 'snakeCase'\n   */\n  toCamelCase() {\n    return new Str(trim(this.$)\n      .replace(/[\\s\\-_\\.]+/g, '-')\n      .replace(/\\-[^\\-]/g, (match) => match[1].toUpperCase())\n      .replace(/^[\\S]/, (match) => match.toLowerCase())\n    );\n  }\n\n  /**\n   * @method Str#toCapitalCase\n   * @public\n   * @returns {Str} New instance of Str.\n   * @description Removes following regexp /\\-_\\./ making the string capital letter cased.\n   *\n   * @example\n   * new Str('spinal-case').toCapitalCase().$;  // 'Spinal Case'\n   * new Str('_snake_case_').toCapitalCase().$; // 'Snake Case'\n   */\n  toCapitalCase() {\n    return new Str(trim(this.$)\n      .replace(/[\\s\\-_\\.]+/g, ' ')\n      .replace(/[\\S]/g, (match) => (\n        match.toLowerCase() === match ? match : ` ${ match }`\n      ))\n      .replace(/\\s[\\S]/g, (match) => match.toUpperCase())\n      .replace(/\\s+/g, ' ')\n      .replace(/^\\s/, '')\n      .replace(/^[\\S]/, (match) => match.toUpperCase())\n    );\n  }\n\n  /**\n   * @method Str#toDotCase\n   * @public\n   * @returns {Str} New instance of Str.\n   * @description Removes following regexp /\\-_\\./ making the string dot cased.\n   *\n   * @example\n   * new Str('spinal-case').toDotCase().$;  // 'spinal.case'\n   * new Str('_snake_case_').toDotCase().$; // 'snake.case'\n   */\n  toDotCase() {\n    return new Str(trim(this.$)\n      .replace(/[\\s\\-_\\.]+/g, '.')\n      .replace(/[^\\.]/g, (match) => (\n        match.toLowerCase() === match ? match : `.${ match }`\n      ))\n      .replace(/\\.+/g, '.')\n      .replace(/^\\./, '')\n      .toLowerCase()\n    );\n  }\n\n  /**\n   * @method Str#toHyphenCase\n   * @public\n   * @returns {Str} New instance of Str.\n   * @description Removes following regexp /\\s\\-_\\./ making the string camel cased.\n   *\n   * @example\n   * new Str('camelCase').toSpinalCase().$;    // 'camel-case'\n   * new Str('_snake_case_').toSpinalCase().$; // 'snake-case'\n   */\n  toHyphenCase() {\n    return new Str(trim(this.$)\n      .replace(/[\\s\\-_\\.]+/g, '-')\n      .replace(/[^\\-]/g, (match) => (\n        match.toLowerCase() === match ? match : `-${ match }`\n      ))\n      .replace(/\\-+/g, '-')\n      .replace(/^\\-/, '')\n      .toLowerCase()\n    );\n  }\n\n  /**\n   * @method Str#toLowerCase\n   * @public\n   * @returns {Str} New instance of Str.\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/String/toLowerCase\n   * @description Synonym for\n   * [String#toLowerCase]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/String/toLowerCase}.\n   *\n   * @example\n   * new Str('UPPER-CASE').toLowerCase().$;  // 'upper-case'\n   */\n  toLowerCase() {\n    return new Str(this.$.toLowerCase());\n  }\n\n  /**\n   * @method Str#toSnakeCase\n   * @public\n   * @returns {Str} New instance of Str.\n   * @description Removes following regexp /\\s\\-\\./ making the string spinal cased.\n   *\n   * @example\n   * new Str('spinal-case').toSnakeCase().$; // 'spinal_case'\n   * new Str('camelCase').toSnakeCase().$;   // 'camel_case'\n   */\n  toSnakeCase() {\n    return new Str(trim(this.$)\n      .replace(/[\\s\\-_\\.]+/g, '_')\n      .replace(/[^_]/g, (match) => (\n        match.toLowerCase() === match ? match : `_${ match }`\n      ))\n      .replace(/_+/g, '_')\n      .replace(/^_/, '')\n      .toLowerCase()\n    );\n  }\n\n  /**\n   * @method Str#toSpaceCase\n   * @public\n   * @returns {Str} New instance of Str.\n   * @description Removes following regexp /\\-_\\./ making the string space cased.\n   *\n   * @example\n   * new Str('spinal-case').toSpaceCase().$;  // 'spinal case'\n   * new Str('_snake_case_').toSpaceCase().$; // 'snake case'\n   */\n  toSpaceCase() {\n    return new Str(trim(this.$)\n      .replace(/[\\s\\-_\\.]+/g, ' ')\n      .replace(/[\\S]/g, (match) => (\n        match.toLowerCase() === match ? match : ` ${ match }`\n      ))\n      .replace(/\\s+/g, ' ')\n      .replace(/^\\s/, '')\n      .toLowerCase()\n    );\n  }\n\n  toString() {\n    return this.$;\n  }\n\n  /**\n   * @method Str#toUpperCase\n   * @public\n   * @returns {Str} New instance of Str.\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/String/toUpperCase\n   * @description Synonym for\n   * [String#toUpperCase]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/String/toUpperCase}.\n   *\n   * @example\n   * new Str('lower-case').toUpperCase().$;  // 'LOWER-CASE'\n   */\n  toUpperCase() {\n    return new Str(this.$.toUpperCase());\n  }\n\n  /**\n   * @method Str#trim\n   * @public\n   * @returns {Str} New instance of Str.\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/String/trim\n   * @description Synonym for\n   * [String#trim]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/String/trim}.\n   */\n  trim() {\n    return new Str(this.$.replace(/^[\\s\\ufeff\\u00a0]+|[\\s\\ufeff\\u00a0]+$/g, ''));\n  }\n\n  /**\n   * @method Str#trimLeft\n   * @public\n   * @returns {Str} New instance of Str.\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/String/trimLeft\n   * @description Synonym for\n   * [String#trimLeft]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/String/trimLeft}.\n   */\n  trimLeft() {\n    return new Str(this.$.replace(/^[\\s\\ufeff\\u00a0]+/, ''));\n  }\n\n  /**\n   * @method Str#trimRight\n   * @public\n   * @returns {Str} New instance of Str.\n   * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/String/trimRight\n   * @description Synonym for\n   * [String#trimRight]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/String/trimRight}.\n   */\n  trimRight() {\n    return new Str(this.$.replace(/[\\s\\ufeff\\u00a0]+$/, ''));\n  }\n}\n\ndefineProperties(Str.prototype, {\n  [Symbol.toStringTag]: 'Str'\n});\n\nfunction trim(string) {\n  return string.replace(/^[\\s\\-_\\.]+|[\\s\\-_\\.]+$/g, '');\n}\n\n/**\n * @function parseJSON\n * @public\n * @param {String} [json = null] - String to parse.\n * @param {Object} [options] - Options.\n * @param {Boolean|*} [options.numbers] - If it is needed to parse number-like strings as numbers.\n * @param {Boolean|*} [options.dates] - If it is needed to parse date-like string as dates.\n * Date-like string is considered to match ^\\d\\d\\d\\d-\\d\\d-\\d\\dT\\d\\d:\\d\\d:\\d\\d\\.\\d\\d\\dZ?$\n * @param {JSONCallback} [callback] - Callback that called on every iteration.\n * @returns {DWrap} D-Wrap of found match.\n * @description Method for parsing json.\n *\n * @example\n * parseJSON('{ \"a\": 1 }').$;                                           // { a: 1 }\n * parseJSON('{ \"a\": \"1\" }', { numbers: true }).$;                      // { numbers: true }\n * parseJSON('{ \"a\": \"1999-12-31T23:59:59.999Z\" }', { dates: true }).$; // { a: Date {...} }\n */\nexport function parseJSON(json = null, options = {}, callback) {\n  if (arguments.length <= 1) {\n    return D(JSON.parse(json));\n  }\n\n  if (isFunction(options)) {\n    callback = options;\n    options = {};\n  }\n\n  const { numbers, dates } = options;\n  const parsed = JSON.parse(json, function (key, value) {\n    if (dates && /^\\d\\d\\d\\d-\\d\\d-\\d\\dT\\d\\d:\\d\\d:\\d\\d\\.\\d\\d\\dZ?$/.test(value)) {\n      value = new Date(value);\n    } else if (numbers && isNumberLike(value) && isString(value)) {\n      value = Number(value);\n    }\n\n    return callback ? callback.apply(this, arguments) : value;\n  });\n\n  return D(parsed);\n}\n\nconstructors[2].push({\n  check: isString,\n  cls: Str\n});\n\nexport default Str;\n","/**\r\n * @module constants/formats\r\n * @private\r\n * @description Exports different types of formatting for {@link Date#format}.\r\n */\r\n\r\nimport Super from '../Super';\r\nimport Str from '../Str';\r\n\r\nconst zero = new Str('0');\r\nconst daysOfTheWeekNames = [\r\n  'Sunday',\r\n  'Monday',\r\n  'Tuesday',\r\n  'Wednesday',\r\n  'Thursday',\r\n  'Friday',\r\n  'Saturday'\r\n];\r\nconst daysOfTheWeekAliases = new Super(daysOfTheWeekNames).map((value) => value.slice(0, 3)).$;\r\nconst monthsNames = [\r\n  'January',\r\n  'February',\r\n  'March',\r\n  'April',\r\n  'May',\r\n  'June',\r\n  'Jule',\r\n  'August',\r\n  'September',\r\n  'October',\r\n  'November',\r\n  'December'\r\n];\r\nconst monthsAliases = new Super(monthsNames).map((value) => value.slice(0, 3)).$;\r\n\r\n/**\r\n * @callback module:constants/formats~matchCallback\r\n * @param {Dat} date - D-wrap of a date to apply format to.\r\n * @param {String} string - Matched applied expression.\r\n */\r\n\r\n/**\r\n * @typedef {Object} module:constants/formats~formatExpr\r\n * @property {String} format - Matched format.\r\n * @property {module:constants/formats~matchCallback} match - Callback if there was a match.\r\n */\r\n\r\n/**\r\n * @type {module:constants/formats~formatExpr[]}\r\n * @description Array of different formats.\r\n */\r\nexport default [\r\n  {\r\n    format: 'ccc',\r\n    match: (date, utc) => round(date[utc]('c'), 3)\r\n  },\r\n  {\r\n    format: 'c',\r\n    match: (date, utc) => date[utc]('c')\r\n  },\r\n  {\r\n    format: 'ss',\r\n    match: (date, utc) => round(date[utc]('s'), 2)\r\n  },\r\n  {\r\n    format: 's',\r\n    match: (date, utc) => date[utc]('s')\r\n  },\r\n  {\r\n    format: 'mm',\r\n    match: (date, utc) => round(date[utc]('m'), 2)\r\n  },\r\n  {\r\n    format: 'm',\r\n    match: (date, utc) => date[utc]('m')\r\n  },\r\n  {\r\n    format: 'hh',\r\n    match: (date, utc) => round(date[utc]('h'), 2)\r\n  },\r\n  {\r\n    format: 'h',\r\n    match: (date, utc) => date[utc]('h')\r\n  },\r\n  {\r\n    format: 'dddd',\r\n    match: (date, utc) => daysOfTheWeekNames[date[utc]('dw')]\r\n  },\r\n  {\r\n    format: 'ddd',\r\n    match: (date, utc) => daysOfTheWeekAliases[date[utc]('dw')]\r\n  },\r\n  {\r\n    format: 'dd',\r\n    match: (date, utc) => round(date[utc]('d'), 2)\r\n  },\r\n  {\r\n    format: 'd',\r\n    match: (date, utc) => date[utc]('d')\r\n  },\r\n  {\r\n    format: 'MMMM',\r\n    match: (date, utc) => monthsNames[date[utc]('M') - 1]\r\n  },\r\n  {\r\n    format: 'MMM',\r\n    match: (date, utc) => monthsAliases[date[utc]('M') - 1]\r\n  },\r\n  {\r\n    format: 'MM',\r\n    match: (date, utc) => round(date[utc]('M'), 2)\r\n  },\r\n  {\r\n    format: 'M',\r\n    match: (date, utc) => date[utc]('M')\r\n  },\r\n  {\r\n    format: 'yyyy',\r\n    match: (date, utc) => round(date[utc]('y'), 4)\r\n  },\r\n  {\r\n    format: 'yy',\r\n    match: (date, utc) => String(date[utc]('y')).slice(-2)\r\n  },\r\n  {\r\n    format: 'y',\r\n    match: (date, utc) => date[utc]('y')\r\n  }\r\n];\r\n\r\n/**\r\n * @function round\r\n * @private\r\n * @param {Number} number - Number to round.\r\n * @param {Number} digits - Number of the digits of the output.\r\n * @returns {String} String with necessary additional starting zeroes.\r\n */\r\nfunction round(number, digits) {\r\n  const string = String(number);\r\n  let zeroes = digits - string.length;\r\n\r\n  zeroes = zeroes < 0 ? 0 : zeroes;\r\n\r\n  return zero.repeat(zeroes).$ + string;\r\n}\r\n","/**\r\n * @module Dat\r\n * @private\r\n * @mixin\r\n * @description Exports Dat class.\r\n */\r\n\r\nimport Super from './Super';\r\nimport Num from './Num';\r\nimport Str from './Str';\r\nimport { switcher } from './Switcher';\r\nimport constructors from './constants/constructors';\r\nimport formats from './constants/formats';\r\nimport { isDate, iterate, Symbol, defineProperties } from './helpers';\r\n\r\n/**\r\n * @typedef {*} DateLike\r\n * @public\r\n */\r\n\r\n/**\r\n * @typedef {'c'|'s'|'m'|'h'|'d'|'w'|'M'|'y'} AddPeriod\r\n * @public\r\n */\r\n\r\n/**\r\n * @typedef {'c'|'s'|'m'|'h'|'d'|'dw'|'M'|'y'} GetPeriod\r\n * @public\r\n */\r\n\r\n/**\r\n * @typedef {'c'|'s'|'m'|'h'|'d'|'M'|'y'} OfOnePeriod\r\n * @public\r\n */\r\n\r\n/**\r\n * @typedef {'c'|'s'|'m'|'h'|'d'|'M'|'y'} SetPeriod\r\n * @public\r\n */\r\n\r\n/**\r\n * @typedef {'ccc'|'c'|'ss'|'s'|'mm'|'m'|'hh'|'h'|'dddd'|'ddd'|'dd'|'d'|'MMMM'|'MMM'|'MM'|'M'|'yyyy'|'yy'|'y'} Format\r\n * @public\r\n */\r\n\r\nconst coeffs = {\r\n  c: 1,\r\n  s: 1000,\r\n  m: 60000,\r\n  h: 3600000,\r\n  d: 86400000,\r\n  w: 604800000,\r\n  M: 2592000000,\r\n  y: 31536000000\r\n};\r\n\r\nconst getSwitcher = switcher({\r\n  c: (date, utc) => date[`${ utc }Milliseconds`](),\r\n  s: (date, utc) => date[`${ utc }Seconds`](),\r\n  m: (date, utc) => date[`${ utc }Minutes`](),\r\n  h: (date, utc) => date[`${ utc }Hours`](),\r\n  d: (date, utc) => date[`${ utc }Date`](),\r\n  dw: (date, utc) => date[`${ utc }Day`](),\r\n  M: (date, utc) => date[`${ utc }Month`]() + 1,\r\n  y: (date, utc) => date[`${ utc }FullYear`]()\r\n}, 'equals', NaN);\r\nconst setSwitcher = switcher({\r\n  c: (date, value, utc) => date[`${ utc }Milliseconds`](value),\r\n  s: (date, value, utc) => date[`${ utc }Seconds`](value),\r\n  m: (date, value, utc) => date[`${ utc }Minutes`](value),\r\n  h: (date, value, utc) => date[`${ utc }Hours`](value),\r\n  d: (date, value, utc) => date[`${ utc }Date`](value),\r\n  M: (date, value, utc) => date[`${ utc }Month`](value - 1),\r\n  y: (date, value, utc) => date[`${ utc }FullYear`](value)\r\n});\r\n\r\n/**\r\n * @class Dat\r\n * @extends Super\r\n * @public\r\n * @param {Date} [date = new Date()] - A date to wrap.\r\n * @returns {Dat} Instance of Dat.\r\n * @description Wrap of a date.\r\n *\r\n * @example\r\n * const date = new Dat(new Date());\r\n */\r\nexport class Dat extends Super {\r\n  constructor(date = new Date()) {\r\n    super(date);\r\n\r\n    /**\r\n     * @member Dat#$\r\n     * @type {Date}\r\n     * @public\r\n     * @description Original date.\r\n     */\r\n  }\r\n\r\n  /**\r\n   * @method Dat#add\r\n   * @public\r\n   * @param {AddPeriod|Object.<AddPeriod, Number>} what - What to add.\r\n   * @param {Number} [number] - Number of what to add if the first argument is a period string.\r\n   * @returns {Dat} Returns this.\r\n   * @description Method for adding amounts of time to the date. Returns new instance of Dat.\r\n   *\r\n   * @example\r\n   * new Dat(new Date('1999-12-31T23:59:59.999Z')).add('c', 2).toISOString();         // '2000-01-01T00:00:00.001Z'\r\n   * new Dat(new Date('1999-12-31T23:59:59.999Z')).add({ c: 2, d: 5 }).toISOString(); // '2000-01-06T00:00:00.001Z'\r\n   */\r\n  add(what, number) {\r\n    if (arguments.length >= 2) {\r\n      what = { [what]: number };\r\n    }\r\n\r\n    return this.time(this.time() + new Super(what).sum((value, what) => coeffs[what] * value));\r\n  }\r\n\r\n  /**\r\n   * @method Dat#expires\r\n   * @public\r\n   * @param {*} [value = this] - Value to resolve after the date expires.\r\n   * @returns {Promise} New instance of Promise.\r\n   * @description Method for defining when the date expires.\r\n   *\r\n   * @example\r\n   * new Dat().add('c', 500).expires('Expired').then((value) => {\r\n   *   // After 500 milliseconds\r\n   *   console.log(value); // 'Expired'\r\n   * });\r\n   */\r\n  expires(value) {\r\n    if (!arguments.length) {\r\n      value = this;\r\n    }\r\n\r\n    return new Num(this.$ - now()).timeout(value);\r\n  }\r\n\r\n  /**\r\n   * @method Dat#format\r\n   * @public\r\n   * @param {String} string - Template for the output.\r\n   * @param {String} [prefix = ''] - If needed [all special strings]{@link Format}\r\n   * are treated as they should be prefix with prefix.\r\n   * @returns {String} Formatted string.\r\n   * @description Method for creating formatted output based on a string.\r\n   *\r\n   * @example\r\n   * new Dat('1999-12-31T23:59:59.999Z').format('Seconds: $ss, milliseconds: $ccc.', '$');\r\n   * // 'Seconds: 59, milliseconds: 999.'\r\n   */\r\n  format(string, prefix = '') {\r\n    string = new Str(new Super(string).$);\r\n    prefix = String(new Super(prefix).$);\r\n\r\n    iterate(formats, (format) => {\r\n      string = string.replaceString(prefix + format.format, format.match(this, 'get'));\r\n    });\r\n\r\n    return string.$;\r\n  }\r\n\r\n  /**\r\n   * @method Dat#formatUTC\r\n   * @public\r\n   * @param {String} string - See {@link Dat#format}.\r\n   * @param {String} [prefix = ''] - See {@link Dat#format}.\r\n   * @returns {String} Formatted string.\r\n   * @description UTC version of {@link Dat#format}.\r\n   *\r\n   * @example\r\n   * new Dat('1999-07-07T03:09:09.099Z').formatUTC(\r\n   *   `\r\n   *     Milliseconds: $ccc|$c.\r\n   *     Seconds:      $ss|$s.\r\n   *     Minutes:      $mm|$m.\r\n   *     Hours:        $hh|$h.\r\n   *     Day:          $dddd|$ddd|$dd|$d.\r\n   *     Month:        $MMMM|$MMM|$MM|$M.\r\n   *     Year:         $yyyy|$yy|$y.\r\n   *   `,\r\n   *   '$'\r\n   * );\r\n   * // Milliseconds: 099|99.\r\n   * // Seconds:      09|9.\r\n   * // Minutes:      09|9.\r\n   * // Hours:        03|3.\r\n   * // Day:          Friday|Fri|07|7.\r\n   * // Month:        July|Jul|07|7.\r\n   * // Year:         1999|99|1999.\r\n   */\r\n  formatUTC(string, prefix = '') {\r\n    string = new Str(new Super(string).$);\r\n    prefix = String(new Super(prefix).$);\r\n\r\n    iterate(formats, (format) => {\r\n      string = string.replaceString(prefix + format.format, format.match(this, 'getUTC'));\r\n    });\r\n\r\n    return string.$;\r\n  }\r\n\r\n  /**\r\n   * @method Dat#get\r\n   * @public\r\n   * @param {GetPeriod} what - What to get.\r\n   * @returns {Number} Number of what to get.\r\n   * @description Method for getting values such as seconds or minutes.\r\n   *\r\n   * @example\r\n   * new Dat(new Date('1999-12-31T23:59:59.999Z')).get('s'); // 59\r\n   */\r\n  get(what) {\r\n    return getSwitcher(what, [this.$, 'get']);\r\n  }\r\n\r\n  /**\r\n   * @method Dat#getUTC\r\n   * @public\r\n   * @param {GetPeriod} what - See {@link Dat#get}.\r\n   * @returns {Number} Number of what to get.\r\n   * @description UTC version of {@link Dat#get}.\r\n   *\r\n   * @example\r\n   * const date = new Dat(new Date('1999-12-31T23:59:59.999Z'));\r\n   *\r\n   * date.getUTC('c');  // 999\r\n   * date.getUTC('s');  // 59\r\n   * date.getUTC('m');  // 59\r\n   * date.getUTC('h');  // 23\r\n   * date.getUTC('d');  // 31\r\n   * date.getUTC('dw'); // 5\r\n   * date.getUTC('M');  // 12\r\n   * date.getUTC('y');  // 1999\r\n   */\r\n  getUTC(what) {\r\n    return getSwitcher(what, [this.$, 'getUTC']);\r\n  }\r\n\r\n  /**\r\n   * @method Dat#isAfter\r\n   * @public\r\n   * @param {DateLike} date - Date to be compared to this date.\r\n   * @returns {Boolean} If this date is after the argument one.\r\n   * @description Finds out if this date is after the argument one.\r\n   *\r\n   * @example\r\n   * new Dat(new Date(333)).isAfter(new Date(334)); // false\r\n   * new Dat(new Date(333)).isAfter(new Date(332)); // true\r\n   */\r\n  isAfter(date) {\r\n    date = new Date(new Super(date).$);\r\n\r\n    return date.getTime() < this.$.getTime();\r\n  }\r\n\r\n  /**\r\n   * @method Dat#isBefore\r\n   * @public\r\n   * @param {DateLike} date - Date to be compared to this date.\r\n   * @returns {Boolean} If this date is before the argument one.\r\n   * @description Finds out if this date is before the argument one.\r\n   *\r\n   * @example\r\n   * new Dat(new Date(333)).isBefore(new Date(334)); // true\r\n   * new Dat(new Date(333)).isBefore(new Date(332)); // false\r\n   */\r\n  isBefore(date) {\r\n    date = new Date(new Super(date).$);\r\n\r\n    return date.getTime() > this.$.getTime();\r\n  }\r\n\r\n  /**\r\n   * @method Dat#isBetween\r\n   * @public\r\n   * @param {DateLike} date1 - Start of the range.\r\n   * @param {DateLike} date2 - End of the range.\r\n   * @returns {Boolean} If this date is after date1 and before date2.\r\n   * @description Finds out if this date is after date1 and before date2.\r\n   *\r\n   * @example\r\n   * new Dat(new Date(333)).isBetween(new Date(332), new Date(334)); // true\r\n   * new Dat(new Date(333)).isBetween(new Date(334), new Date(332)); // false\r\n   */\r\n  isBetween(date1, date2) {\r\n    const time = this.$.getTime();\r\n\r\n    date1 = new Date(new Super(date1).$);\r\n    date2 = new Date(new Super(date2).$);\r\n\r\n    return time > date1.getTime() && time < date2.getTime();\r\n  }\r\n\r\n  /**\r\n   * @method Dat#isInvalid\r\n   * @public\r\n   * @returns {Boolean} If the date is invalid.\r\n   * @description Returns if the date is invalid.\r\n   *\r\n   * @example\r\n   * new Dat(new Date('a')).isInvalid(); // true\r\n   * new Dat(new Date(1)).isInvalid();   // false\r\n   */\r\n  isInvalid() {\r\n    return this.$.toString() === 'Invalid Date';\r\n  }\r\n\r\n  /**\r\n   * @method Dat#isPassed\r\n   * @public\r\n   * @returns {Boolean} If the date is passed.\r\n   * @description Returns if the date is passed.\r\n   *\r\n   * @example\r\n   * new Dat(new Date(1)).isPassed(); // true\r\n   */\r\n  isPassed() {\r\n    return this.isBefore(now());\r\n  }\r\n\r\n  /**\r\n   * @method Dat#ofOne\r\n   * @public\r\n   * @param {OfOnePeriod} what - Period to check.\r\n   * @param {DateLike} date - Date to check.\r\n   * @returns {Boolean} If two dates are of one second, minute or something else.\r\n   * @description Returns if two dates are of one second, minute or something else.\r\n   *\r\n   * @example\r\n   * new Dat(new Date('1999-12-31T23:59:59.000Z')).ofOne('s', new Date(1999-12-31T23:59:59.333Z')); // true\r\n   * new Dat(new Date('1999-12-31T23:59:59.000Z')).ofOne('s', new Date(1999-12-31T23:59:58.999Z')); // false\r\n   */\r\n  ofOne(what, date) {\r\n    if (!(what in coeffs) || what === 'w') {\r\n      return false;\r\n    }\r\n\r\n    date = new Dat(new Date(date));\r\n\r\n    let started;\r\n\r\n    return iterate(coeffs, (coeff, w) => {\r\n      if (w === what) {\r\n        started = true;\r\n      }\r\n\r\n      if (!started || w === 'w') {\r\n        return;\r\n      }\r\n\r\n      if (started && this.get(w) !== date.get(w)) {\r\n        return false;\r\n      }\r\n    }) !== false;\r\n  }\r\n\r\n  /**\r\n   * @method Dat#set\r\n   * @public\r\n   * @param {SetPeriod|Object.<SetPeriod, Number>} what - What to add.\r\n   * @param {Number} [number] - Number of what to set if the first argument is a period string.\r\n   * @returns {Dat} Returns this.\r\n   * @description Method for setting values such as seconds or minutes.\r\n   *\r\n   * @example\r\n   * new Dat(new Date('1999-12-31T23:59:59.999Z')).set('s', 58).get('s');           // 58\r\n   * new Dat(new Date('1999-12-31T23:59:59.999Z')).set({ c: 998, s: 58 }).get('c'); // 998\r\n   */\r\n  set(what, number) {\r\n    const date = this.$;\r\n\r\n    if (arguments.length >= 2) {\r\n      what = { [what]: number };\r\n    }\r\n\r\n    what = new Super(what).$;\r\n\r\n    iterate(what, (value, what) => {\r\n      setSwitcher(what, [date, value, 'set']);\r\n    });\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @method Dat#setUTC\r\n   * @public\r\n   * @param {SetPeriod|Object.<SetPeriod, Number>} what - See {@link Dat#set}.\r\n   * @param {Number} [number] - See {@link Dat#set}.\r\n   * @returns {Dat} Returns this.\r\n   * @description UTC version of {@link Dat#set}.\r\n   *\r\n   * @example\r\n   * const date = new Dat(new Date('1999-12-31T23:59:59.999Z'));\r\n   *\r\n   * date.setUTC('ccc', 998).getUTC('ccc'); // 998\r\n   * date.setUTC({\r\n   *   s: 58,\r\n   *   m: 58,\r\n   *   h: 22\r\n   * });\r\n   *\r\n   * date.getUTC('s'); // 58\r\n   * date.getUTC('m'); // 58\r\n   * date.getUTC('h'); // 23\r\n   */\r\n  setUTC(what, number) {\r\n    const date = this.$;\r\n\r\n    if (arguments.length >= 2) {\r\n      what = { [what]: number };\r\n    }\r\n\r\n    what = new Super(what).$;\r\n\r\n    iterate(what, (value, what) => {\r\n      setSwitcher(what, [date, value, 'setUTC']);\r\n    });\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @method Dat#setUTC\r\n   * @public\r\n   * @param {Number} [time] - Time to set.\r\n   * @returns {Dat|Number} - If the time argument is present this is returned otherwise the time is returned.\r\n   * @description Synonym for both\r\n   * [Date#getTime]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Date/getTime} and\r\n   * [Date#setTime]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Date/setTime}.\r\n   */\r\n  time(time) {\r\n    const date = this.$;\r\n\r\n    if (arguments.length) {\r\n      date.setTime(time);\r\n    }\r\n\r\n    return date.getTime();\r\n  }\r\n\r\n  toISOString() {\r\n    return this.$.toISOString();\r\n  }\r\n\r\n  toLocaleString() {\r\n    return this.$.toLocaleString();\r\n  }\r\n\r\n  toString() {\r\n    return this.$.toString();\r\n  }\r\n\r\n  valueOf() {\r\n    return this.$.valueOf();\r\n  }\r\n}\r\ndefineProperties(Dat.prototype, {\r\n  [Symbol.toStringTag]: 'Dat'\r\n});\r\n\r\nconstructors[1].push({\r\n  check: isDate,\r\n  cls: Dat\r\n});\r\n\r\n/**\r\n * @function now\r\n * @public\r\n * @returns {Number} Number of milliseconds.\r\n * @see https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Date/now\r\n * @description Synonym for\r\n * [Date.now]{@link https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Date/now}.\r\n */\r\nexport function now() {\r\n  return Date.now();\r\n}\r\n\r\n/**\r\n * @function date\r\n * @public\r\n * @param {DateLike} [date = new Date()] - Date-like value that is passed to the Date constructor.\r\n * @returns {Dat} New instance of Dat.\r\n * @description Synonym for new Dat(new Date(date));\r\n */\r\nexport function date(date) {\r\n  if (!arguments.length) {\r\n    return new Dat(new Date());\r\n  }\r\n\r\n  date = new Super(date).$;\r\n\r\n  return new Dat(new Date(date));\r\n}\r\n\r\nexport default Dat;\r\n","/**\r\n * @module helpers/constructURL\r\n * @private\r\n * @description Exports constructURL method.\r\n */\r\n\r\nimport Arr from '../Arr';\r\nimport Str from '../Str';\r\nimport { switcher } from '../Switcher';\r\nimport { isArray, isObject, isPlainObject } from './checkTypes';\r\nimport { iterate } from './iterate';\r\n\r\n/**\r\n * @type {RegExp}\r\n * @description Absolute URL pattern.\r\n */\r\nconst absoluteURLRegexp = /^(([a-z][a-z\\d\\+\\-\\.]*:)?\\/\\/|data:[a-z]+\\/[a-z]+;base64,)/i;\r\nconst querySwitcher = switcher('call', () => new Arr([]))\r\n  .case(isArray, (prefix, query) => {\r\n    let queryParams = new Arr([]);\r\n\r\n    iterate(query, (value) => {\r\n      if (isPlainObject(value) || isArray(value)) {\r\n        queryParams = queryParams.concat(querySwitcher(value, [`${ prefix }[]`]));\r\n\r\n        return;\r\n      }\r\n\r\n      queryParams.push({\r\n        param: `${ prefix }[]`,\r\n        value\r\n      });\r\n    });\r\n\r\n    return queryParams.$;\r\n  })\r\n  .case(isPlainObject, (prefix, query) => {\r\n    let queryParams = new Arr([]);\r\n\r\n    iterate(query, (value, param) => {\r\n      if (isPlainObject(value) || isArray(value)) {\r\n        queryParams = queryParams.concat(querySwitcher(value, [prefix ? `${ prefix }[${ param }]` : param]));\r\n\r\n        return;\r\n      }\r\n\r\n      queryParams.push({\r\n        param: prefix ? `${ prefix }[${ param }]` : param,\r\n        value: isObject(value) ? JSON.stringify(value) : String(value)\r\n      });\r\n    });\r\n\r\n    return queryParams.$;\r\n  });\r\n\r\n/**\r\n * @function constructURL\r\n * @param {String} baseURL - BaseURL of the output URL.\r\n * @param {String} url - Main part of the output URL.\r\n * @param {Object} params - Params to replace in the url expressions like \":param\".\r\n * @param {Object} query - Object with query params.\r\n * @param {Object} [hash = ''] - URL hash.\r\n * @param {Object} [encodeOptions = {}] - If you need to encode something.\r\n * @param {Object} [encodeOptions.params = true] - If you need to encode params.\r\n * @param {Object} [encodeOptions.query = true] - If you need to encode query params.\r\n * @returns {String} Constructed URL.\r\n * @description Function for constructing URL from the base URL, URL, params and query params.\r\n */\r\nexport default (baseURL, url, params, query, hash = '', encodeOptions = {}) => {\r\n  const {\r\n    params: encodeParams = true,\r\n    query: encodeQuery = true\r\n  } = encodeOptions;\r\n  let URL = isAbsolute(url)\r\n    ? url\r\n    : `${ String(baseURL).replace(/\\/+$/, '') }/${ String(url).replace(/^\\/+/, '') }`;\r\n\r\n  iterate(params, (value, param) => {\r\n    URL = new Str(URL).replaceString(`:${ param }`, encode(value, encodeParams)).$;\r\n  });\r\n\r\n  const queryParams = querySwitcher(query, ['']);\r\n\r\n  if (queryParams.length) {\r\n    URL += (URL.indexOf('?') === -1 ? '?' : '&') + queryParams\r\n      .map(({ param, value }) => `${ encode(param, encodeQuery) }=${ encode(value, encodeQuery) }`)\r\n      .join('&');\r\n  }\r\n\r\n  return `${ URL }${ hash ? `#${ hash }` : '' }`;\r\n};\r\n\r\n/**\r\n * @function isAbsolute\r\n * @param {String} url - URL to check if it is absolute or not.\r\n * @returns {Boolean} If the argument URL is absolute or not.\r\n */\r\nfunction isAbsolute(url) {\r\n  return absoluteURLRegexp.test(url);\r\n}\r\n\r\n/**\r\n * @function encode\r\n * @param {String} string - String to encode using encodeURIComponent.\r\n * @param {Boolean} isEncoded - If the string should be encoded.\r\n * @returns {String} Encoded string.\r\n */\r\nfunction encode(string, isEncoded) {\r\n  return isEncoded ? encodeURIComponent(string) : string;\r\n}\r\n","/**\n * @module Fetch\n * @private\n * @mixin\n * @description Exports Fetch class.\n */\n\nimport Promise from './Promise';\nimport Super from './Super';\nimport Arr from './Arr';\nimport Str from './Str';\nimport {\n  isArray, isFunction, isString,\n  assign, Symbol, validate, iterate, defineProperties\n} from './helpers';\nimport constructURL from './helpers/constructURL';\nimport parseHeaders from './helpers/parseHeaders';\nimport transformData from './helpers/transformData';\n\n/**\n * @typedef {'get'|'post'|'delete'|'head'|'put'|'patch'} FetchMethod\n * @public\n */\n\n/**\n * @typedef {Object} FetchConfig\n * @public\n * @property {Array.<AfterMiddleware|FetchErrorAfterMiddleware>} [after]\n * @property {Object} [auth]\n * @property {String} [auth.username]\n * @property {String} [auth.password]\n * @property {String} [baseURL]\n * @property {Array.<BeforeMiddleware|FetchErrorBeforeMiddleware>} [before]\n * @property {*} [data]\n * @property {Object.<String, String[]>} [headers]\n * @property {FetchMethod} [method]\n * @property {Object} [params]\n * @property {Object} [query]\n * @property {String} [responseType]\n * @property {Number} [timeout]\n * @property {String} [url]\n * @property {Boolean} [withCredentials]\n */\n\n/**\n * @typedef {Object} FetchResponse\n * @public\n * @property {FetchConfig} config\n * @property {*} data\n * @property {Object.<String, String>} headers\n * @property {Number} status\n * @property {String} statusText\n * @property {XMLHttpRequest} xhr\n */\n\n/**\n * @callback FetchAfterMiddleware\n * @public\n * @param {FetchResponse} config - Fetch response.\n */\n\n/**\n * @callback FetchErrorAfterMiddleware\n * @public\n * @param {Error|*} err - Thrown error.\n * @param {FetchResponse} config - Fetch response.\n */\n\n/**\n * @callback FetchBeforeMiddleware\n * @public\n * @param {FetchConfig} config - Fetch config.\n */\n\n/**\n * @callback FetchErrorBeforeMiddleware\n * @public\n * @param {Error|*} err - Thrown error.\n * @param {FetchConfig} config - Fetch config.\n */\n\n/**\n * @callback FetchConfigFunction\n * @public\n * @param {FetchConfig} config\n */\n\nconst defaults = {\n  after: [],\n  auth: {\n    username: '',\n    password: ''\n  },\n  baseURL: global.location.origin,\n  before: [],\n  data: null,\n  headers: {},\n  method: 'get',\n  params: {},\n  query: {},\n  responseType: '',\n  timeout: 0,\n  url: '',\n  withCredentials: false\n};\nconst uploadMethods = new Arr(['post', 'put']);\n\n/**\n * @class Fetch\n * @extends Function\n * @public\n * @param {FetchConfig} [config = {}] - A number to wrap.\n * @returns {Fetch} Instance of Fetch.\n * An instance of Fetch is a function that simply calls #request with the same arguments.\n * @description Class for fetching data.\n *\n * @example\n * const fetch = new Fetch();\n *\n * fetch('/data').then((res) => {\n *   console.log(res);\n * });\n */\nexport class Fetch extends Function {\n  constructor(config = {}) {\n    super();\n\n    function fetch() {\n      return fetch.request.apply(fetch, arguments);\n    }\n\n    const conf = new Super({}).deepAssign(defaults, config).$;\n\n    conf.before.push(fetchBeforeMiddleware);\n\n    /**\n     * @member {FetchConfig} Fetch#$$\n     * @type {FetchConfig}\n     * @public\n     * @description Fetch config.\n     */\n    Object.defineProperty(fetch, '$$', { value: conf });\n    Object.setPrototypeOf(fetch, Fetch.prototype);\n\n    return fetch;\n  }\n\n  /**\n   * @method Fetch#after\n   * @public\n   * @param {FetchAfterMiddleware|FetchErrorAfterMiddleware} middleware - Middleware to add.\n   * @param {Boolean|*} [afterAll = true] - Boolean parameter where to put the middleware.\n   * Truthy parameter stands for \"to the end\" and falsey for \"to the beginning\".\n   * @returns {Fetch} Returns this.\n   * @description Middleware that is called after the request.\n   * If the middleware has 2 or less arguments it's treated as success middleware otherwise as an error one.\n   * If the middleware returns a promise it becomes a part of the middleware chain.\n   *\n   * @example\n   * const fetch = new Fetch()\n   *   .after((err, res) => {\n   *     console.log(err);\n   *\n   *     throw err;\n   *   })\n   *   .after((res) => {\n   *     res.json = D(res.data).parseJSON():\n   *   });\n   */\n  after(middleware, afterAll = true) {\n    validate([middleware], ['function'], 'Fetch#after');\n\n    const { after } = this.$$;\n\n    if (afterAll) {\n      after.push(middleware);\n    } else {\n      after.unshift(middleware);\n    }\n\n    return this;\n  }\n\n  /**\n   * @method Fetch#before\n   * @public\n   * @param {FetchBeforeMiddleware|FetchErrorBeforeMiddleware} middleware - Middleware to add.\n   * @param {Boolean|*} [beforeAll = true] - Boolean parameter where to put the middleware.\n   * Truthy parameter stands for \"to the beginning\" and falsey for \"to the end\".\n   * @returns {Fetch} Returns this.\n   * @description Middleware that is called before the request.\n   * If the middleware has 2 or less arguments it's treated as success middleware otherwise as an error one.\n   * If the middleware returns a promise it becomes a part of the middleware chain.\n   *\n   * @example\n   * const fetch = new Fetch()\n   *   .before((err, req) => {\n   *     console.log(err);\n   *\n   *     throw err;\n   *   })\n   *   .before((req) => {\n   *     if (req.url === '/veryLongRequest') {\n   *       req.timeout = 30000;\n   *     }\n   *   });\n   */\n  before(middleware, beforeAll = true) {\n    validate([middleware], ['function'], 'Fetch#before');\n\n    const { before } = this.$$;\n\n    if (beforeAll) {\n      before.unshift(middleware);\n    } else {\n      before.push(middleware);\n    }\n\n    return this;\n  }\n\n  /**\n   * @method Fetch#config\n   * @public\n   * @param {String|FetchConfig|FetchConfigFunction} [property] - If it's a function\n   * it's called with the fetch config argument, if it's a string the value argument\n   * is used for assigning this property to the fetch config\n   * otherwise it's assigned to the fetch config.\n   * @param {*} [value] - See the property argument.\n   * @returns {Fetch|FetchConfig} If the argument is present this is returned otherwise the fetch config is returned.\n   * @description Method for getting and setting config.\n   *\n   * @example\n   * const fetch = new Fetch();\n   *\n   * fetch.config({ baseURL: 5000 });\n   * fetch.config().timeout; // 5000\n   *\n   * fetch.config((config) => {\n   *   config.baseURL += '/api';\n   * });\n   */\n  config(property, value) {\n    const conf = this.$$;\n\n    if (!arguments.length) {\n      return conf;\n    }\n\n    if (isFunction(property)) {\n      property(conf);\n    } else {\n      if (arguments.length >= 2) {\n        property = { [property]: value };\n      }\n\n      new Super(conf).deepAssign(property);\n    }\n\n    return this;\n  }\n\n  /**\n   * @method Fetch#delete\n   * @public\n   * @param {String} [url] - See {@link Fetch#request}.\n   * @param {FetchConfig} [config] - See {@link Fetch#request}.\n   * @returns {Promise.<FetchResponse, Error>} See {@link Fetch#request}.\n   * @description Shorthand for #request for delete requests.\n   *\n   * @example\n   * new Fetch().delete('/data').then((res) => {\n   *   console.log(res);\n   * });\n   */\n  delete(url, config = {}) {\n    if (!isString(url)) {\n      config = url;\n      url = undefined;\n    }\n\n    return this.request(url, assign({ method: 'delete' }, config));\n  }\n\n  /**\n   * @method Fetch#get\n   * @public\n   * @param {String} [url] - See {@link Fetch#request}.\n   * @param {FetchConfig} [config] - See {@link Fetch#request}.\n   * @returns {Promise.<FetchResponse, Error>} See {@link Fetch#request}.\n   * @description Shorthand for #request for get requests.\n   *\n   * @example\n   * new Fetch().get('/data').then((res) => {\n   *   console.log(res);\n   * });\n   */\n  get(url, config = {}) {\n    if (!isString(url)) {\n      config = url;\n      url = undefined;\n    }\n\n    return this.request(url, assign({ method: 'get' }, config));\n  }\n\n  /**\n   * @method Fetch#head\n   * @public\n   * @param {String} [url] - See {@link Fetch#request}.\n   * @param {FetchConfig} [config] - See {@link Fetch#request}.\n   * @returns {Promise.<FetchResponse, Error>} See {@link Fetch#request}.\n   * @description Shorthand for #request for head requests.\n   *\n   * @example\n   * new Fetch().head('/data').then((res) => {\n   *   console.log(res);\n   * });\n   */\n  head(url, config = {}) {\n    if (!isString(url)) {\n      config = url;\n      url = undefined;\n    }\n\n    return this.request(url, assign({ method: 'head' }, config));\n  }\n\n  /**\n   * @method Fetch#headers\n   * @public\n   * @param {String|Object.<String, String|String[]>} header - A header string or an object of the following format:\n   * { [header]: [value1, value2, ...] }.\n   * @param {String|String[]} [value] - Header value. If the first argument is a string\n   * this has to be a header value or an array of header values.\n   * @returns {Fetch} Returns this.\n   * @description Method for setting request headers.\n   *\n   * @example\n   * const fetch = new Fetch()\n   *   .headers('Header1', 'Value')\n   *   .headers('Header2', ['Value1', 'Value2'])\n   *   .headers({\n   *     Header3: ['Value1', 'Value2']\n   *   });\n   */\n  headers(header, value) {\n    const { headers } = this.$$;\n\n    if (arguments.length >= 2) {\n      header = { [header]: value };\n    }\n\n    iterate(header, (value, header) => {\n      const array = headers[header] || [];\n      const toPush = isArray(value) ? value : [value];\n\n      (headers[header] = array).push.apply(array, toPush);\n    });\n\n    return this;\n  }\n\n  /**\n   * @method Fetch#instance\n   * @public\n   * @param {FetchConfig} [config] - New config if needed.\n   * @returns {Fetch} New instance of Fetch.\n   * @description Method for creating new fetch instances based on already existent.\n   *\n   * @example\n   * const mainFetch = new Fetch({\n   *   baseURL: '//other.domain.com/api',\n   *   withCredentials: true\n   * });\n   *\n   * const longFetch = mainFetch.instance({\n   *   timeout: 10000\n   * });\n   */\n  instance(config = {}) {\n    const dataConfig = new Super(config).hasOwn('data')\n      ? { data: config.data }\n      : {};\n\n    delete config.data;\n\n    const conf = new Super({})\n      .deepAssign(this.$$, config)\n      .assign(dataConfig)\n      .$;\n\n    if (conf.before.indexOf(fetchBeforeMiddleware) === -1) {\n      conf.before.push(fetchBeforeMiddleware);\n    }\n\n    return new Fetch(conf);\n  }\n\n  /**\n   * @method Fetch#patch\n   * @public\n   * @param {String} [url] - See {@link Fetch#request}.\n   * @param {*} [data] - Additional parameter for uploading data.\n   * @param {FetchConfig} [config] - See {@link Fetch#request}.\n   * @returns {Promise.<FetchResponse, Error>} See {@link Fetch#request}.\n   * @description Shorthand for #request for head requests.\n   *\n   * @example\n   * new Fetch().patch('/data', { user: 'John' }).then((res) => {\n   *   console.log(res);\n   * });\n   */\n  patch(url, data = {}, config = {}) {\n    if (arguments.length && !isString(url)) {\n      config = data;\n      data = url;\n      url = undefined;\n    }\n\n    return this.request(url, assign({ method: 'patch', data }, config));\n  }\n\n  /**\n   * @method Fetch#post\n   * @public\n   * @param {String} [url] - See {@link Fetch#request}.\n   * @param {*} [data] - Additional parameter for uploading data.\n   * @param {FetchConfig} [config] - See {@link Fetch#request}.\n   * @returns {Promise.<FetchResponse, Error>} See {@link Fetch#request}.\n   * @description Shorthand for #request for head requests.\n   *\n   * @example\n   * new Fetch().post('/data', { user: 'John' }).then((res) => {\n   *   console.log(res);\n   * });\n   */\n  post(url, data = {}, config = {}) {\n    if (arguments.length && !isString(url)) {\n      config = data;\n      data = url;\n      url = undefined;\n    }\n\n    return this.request(url, assign({ method: 'post', data }, config));\n  }\n\n  /**\n   * @method Fetch#put\n   * @public\n   * @param {String} [url] - See {@link Fetch#request}.\n   * @param {*} [data] - Additional parameter for uploading data.\n   * @param {FetchConfig} [config] - See {@link Fetch#request}.\n   * @returns {Promise.<FetchResponse, Error>} See {@link Fetch#request}.\n   * @description Shorthand for #request for head requests.\n   *\n   * @example\n   * new Fetch().put('/data', { user: 'John' }).then((res) => {\n   *   console.log(res);\n   * });\n   */\n  put(url, data = {}, config = {}) {\n    if (arguments.length && !isString(url)) {\n      config = data;\n      data = url;\n      url = undefined;\n    }\n\n    return this.request(url, assign({ method: 'put', data }, config));\n  }\n\n  /**\n   * @method Fetch#request\n   * @public\n   * @param {String} [url] - URL for the request.\n   * @param {FetchConfig} [config] - Additional config for this particular request.\n   * @returns {Promise.<FetchResponse, Error>} Promise that is resolved with the request response.\n   * @description Main function for making requests. All request methods call this method\n   * including the fetch instance itself.\n   *\n   * @example\n   * const fetch = new Fetch();\n   *\n   * fetch.request('/data', { timeout: 1000 }).then((res) => {\n   *   console.log(res);\n   * });\n   *\n   * fetch.request({ timeout: 1000 }).then((res) => {\n   *   console.log(res);\n   * });\n   *\n   * fetch.request().then((res) => {\n   *   console.log(res);\n   * });\n   */\n  request(url, config = {}) {\n    if (arguments.length === 1 && !isString(url)) {\n      config = url;\n    }\n\n    const dataConfig = new Super(config).hasOwn('data')\n      ? { data: config.data }\n      : {};\n    const urlConfig = isString(url)\n      ? { url }\n      : {};\n\n    delete config.data;\n\n    const conf = new Super(this.$$)\n      .deepClone()\n      .deepAssign(urlConfig, config)\n      .assign(dataConfig)\n      .$;\n\n    let xhr;\n    let promise = Promise.resolve();\n\n    iterate(conf.before, (middleware) => {\n      promise = promise.then(() => {\n        if (middleware.length >= 2) {\n          return Promise.resolve();\n        }\n\n        return new Promise((resolve) => {\n          resolve(middleware(conf));\n        });\n      }, (err) => {\n        if (middleware.length < 2) {\n          return Promise.reject(err);\n        }\n\n        return new Promise((resolve) => {\n          resolve(middleware(err, conf));\n        });\n      });\n    });\n\n    promise = promise.then(() => new Promise((resolve, reject) => {\n      const {\n        after,\n        auth: {\n          username,\n          password\n        },\n        data,\n        headers,\n        method,\n        onprogress,\n        responseType,\n        timeout,\n        url,\n        withCredentials\n      } = conf;\n\n      xhr = new XMLHttpRequest();\n\n      xhr.open(method, url, true, username, password);\n\n      iterate(headers, (value, header) => {\n        xhr.setRequestHeader(header, value);\n      });\n\n      if (onprogress) {\n        if (uploadMethods.indexOfStrict(method) === -1) {\n          xhr.onprogress = onprogress;\n        } else {\n          xhr.upload.onprogress = onprogress;\n        }\n      }\n\n      xhr.onabort = () => {\n        reject(new Error('Request was aborted'));\n\n        xhr = null;\n      };\n\n      xhr.onerror = () => {\n        reject(new Error('Network error'));\n\n        xhr = null;\n      };\n\n      xhr.ontimeout = () => {\n        reject(new Error('Request time exceeded'));\n\n        xhr = null;\n      };\n\n      xhr.onreadystatechange = () => {\n        if (!xhr || !xhr.status || xhr.readyState !== 4) {\n          return;\n        }\n\n        const response = {\n          config: conf,\n          data: !responseType || responseType === 'text' ? xhr.responseText : xhr.response,\n          headers: parseHeaders(xhr.getAllResponseHeaders()),\n          status: xhr.status === 1223 ? 204 : xhr.status,\n          statusText: xhr.status === 1223 ? 'No Content' : xhr.statusText,\n          xhr\n        };\n\n        let promise = Promise.resolve();\n\n        iterate(after, (middleware) => {\n          promise = promise.then(() => {\n            if (middleware.length >= 2) {\n              return Promise.resolve();\n            }\n\n            return new Promise((resolve) => {\n              resolve(middleware(response));\n            });\n          }, (err) => {\n            if (middleware.length < 2) {\n              return Promise.reject(err);\n            }\n\n            return new Promise((resolve) => {\n              resolve(middleware(err, response));\n            });\n          });\n        });\n\n        resolve(promise\n          .then(() => response)\n          .catch((err) => {\n            try {\n              err.response = response;\n            } catch (e) {\n              throw err;\n            }\n\n            throw err;\n          })\n        );\n      };\n\n      xhr.responseType = responseType;\n      xhr.timeout = Number(timeout) || 0;\n      xhr.withCredentials = !!withCredentials;\n\n      xhr.send(data);\n    }));\n\n    promise.abort = function abort() {\n      if (xhr) {\n        xhr.abort();\n      }\n\n      return this;\n    };\n\n    return promise;\n  }\n}\n\ndefineProperties(Fetch.prototype, {\n  [Symbol.toStringTag]: 'Fetch'\n});\n\n/**\n * @function fetchBeforeMiddleware\n * @private\n * @param {FetchConfig} config\n * @description Built-in before middleware for url, data, method, headers construction.\n */\nfunction fetchBeforeMiddleware(config) {\n  const {\n    baseURL,\n    data,\n    headers,\n    method,\n    params,\n    query,\n    url\n  } = config;\n  const METHOD = method.toUpperCase();\n\n  config.method = METHOD;\n  config.url = constructURL(baseURL, url, params, query);\n  config.data = transformData(data, METHOD, headers);\n  config.headers = new Super(headers).object((headers, values, header) => {\n    header = new Str(header)\n      .toCapitalCase()\n      .replace(/\\s+/g, '-')\n      .$;\n\n    headers[header] = values.join(', ');\n  }).$;\n}\n\n/**\n * @const {Fetch} fetch\n * @type {Fetch}\n * @public\n * @description Empty instance of Fetch.\n */\nexport const fetch = new Fetch();\n\nexport default Fetch;\n","/**\n * @module Elem\n * @private\n * @mixin\n * @description Exports Elem class.\n */\n\nimport Super from './Super';\nimport Arr, { array } from './Arr';\nimport { blob } from './BlobObject';\nimport Fetch from './Fetch';\nimport Promise from './Promise';\nimport Str from './Str';\nimport { switcher } from './Switcher';\nimport constructors from './constants/constructors';\nimport appliedRegExps from './constants/appliedRegExps';\nimport elements from './constants/elements';\nimport { canvasGetMethods, canvasRestMethods } from './constants/canvasMethods';\nimport {\n  isArray, isArrayLike, isElement, isFunction,\n  isInteger, isNumber, isNull, isString,\n  assign, dynamicDefineProperties, defineProperties, toArray,\n  validate, toStringTag, iterate, Symbol\n} from './helpers';\n\n/**\n * @typedef {String} ElemEventString\n * @public\n * @description A string containing events separated by a comma with zero or more spaces or just spaces.\n */\n\n/**\n * @callback ElemValueCallback\n * @public\n * @param {String} value - Old value.\n * @param {Elem} elem - Current element.\n * @param {Number} index - Index in the set of the elements.\n */\n\n/**\n * @callback ElemSetOfCallback\n * @public\n * @param {Element} created - Created element.\n * @param {*} value - Value of the iterated element in the object.\n * @param {Key} key - Key of the iterated element in the object.\n * @param {*} object - Object that is iterated over.\n * @param {Element} elem - Current element.\n * @param {Number} index - Index of the current element.\n */\n\n/**\n * @callback ValidateCallback\n * @public\n * @param {*} value - Element value.\n * @param {Element} elem - Element to validate.\n * @param {Number} index - Index of the element.\n */\n\n/**\n * @callback CtxCallback\n * @public\n * @param {CanvasRenderingContext2D} ctx - Canvas rendering context.\n */\n\n/**\n * @callback Listener\n * @public\n * @param {Event} e - Fired event.\n * @param {Element} elem - Element on which the listener was called.\n * @param {Number} index - Index of the element on which the listener was called.\n */\n\n/**\n * @callback ElemRemoveListeners\n * @public\n * @param {...ElemEventString} events - If at least one argument present only removes event listeners specified\n * by the events in the arguments.\n */\n\nconst nativeDocument = global.document;\nconst emptyDiv = nativeDocument.createElement('div');\nconst eventSeparator = /, *| +/;\nconst textProperty = new Super(Node.prototype).propertyDescriptor('textContent') ? 'textContent' : 'innerText';\nconst classes = {};\nconst attrs = {};\nconst windowsDwayneData = new Arr([]);\nconst inputElements = 'input, select, textarea, datalist, keygen, output';\nconst dataURLFetch = new Fetch({ responseType: 'arraybuffer' });\nconst refSwitcher = switcher('strictEquals', 'href')\n  .case(\n    ['img', 'script', 'iframe', 'audio', 'video'],\n    'src'\n  )\n  .case(\n    'form',\n    'action'\n  );\nconst filterSwitcher = switcher('call', (selector) => selector)\n  .case(\n    isString,\n    (selector) =>\n      (elem) => new Elem(elem).is(selector)\n  )\n  .case(\n    [isArray, isElem],\n    (elems) => {\n      elems = new Arr(elems);\n\n      return (elem) => elems.indexOf(elem) !== -1;\n    }\n  );\nconst innerSwitcher = switcher('strictEquals', 0)\n  .case('padding-box', (paddings) => paddings)\n  .case('border-box', (paddings, borders) => paddings + borders);\nconst outerSwitcher = switcher('strictEquals', (borders, paddings) => borders + paddings)\n  .case('padding-box', (borders) => borders)\n  .case('border-box', 0);\n\n/**\n * @class Elem\n * @extends Arr\n * @public\n * @param {Element|Element[]} [elem = []] - An element or an array of elements to wrap.\n * @returns {Elem} Instance of Elem.\n * @description Wrap of an elements set. Also has all methods from from\n * [CanvasRenderingContext2D]{@link https://developer.mozilla.org/en/docs/Web/API/CanvasRenderingContext2D}.\n * Getters methods return the same as methods from CanvasRenderingContext2D and the rest return this.\n * Work for the first canvas element in the set.\n *\n * @example\n * new Elem(document.body);\n * new Elem(document.querySelectorAll('.cls'));\n * new Elem(document.getElementsByClassName('cls'));\n */\nexport class Elem extends Arr {\n  constructor(elem = []) {\n    super((() => {\n      let element = elem;\n\n      if (isArrayLike(element) && (\n        isWindow(element) ||\n        isHTMLDocument(element) ||\n        isElement(element)\n      )) {\n        element = [element];\n      }\n\n      return new Arr(toArray(new Super(element).$, true)).object((elems, elem) => {\n        if ((isElement(elem) || isWindow(elem) || isHTMLDocument(elem) || toStringTag(elem) === 'CSSStyleRule') && elems.indexOf(elem) === -1) {\n          return elems.push(elem);\n        }\n\n        if (isElem(elem)) {\n          elems.push.apply(elems, elem.$);\n        }\n      }, []).$;\n    })());\n\n    this.$$ = elem;\n\n    this.forEach(addDwayneData);\n\n    /**\n     * @member {Element[]} Elem#$\n     * @type {Element[]}\n     * @public\n     * @description Constructed element set.\n     */\n\n    /**\n     * @member {*} Elem#$$\n     * @type {*}\n     * @public\n     * @description Initial element set.\n     */\n  }\n\n  /**\n   * @method Elem#add\n   * @public\n   * @param {...(String|Elem|Element|Element[])} elements - Each argument is a selector, or Elem, or Element, or array of Elements.\n   * @returns {Elem} Returns this.\n   * @description Method for adding new elements to the set.\n   *\n   * @example\n   *\n   */\n  add(...elements) {\n    iterate(arguments, (elem) => {\n      toFind(elem).forEach((elem) => {\n        if (this.indexOf(elem) === -1) {\n          this.push(elem);\n        }\n      });\n    });\n\n    return this;\n  }\n\n  /**\n   * @method Elem#addClass\n   * @public\n   * @param {...String} classes - Classes to add.\n   * @returns {Elem} Returns this.\n   * @description Method for adding classes to the all the elements in the set.\n   *\n   * @example\n   * elem.addClass('red', 'round');\n   */\n  addClass(...classes) {\n    return this.forEach((elem) => {\n      const list = elem.classList;\n\n      list.add.apply(list, classes);\n    });\n  }\n\n  /**\n   * @method Elem#addHTML\n   * @public\n   * @param {String} html - HTML to add.\n   * @returns {Elem} Returns this.\n   * @description Method for adding HTML to the all elements in the set.\n   *\n   * @example\n   * elem.addHTML('&lt;div&gt;1&lt;/div&gt;');\n   */\n  addHTML(html) {\n    return this.forEach((elem) => {\n      elem.innerHTML += html;\n    });\n  }\n\n  /**\n   * @method Elem#addRule\n   * @public\n   * @param {String} name - Name of the rule.\n   * @param {String} selector - Selector for the rule\n   * @param {Object.<String, String>} style - Style for the selector.\n   * @returns {Elem} Returns this.\n   * @description Method for adding css styles into the first style tag in the set.\n   * Note: style element should be inside the document.\n   *\n   * @example\n   * style.addRule('img-size', 'img.square', {\n   *   width: '40px !important',\n   *   height: '40px !important'\n   * });\n   */\n  addRule(name, selector, style) {\n    this.some((elem) => {\n      if (getName(elem) === 'style') {\n        const { sheet } = elem;\n        const { length } = sheet.cssRules;\n        const rules = new Super(style).word((value, property) => (\n          `${ new Str(property).toHyphenCase() }: ${ value };\\n`\n        ));\n\n        sheet.insertRule(\n          `${ selector } {${ rules && '\\n' }${ rules }}`,\n          length\n        );\n        sheet.cssRules[length].dwayneData = { name };\n\n        return true;\n      }\n    });\n\n    return this;\n  }\n\n  /**\n   * @method Elem#addText\n   * @public\n   * @param {String} text - Text to add.\n   * @returns {Elem} Returns this.\n   * @description Method for adding text to the all elements in the set.\n   *\n   * @example\n   * elem.addText('123');\n   */\n  addText(text) {\n    return this.forEach((elem) => {\n      elem.appendChild(nativeDocument.createTextNode(text));\n    });\n  }\n\n  /**\n   * @method Elem#apply\n   * @public\n   * @param {...String} strings - Strings to apply.\n   * @returns {Elem} Returns this.\n   * @description Method that is a shorthand for many other methods.\n   * All shorthands can be separated with space and written within one string.\n   *\n   * @example\n   * elem.apply(\n   *   '#id .c1 .c2 @border(1px solid black) $disabled $attr(some value) *(Click me!)'\n   * );\n   * // shorthand for\n   * // elem\n   * //   .id('id')\n   * //   .addClass('c1', 'c2')\n   * //   .border('1px solid black')\n   * //   .disabled()\n   * //   .attr('attr', 'some value')\n   * //   .text('Click me!');\n   * // There is a full list of possible types of syntax below...\n   *\n   * elem.apply('#id');                         // shorthand for elem.id('id');\n   * elem.apply('.c1 .c2');                     // shorthand for elem.addClass('c1', 'c2');\n   * elem.apply('-.c1 -.c2');                   // shorthand for elem.removeClass('c1', 'c2');\n   * elem.apply('-@float -@display');           // shorthand for elem.removeCSS('float', 'display');\n   * elem.apply('-$a1 -$a2');                   // shorthand for elem.removeAttr('a1', 'a2');\n   * elem.apply('*(some text)');                // shorthand for elem.text('set text');\n   * elem.apply('&(&lt;div&gt;1&lt;/div&gt;)'); // shorthand for elem.html('&lt;div&gt;1&lt;/div&gt;');\n   * elem.apply('@float(right)');               // shorthand for elem.css('float', 'right');\n   * elem.apply('@transform(scale(5px))');      // shorthand for elem.css('float', 'right');\n   * elem.apply('@margin(2px 2px)');            // shorthand for elem.css('margin', '2px 2px');\n   * elem.apply('@marginLeft(2px)');            // shorthand for elem.css('marginLeft', '2px 2px');\n   * elem.apply('@margin-left(2px)');           // shorthand for elem.css('margin-left', '2px 2px');\n   * elem.apply('$attr(some value)');           // shorthand for elem.attr('attr', 'some value');\n   * elem.apply('$attr');                       // shorthand for elem.attr('attr', '');\n   */\n  apply(...strings) {\n    let applied;\n    let setApplied;\n    let callback;\n    let name;\n    let np1;\n    let slice;\n\n    new Str(new Arr(arguments).join(' '))\n      .split(/(\\s+)/)\n      .forEach((string) => {\n        if (!applied) {\n          np1 = string.slice(0, 1);\n          callback = appliedRegExps[np1];\n          slice = 1;\n\n          if (callback && !isFunction(callback)) {\n            callback = callback[string.slice(1, 2)];\n            slice = 2;\n          }\n\n          if (/^\\s+$/.test(string) || !callback) {\n            return;\n          }\n\n          name = string.slice(slice).match(/^[^()]+/);\n\n          if (!name && (np1 !== '*' && np1 !== '&')) {\n            return;\n          }\n\n          applied = {\n            name: name ? name[0] : '',\n            args: string.slice(slice + (name ? name[0] : '').length),\n            callback\n          };\n\n          setApplied = true;\n        }\n\n        if (!setApplied) {\n          applied.args += string;\n        }\n\n        if (!applied.args || /^\\([\\s\\S]+\\)$/.test(applied.args)) {\n          applied.callback(this, applied.name, applied.args.replace(/^\\(|\\)$/g, ''));\n          applied = null;\n        }\n\n        setApplied = false;\n      });\n\n    return this;\n  }\n\n  /**\n   * @method Elem#attr\n   * @public\n   * @param {String|Object.<String, String|ElemValueCallback>} [attr] - Name of the attribute to get or\n   * an object of the format { [attrName]: value, ... } to set attributes.\n   * @param {String|ElemValueCallback} [value] - If the first argument is a string\n   * it should be a value to set for that attribute.\n   * @returns {Super|String|Elem} If no arguments passed, D-Wrap of attributes of the first element in the set\n   * returned, if 1 string argument is passed the value of the attribute of the first element in the set\n   * returned otherwise returns this.\n   * @description Method for getting/setting attributes.\n   *\n   * @example\n   * elem.attr('attr1', 'value1'); // attribute attr1 set to 'value1' and this returned\n   * elem.attr('attr1');           // 'value1'\n   * elem.attr({\n   *   attr1: 'value3',            // attribute attr1 set to 'value3'\n   *   attr2: 'value2'             // attribute attr2 set to 'value2'\n   * });                           // this returned\n   * elem.attr().$;                // { attr1: 'value3', attr2: 'value2' }\n   */\n  attr(attr, value) {\n    const elem = getElem(this);\n\n    if (!arguments.length) {\n      return new Super(elem.attributes).object((o, attr) => {\n        o[attr.name] = attr.value;\n      });\n    }\n\n    if (arguments.length <= 1 && isString(attr)) {\n      return elem.getAttribute(attr);\n    }\n\n    if (arguments.length >= 2) {\n      attr = { [attr]: value };\n    }\n\n    return this.forEach((elem, index) => {\n      new Super(attr).forEach((value, key) => {\n        elem.setAttribute(key, isFunction(value) ? value(elem.getAttribute(key), elem, index) : value);\n      });\n    });\n  }\n\n  /**\n   * @method Elem#blob\n   * @public\n   * @param {Object} [options = {}] - Options that are passed into {@link blob}.\n   * @returns {Promise.<BlobObject>} New instance of promise.\n   * @description Returns a {@link BlobObject} Promise. Works with image or canvas first element.\n   *\n   * @example\n   * image.blob().then((blob) => console.log(blob));  // BlobObject\n   * canvas.blob().then((blob) => console.log(blob)); // BlobObject\n   */\n  blob(options = {}) {\n    return new Promise((resolve, reject) => {\n      const elem = this.first();\n      const { name } = elem;\n\n      if (name !== 'img' && name !== 'canvas') {\n        reject(new Error('First element in the set isn\\'t an image or a canvas! (Elem#blob)'));\n      }\n\n      if (name === 'canvas') {\n        return resolve(elem);\n      }\n\n      elem\n        .load()\n        .then(() => {\n          if (elem.isBroken()) {\n            return reject(new Error('The image is broken! (Elem#blob)'));\n          }\n\n          const canvas = new Elem(nativeDocument).canvas();\n          const width = elem.width();\n          const height = elem.height();\n\n          canvas\n            .width(width)\n            .height(height)\n            .drawImage(elem.$[0], 0, 0);\n\n          resolve(canvas);\n        });\n    })\n      .then((canvas) => dataURLFetch(canvas.dataURL()))\n      .then(({ data: ab }) => blob(ab, options));\n  }\n\n  /**\n   * @method Elem#blur\n   * @returns {Elem} Returns this.\n   * @see https://developer.mozilla.org/en/docs/Web/API/HTMLElement/blur\n   * @description Synonym for\n   * [HTMLElement#blur]{@link https://developer.mozilla.org/en/docs/Web/API/HTMLElement/blur}.\n   */\n  blur() {\n    return this.forEach((elem) => {\n      elem.blur();\n    });\n  }\n\n  /**\n   * @method Elem#calcCSS\n   * @param {String} [pseudo] - See the link.\n   * @returns {CSSStyleDeclaration} See the link.\n   * @see https://developer.mozilla.org/en/docs/Web/API/Window/getComputedStyle\n   * @description Synonym for\n   * [getComputedStyle]{@link https://developer.mozilla.org/en/docs/Web/API/Window/getComputedStyle}.\n   * Returns computed style for the first element in the set or undefined.\n   */\n  calcCSS(pseudo = null) {\n    return getComputedStyle(getElem(this), pseudo);\n  }\n\n  /**\n   * @method Elem#changeRule\n   * @public\n   * @param {String} name - Name of the rule.\n   * @param {Object.<String, String>} style - Style for the selector.\n   * @returns {Elem} Returns this.\n   * @description Method for changing css styles in the first style tag in the set.\n   * Note: style element should be inside the document.\n   *\n   * @example\n   * style.changeRule('img-size', {\n   *   width: '50px !important',\n   *   height: '50px !important'\n   * });\n   */\n  changeRule(name, style) {\n    this.some((elem) => {\n      if (getName(elem) === 'style') {\n        const { value: rule } = new Arr(elem.sheet.cssRules).find((rule) => rule.dwayneData && rule.dwayneData.name === name) || {};\n\n        if (rule) {\n          new Elem(rule).css(style);\n\n          return true;\n        }\n      }\n    });\n\n    return this;\n  }\n\n  /**\n   * @method Elem#child\n   * @public\n   * @param {Number|String|Elem|Element|Element[]} element - If the argument is a number a wrap of the set of the children\n   * of this index of each element in the set returned otherwise an element to put into this element, a collection\n   * or a selector of it.\n   * @returns {Elem} Returns a wrap of children or inserted elements.\n   * @description Method is similar to\n   * [Node#appendChild]{@link https://developer.mozilla.org/en/docs/Web/API/Node/appendChild}.\n   *\n   * @example\n   * const child = elem.child(1);\n   *\n   * elem.child(elem2);\n   * elem.child(document.getElementById('id'));\n   * elem.child('#id div.c1');\n   */\n  child(element) {\n    if (isInteger(element) && element >= 0) {\n      return this.children().elem(element);\n    }\n\n    return toFind(element).into(this);\n  }\n\n  /**\n   * @method Elem#children\n   * @public\n   * @returns {Elem} D-Wrap of the children of the first element in the set.\n   * @description Method for getting element's children.\n   *\n   * @example\n   * const children = elem.children();\n   */\n  children() {\n    return new Elem(this.length ? this.$[0].children : []);\n  }\n\n  /**\n   * @method Elem#class\n   * @public\n   * @param {String} [cls] - If it's present it has to contain class attribute to set.\n   * @returns {Arr|Elem} If the argument is present this returned otherwise a wrap of the classes array returned.\n   * @description Method for getting/setting classes.\n   *\n   * @example\n   * elem.class('c1 c2'); // class set to 'c1 c2'\n   * elem.class().$;      // ['c1', 'c2']\n   */\n  class(cls) {\n    if (!arguments.length) {\n      return new Arr(getElem(this).className.split(' '));\n    }\n\n    return this.forEach((elem) => {\n      elem.className = cls;\n    });\n  }\n\n  /**\n   * @method Elem#click\n   * @returns {Elem} Returns this.\n   * @see https://developer.mozilla.org/en/docs/Web/API/HTMLElement/click\n   * @description Synonym for\n   * [HTMLElement#click]{@link https://developer.mozilla.org/en/docs/Web/API/HTMLElement/click}.\n   */\n  click() {\n    return this.forEach((elem) => {\n      elem.click();\n    });\n  }\n\n  /**\n   * @method Elem#clone\n   * @public\n   * @param {Boolean|*} [deep = false] - See thee link.\n   * @returns {Elem} New instance of Elem.\n   * @see https://developer.mozilla.org/en/docs/Web/API/Node/cloneNode\n   * @description Synonym for\n   * [Node#cloneNode]{@link https://developer.mozilla.org/en/docs/Web/API/Node/cloneNode}.\n   */\n  clone(deep = false) {\n    return this.object((elems, elem) => {\n      elems.add(elem.cloneNode(!!deep));\n    }, new Elem());\n  }\n\n  /**\n   * @method Elem#closest\n   * @public\n   * @param {String} selector - See the link.\n   * @returns {Elem} Set of the closest elements.\n   * @description Synonym for\n   * [Element#closest]{@link https://developer.mozilla.org/en/docs/Web/API/Element/closest}.\n   */\n  closest(selector) {\n    return this.object((elems, elem) => {\n      while (elem) {\n        if (new Elem(elem).is(selector)) {\n          return elems.add(elem);\n        }\n\n        elem = elem.parentElement;\n      }\n    }, new Elem());\n  }\n\n  /**\n   * @method Elem#contains\n   * @public\n   * @param {String|Elem|Element} element - Element to find out if it's within the first element\n   * in the set or a selector of it.\n   * @returns {Boolean} Returns if the argument within this element.\n   * @description Method is extension for\n   * [Node#contains]{@link https://developer.mozilla.org/en/docs/Web/API/Node/contains}.\n   *\n   * @example\n   * elem1.contains(elem2);   // true|false\n   * elem.contains(selector); // true|false\n   */\n  contains(element) {\n    element = toFind(element);\n\n    return getElem(this).contains(getElem(element));\n  }\n\n  /**\n   * @method Elem#create\n   * @public\n   * @param {String} type - Type of created element.\n   * @param {...String} appliedExpressions - Strings that are passed into {@link Elem#apply}.\n   * @returns {Elem} New instance of Elem - wrap of the created element.\n   * @description Method for creating elements inside this element. If this element is a document it's just created.\n   *\n   * @example\n   * elem.create('div', '#id .c1 .c2 *Some text*');\n   *\n   * // also there are shorthands for almost every HTML-element\n   * elem.div();\n   * elem.input('$type(checkbox) $name(country)');\n   */\n  create(type, ...appliedExpressions) {\n    return this.object((elems, elem) => {\n      const element = new Elem(nativeDocument.createElement(type));\n\n      if (elem !== nativeDocument) {\n        element.into(elem);\n      }\n\n      elems.add(element.apply.apply(element, appliedExpressions));\n    }, new Elem());\n  }\n\n  /**\n   * @method Elem#css\n   * @public\n   * @param {String|Object.<String, String|ElemValueCallback>} [property] - Name of the property to get or\n   * an object of the format { [property]: value, ... } to set styles.\n   * @param {String|ElemValueCallback} [value] - If the first argument is a string it should be a value to set for that property.\n   * @returns {Super|String|Elem} If no arguments passed, D-Wrap of css styles of the element returned,\n   * if 1 string argument is passed the value of the property returned otherwise returns this.\n   * @description Method for getting/setting styles. Supports !important.\n   *\n   * @example\n   * elem.css('display', 'none'); // display set to 'none' and this returned\n   * elem.css('display');         // 'none'\n   * elem.css({\n   *   display: 'inline',         // display set to 'inline'\n   *   cursor: 'pointer'          // cursor set to 'pointer'\n   * });                          // this returned\n   * elem.css().$;                // { display: 'none', cursor: 'pointer' }\n   */\n  css(property, value) {\n    const style = getElem(this).style;\n\n    if (!arguments.length) {\n      return new Str(style.cssText)\n        .split(/; ?/)\n\n        .object((o, value) => {\n          if (value) {\n            property = value.split(/: /);\n\n            o[new Str(property[0]).toCamelCase().$] = property[1];\n          }\n        });\n    }\n\n    if (arguments.length <= 1 && isString(property)) {\n      property = new Str(property).toHyphenCase().$;\n\n      return style.getPropertyValue(property) + (style.getPropertyPriority(property) ? ' !important' : '');\n    }\n\n    if (arguments.length >= 2) {\n      property = { [property]: value };\n    }\n\n    return this.forEach((elem, index) => {\n      new Super(property).forEach((value, property) => {\n        property = new Str(property).toHyphenCase();\n\n        if (isFunction(value)) {\n          value = value(new Elem(elem).css(property.$), elem, index);\n        }\n\n        elem.style.setProperty(\n          property,\n          value.replace(/!important$/, ''),\n          /!important$/.test(value) ? 'important' : ''\n        );\n      });\n    });\n  }\n\n  /**\n   * @method Elem#ctx\n   * @public\n   * @param {String|Object|CtxCallback} [property] - If present and object\n   * it's assigned to the canvas rendering context, if function\n   * it's called with canvas rendering context argument, if string\n   * the value from the second argument is used for assigning\n   * this property to canvas rendering context and if not present\n   * canvas rendering context returned.\n   * @param {*} [value] - See the property argument.\n   * @returns {CanvasRenderingContext2D|Elem}\n   * @description Rendering context of the first canvas in the set.\n   *\n   * @example\n   * canvas.ctx; // CanvasRenderingContext2D\n   */\n  ctx(property, value) {\n    let ctx;\n\n    this.some((elem) => {\n      if (getName(elem) === 'canvas') {\n        ctx = elem.dwayneData.ctx;\n\n        return true;\n      }\n    });\n\n    if (!arguments.length) {\n      return ctx;\n    }\n\n    if (isFunction(property)) {\n      property(ctx);\n    } else {\n      if (arguments.length >= 2) {\n        property = { [property]: value };\n      }\n\n      assign(ctx, property);\n    }\n\n    return this;\n  }\n\n  /**\n   * @method Elem#data\n   * @public\n   * @param {String|Object.<String, String|ElemValueCallback>} [key] - Name of the data attribute (without data- prefix)\n   * to get or an object of the format { [attrName]: value, ... } to set attributes.\n   * @param {String|ElemValueCallback} [value] - If the first argument is a string it should be a value to set for that attribute.\n   * @returns {Super|String|Elem} If no arguments passed, D-Wrap of dataset of the element returned,\n   * if 1 string argument is passed the value of the data attribute returned otherwise returns this.\n   * @description Method for getting/setting data attributes. See\n   * [HTMLElement#dataset]{@link https://developer.mozilla.org/en/docs/Web/API/HTMLElement/dataset}.\n   *\n   * @example\n   * elem.data('someKey1', 'value'); // attribute data-some-key1 set to 'value1' and this returned\n   * elem.data('someKey1');          // 'value1'\n   * elem.data({\n   *   someKey1: 'value3',           // attribute data-some-key1 set to 'value3'\n   *   someKey2: 'value2'            // attribute data-some-key2 set to 'value2'\n   * });                             // this returned\n   * elem.data().$;                  // { someKey1: 'value3', someKey2: 'value2' }\n   */\n  data(key, value) {\n    const dataset = getElem(this).dataset;\n\n    if (!arguments.length) {\n      return new Super(dataset).object((o, value, key) => {\n        o[key] = value;\n      });\n    }\n\n    if (arguments.length === 1 && isString(key)) {\n      return dataset[key];\n    }\n\n    if (arguments.length >= 2) {\n      key = { [key]: value };\n    }\n\n    iterate(key, (value, key) => {\n      this.forEach((elem, index) => {\n        elem.dataset[key] = isFunction(value) ? value(elem.dataset[key], elem, index) : value;\n      });\n    });\n\n    return this;\n  }\n\n  /**\n   * @method Elem#dataURL\n   * @param {String} [type = 'image/png'] - See the link\n   * @param {Number} [encoderOptions = 0.92] - See the link.\n   * @returns {String} Data URL for the first canvas element in the set.\n   * @see https://developer.mozilla.org/en/docs/Web/API/HTMLCanvasElement/toDataURL\n   * @description Synonym for\n   * [HTMLCanvasElement#toDataURL]{@link https://developer.mozilla.org/en/docs/Web/API/HTMLCanvasElement/toDataURL}.\n   *\n   * @example\n   * canvas.dataURL();\n   */\n  dataURL(type, encoderOptions) {\n    const ctx = this.ctx();\n\n    if (!ctx) {\n      return '';\n    }\n\n    return ctx.canvas.toDataURL.apply(ctx.canvas, arguments);\n  }\n\n  /**\n   * @method Elem#deleteRule\n   * @public\n   * @param {String} name - Name of the rule.\n   * @returns {Elem} Returns this.\n   * @description Method for deleting css styles in a style tag.\n   * Note: style element should be inside the document.\n   *\n   * @example\n   * style.deleteRule('img-size');\n   */\n  deleteRule(name) {\n    this.some((elem) => {\n      if (getName(elem) === 'style') {\n        const rule = new Arr(elem.sheet.cssRules).find((rule) => rule.dwayneData && rule.dwayneData.name === name);\n\n        if (rule) {\n          elem.sheet.deleteRule(rule.key);\n\n          return true;\n        }\n      }\n    });\n\n    return this;\n  }\n\n  /**\n   * @method Elem#dispatch\n   * @public\n   * @param {String|Event} event - Event or a string (new Event(event) is created).\n   * @param {Object} [eventInit = {}] - See the link.\n   * @param {Boolean} [eventInit.bubbles = true] - See the link.\n   * @param {Boolean} [eventInit.cancelable = true] - See the link.\n   * @param {Object} [details = {}] - Object that is assigned to the event.\n   * @returns {Elem} Returns this.\n   * @see https://developer.mozilla.org/en/docs/Web/API/Event/Event\n   * @description Synonym for\n   * [EventTarget#dispatchEvent]{@link https://developer.mozilla.org/en/docs/Web/API/EventTarget/dispatchEvent}.\n   *\n   * @example\n   * elem.dispatch('click');\n   * elem.dispatch('click', { bubbles: false, cancellable: false });\n   * elem.dispatch(new CustomEvent('custom-event'));\n   */\n  dispatch(event, eventInit = {}, details = {}) {\n    const { bubbles = true, cancelable = true } = eventInit || {};\n    let finalEvent = event;\n\n    if (!/Event$/.test(toStringTag(finalEvent))) {\n      try {\n        finalEvent = new Event(finalEvent, eventInit);\n      } catch (err) {\n        finalEvent = nativeDocument.createEvent('Event');\n        finalEvent.initEvent(event, bubbles, cancelable);\n      }\n\n      assign(finalEvent, details);\n    }\n\n    return this.forEach((elem) => {\n      elem.dispatchEvent(finalEvent);\n    });\n  }\n\n  /**\n   * @method Elem#elem\n   * @public\n   * @param {Number} [index = 0] - Index of the element of the set to get. Negative index means elem.length + index.\n   * @returns {Elem} New instance of Elem.\n   *\n   * @example\n   * elem.elem(1); // a wrap of the element in the set that has index 1\n   * elem.elem();  // a wrap of the element in the set that has index 0\n   */\n  elem(index = 0) {\n    if (index < 0) {\n      index = this.length + index;\n    }\n\n    return new Elem(this.$[index]);\n  }\n\n  /**\n   * @method Elem#filter\n   * @public\n   * @param {String|Function|Element[]|Elem} [selector = Boolean] - If it's a string the method filters elements with the selector\n   * otherwise super.filter is called.\n   * @returns {Elem} New instance of Elem.\n   * @description Method for filtering elements.\n   *\n   * @example\n   * elem.filter((elem) => new Elem(elem).closest('.parent'));\n   * elem.filter(elemsInArray);\n   * elem.filter(elemsInElem);\n   * elem.filter('.child');\n   */\n  filter(selector = Boolean) {\n    return new Elem(super.filter(filterSwitcher(selector)));\n  }\n\n  /**\n   * @method Elem#find\n   * @public\n   * @param {String|Function} selector - Selector to find.\n   * @returns {Elem|{ key: Key, value: * }|null} New instance of Elem if selector is a string\n   * otherwise super.find is called.\n   * @description Synonym for\n   * [Element#querySelectorAll]{@link https://developer.mozilla.org/en/docs/Web/API/Element/querySelectorAll}.\n   */\n  find(selector) {\n    if (!isString(selector)) {\n      return super.find(selector);\n    }\n\n    return this.object((elems, elem) => {\n      elems.add(find(selector, elem));\n    }, new Elem());\n  }\n\n  /**\n   * @method Elem#first\n   * @public\n   * @returns {Elem} New instance of Elem.\n   * @description Synonym for elem.elem(0).\n   */\n  first() {\n    return this.elem(0);\n  }\n\n  /**\n   * @method Elem#first\n   * @public\n   * @param {String} [selector = null] - If present, finds first child in every elem that matches the selector.\n   * If not, finds first child of each element in the set.\n   * @returns {Elem} New instance of Elem.\n   * @description Method for finding first children of each element in the set.\n   *\n   * @example\n   * elem.first();       // finds first child of each element in the elem set\n   * elem.first('.foo'); // find first child that has foo class of each element in the set\n   */\n  firstChild(selector = null) {\n    return this.object((elems, elem) => {\n      const { value: found } = new Arr(elem.children).find((elem) => new Elem(elem).is(selector)) || {};\n\n      elems.add(found);\n    }, new Elem());\n  }\n\n  /**\n   * @method Elem#focus\n   * @returns {Elem} Returns this.\n   * @see https://developer.mozilla.org/en/docs/Web/API/HTMLElement/focus\n   * @description Synonym for\n   * [HTMLElement#focus]{@link https://developer.mozilla.org/en/docs/Web/API/HTMLElement/focus}.\n   */\n  focus() {\n    return this.forEach((elem) => {\n      elem.focus();\n    });\n  }\n\n  /**\n   * @method Elem#getRule\n   * @public\n   * @param {String} name - Name of the rule.\n   * @returns {{ selector: (String|void), rules: Object }} Set of the css rules.\n   * @description Method for getting set of the rules under the name.\n   * Note: style element should be inside the document.\n   *\n   * @example\n   * style.addRule('img-size', 'img.square', {\n   *   width: '40px',\n   *   height: '40px'\n   * });\n   * style.getRule('img-size');\n   * // {\n   * //   selector: 'img.square',\n   * //   rules: {\n   * //     width: '40px',\n   * //     height: '40px'\n   * //   }\n   * // }\n   */\n  getRule(name) {\n    let found = {\n      selector: undefined,\n      rules: {}\n    };\n\n    this.some((elem) => {\n      if (getName(elem) === 'style') {\n        const { value: rule } = new Arr(elem.sheet.cssRules).find((rule) => rule.dwayneData && rule.dwayneData.name === name) || {};\n\n        if (rule) {\n          found = {\n            selector: rule.selectorText,\n            rules: new Elem(rule).css().$\n          };\n\n          return true;\n        }\n      }\n    });\n\n    return found;\n  }\n\n  /**\n   * @method Elem#hasAttr\n   * @public\n   * @param {String} attr - Name of the attribute.\n   * @returns {Boolean} If the first element in the set has the attribute.\n   * @description Method that returns if the first element in the set has the attribute or not.\n   *\n   * @example\n   * elem.attr('attr', 'value').hasAttr('attr'); // true\n   * elem.removeAttr('attr').hasAttr('attr');    // false\n   */\n  hasAttr(attr) {\n    return getElem(this).hasAttribute(attr);\n  }\n\n  /**\n   * @method Elem#hasClass\n   * @public\n   * @param {String} cls - Name of the class.\n   * @returns {Boolean} If the first element in the set has the class.\n   * @description Method that returns if the first element in the set has the class or not.\n   *\n   * @example\n   * elem.addClass('cls').hasClass('cls');    // true\n   * elem.removeClass('cls').hasClass('cls'); // false\n   */\n  hasClass(cls) {\n    return getElem(this).classList.contains(cls);\n  }\n\n  /**\n   * @method Elem#height\n   * @public\n   * @param {*|ElemValueCallback} [height] - Height to set.\n   * @returns {Elem|String} If no arguments passed height of the first element in the set returned.\n   * Otherwise all elements heights in the set are set to the height argument.\n   * @description Gets or sets height.\n   *\n   * @example\n   * elem.height(123);\n   * elem.height(); // 123\n   */\n  height(height) {\n    return this.prop.apply(this, new Arr(arguments).unshift('height').$);\n  }\n\n  /**\n   * @method Elem#hide\n   * @public\n   * @returns {Elem} Returns this.\n   * @description Hides all elements in the set.\n   *\n   * @example\n   * elem.hide();\n   */\n  hide() {\n    return this.forEach((elem) => {\n      elem = new Elem(elem);\n\n      const currentDisplay = elem.css('display');\n\n      if (currentDisplay.indexOf('none')) {\n        elem.prop('dwayneData').previousDisplay = currentDisplay;\n      }\n\n      elem.css('display', 'none !important');\n    });\n  }\n\n  /**\n   * @method Elem#html\n   * @public\n   * @param {String|ElemValueCallback|*} [html] - HTML to write instead of current HTML.\n   * @returns {Elem|String} If no arguments passed HTML of the first element in the set returned.\n   * Otherwise all elements HTML in the set are set to the html argument.\n   * @description Gets or sets HTML.\n   *\n   * @example\n   * elem.html('&lt;div&gt;1&lt;/div&gt;');\n   * elem.html(); // '&lt;div&gt;1&lt;/div&gt;'\n   */\n  html(html) {\n    if (!arguments.length) {\n      return getElem(this).innerHTML;\n    }\n\n    return this.forEach((elem, index) => {\n      elem.innerHTML = isFunction(html) ? html(elem.innerHTML, elem, index) : html;\n    });\n  }\n\n  /**\n   * @method Elem#id\n   * @public\n   * @param {String|*} [id] - Id to set.\n   * @returns {Elem|String} If no arguments passed id of the first element in the set returned.\n   * Otherwise all elements ids in the set are set to the id argument.\n   * @description Gets id or sets ids.\n   *\n   * @example\n   * elem.id('unique');\n   * elem.id(); // 'unique'\n   */\n  id(id) {\n    if (!arguments.length) {\n      return getElem(this).id;\n    }\n\n    return this.forEach((elem) => {\n      elem.id = id;\n    });\n  }\n\n  /**\n   * @member {Number} Elem#innerHeight\n   * @type {Number}\n   * @public\n   * @readonly\n   * @description Method for finding how much height content of the first element can be.\n   *\n   * @example\n   * elem.css({\n   *   boxSizing: 'border-box',\n   *   height: '200px',\n   *   paddingTop: '2px',\n   *   paddingBottom: '3px',\n   *   borderTop: '1px solid black',\n   *   borderBottom: '4px solid black'\n   * }).innerHeight; // 190\n   * elem\n   *   .css('box-sizing', 'content-box')\n   *   .innerHeight; // 200\n   * elem\n   *   .css('box-sizing', 'padding-box')\n   *   .innerHeight; // 195\n   */\n  get innerHeight() {\n    const elem = this.$[0];\n\n    if (!elem) {\n      return 0;\n    }\n\n    if (isWindow(elem)) {\n      return elem.innerHeight;\n    }\n\n    const {\n      borderTopWidth,\n      borderBottomWidth,\n      boxSizing,\n      height,\n      paddingTop,\n      paddingBottom\n    } = this.calcCSS();\n    const borders = px(borderTopWidth) + px(borderBottomWidth);\n    const paddings = px(paddingTop) + px(paddingBottom);\n\n    return px(height) - innerSwitcher(boxSizing, [paddings, borders]);\n  }\n\n  /**\n   * @member {Number} Elem#innerWidth\n   * @type {Number}\n   * @public\n   * @readonly\n   * @description Method for finding how much width content of the first element can be.\n   *\n   * @example\n   * elem.css({\n   *   boxSizing: 'border-box',\n   *   width: '200px',\n   *   paddingLeft: '2px',\n   *   paddingRight: '3px',\n   *   borderLeft: '1px solid black',\n   *   borderRight: '4px solid black'\n   * }).innerWidth; // 190\n   * elem\n   *   .css('box-sizing', 'content-box')\n   *   .innerWidth; // 200\n   * elem\n   *   .css('box-sizing', 'padding-box')\n   *   .innerWidth; // 195\n   */\n  get innerWidth() {\n    const elem = this.$[0];\n\n    if (!elem) {\n      return 0;\n    }\n\n    if (isWindow(elem)) {\n      return elem.innerWidth;\n    }\n\n    const {\n      borderLeftWidth,\n      borderRightWidth,\n      boxSizing,\n      paddingLeft,\n      paddingRight,\n      width\n    } = this.calcCSS();\n    const borders = px(borderLeftWidth) + px(borderRightWidth);\n    const paddings = px(paddingLeft) + px(paddingRight);\n\n    return px(width) - innerSwitcher(boxSizing, [paddings, borders]);\n  }\n\n  /**\n   * @method Elem#insertAfter\n   * @public\n   * @param {String|Elem|Element} element - Element to insert this element after or a selector of it.\n   * @returns {Elem} Returns this.\n   * @description Puts the elements from the set after the element specified by the argument.\n   * The elements remain in the same order.\n   *\n   * @example\n   * elem.insertAfter(elem2);\n   * elem.insertAfter(document.getElementById('id'));\n   * elem.insertAfter('#id div.c1');\n   */\n  insertAfter(element) {\n    element = toFind(element).first();\n\n    let parent = element.parent();\n\n    if (!parent.length) {\n      return this;\n    }\n\n    element = element.next().$[0];\n    parent = parent.$[0];\n\n    return this.forEach((elem) => {\n      if (element) {\n        parent.insertBefore(elem, element);\n\n        element = elem;\n      } else {\n        parent.appendChild(elem);\n      }\n    });\n  }\n\n  /**\n   * @method Elem#insertBefore\n   * @public\n   * @param {String|Elem|Element} element - Element to insert this element before or a selector of it.\n   * @returns {Elem} Returns this.\n   * @description Puts the elements from the set before the element specified by the argument.\n   * The elements remain in the same order.\n   *\n   * @example\n   * elem.insertBefore(elem2);\n   * elem.insertBefore(document.getElementById('id'));\n   * elem.insertBefore('#id div.c1');\n   */\n  insertBefore(element) {\n    element = toFind(element).first();\n\n    let parent = element.parent();\n\n    if (!parent.length) {\n      return this;\n    }\n\n    element = element.$[0];\n    parent = parent.$[0];\n\n    return this.forEach((elem) => {\n      parent.insertBefore(elem, element);\n    });\n  }\n\n  /**\n   * @method Elem#into\n   * @public\n   * @param {String|Elem|Element} element - Element to put this elements into or a selector of it.\n   * @returns {Elem} Returns this.\n   * @description Method is similar to\n   * [Node#appendChild]{@link https://developer.mozilla.org/en/docs/Web/API/Node/appendChild}.\n   *\n   * @example\n   * elem.into(elem2);\n   * elem.into(document.getElementById('id'));\n   * elem.into('#id div.c1');\n   */\n  into(element) {\n    element = toFind(element).$[0];\n\n    if (!element) {\n      return this;\n    }\n\n    return this.forEach((elem) => {\n      element.appendChild(elem);\n    });\n  }\n\n  /**\n   * @method Elem#is\n   * @public\n   * @param {String} selector\n   * @returns {Boolean} If the first element in the set matches the selector.\n   * If the selector is undefined or null always returns true.\n   * @description Synonym for\n   * [Element#matches]{@link https://developer.mozilla.org/en/docs/Web/API/Element/matches}.\n   *\n   * @example\n   * elem.addClass('cls');\n   * elem.is('.cls');         // true\n   *\n   * elem.removeClass('cls');\n   * elem.is('.cls');         // false\n   */\n  is(selector) {\n    if (isNull(selector)) {\n      return true;\n    }\n\n    const elem = getElem(this);\n    const matches = elem.matches ||\n      elem.matchesSelector ||\n      elem.webkitMatchesSelector ||\n      elem.mozMatchesSelector ||\n      elem.msMatchesSelector ||\n      elem.oMatchesSelector;\n\n    try {\n      return matches.call(elem, selector);\n    } catch (err) {\n      console.error(`Selector '${ selector }' is not a valid selector (Elem#is)`);\n\n      return false;\n    }\n  }\n\n  /**\n   * @method Elem#isBroken\n   * @public\n   * @returns {Boolean} If the first image in the set is broken.\n   * @description Returns if the first element in the set is broken. Not image and not loaded image is considered proper.\n   *\n   * @example\n   * const img = elem.img().on({\n   *   'load': onload,\n   *   'error': onload\n   * });\n   *\n   * onload = () => {\n   *   console.log(img.isBroken()); // true\n   * };\n   *\n   * img.ref('/some/non-existent/site/not-found.png');\n   */\n  isBroken() {\n    let isBroken = false;\n\n    this.some((elem) => {\n      if (getName(elem) === 'img') {\n        isBroken = !!(elem.complete && (!elem.naturalWidth || !elem.naturalHeight));\n\n        return true;\n      }\n    });\n\n    return isBroken;\n  }\n\n  /**\n   * @method Elem#isWithinDocument\n   * @public\n   * @returns {Boolean} Returns if the first element in the set is within the document or not.\n   * @description Returns if the first element in the set is within the document or not.\n   *\n   * @example\n   * new Elem(document.body).isWithinDocument();  // true\n   * new Elem(document).div().isWithinDocument(); // false\n   */\n  isWithinDocument() {\n    return this.first().closest('html').length !== 0;\n  }\n\n  /**\n   * @method Elem#last\n   * @public\n   * @returns {Elem} New instance of Elem.\n   * @description Synonym for elem.elem(-1).\n   */\n  last() {\n    return this.elem(-1);\n  }\n\n  /**\n   * @method Elem#last\n   * @public\n   * @param {String} [selector = null] - If present, finds last child in every elem that matches the selector.\n   * If not, finds last child of each element in the set.\n   * @returns {Elem} New instance of Elem.\n   * @description Method for finding last children of each element in the set.\n   *\n   * @example\n   * elem.last();       // finds last child of each element in the elem set\n   * elem.last('.foo'); // find last child that has 'foo' class of each element in the set\n   */\n  lastChild(selector = null) {\n    return this.object((elems, elem) => {\n      const { value: found } = new Arr(elem.children)\n        .reverse()\n        .find((elem) => new Elem(elem).is(selector)) || {};\n\n      elems.add(found);\n    }, new Elem());\n  }\n\n  /**\n   * @method Elem#load\n   * @public\n   * @returns {Promise.<{ proper: Elem, broken: Elem }>} Promise with broken and proper images.\n   * @description Loads each image in the set and puts it to the proper or broken array.\n   *\n   * @example\n   * images.load().then(({ broken }) => {\n   *   broken.filter('img').ref('/fallback.png');\n   * });\n   */\n  load() {\n    const images = {\n      proper: new Elem(),\n      broken: new Elem()\n    };\n\n    return Promise.all(\n      this\n        .filter((elem) => getName(elem) === 'img')\n        .map((elem) => {\n          const $elem = new Elem(elem);\n\n          if (elem.complete) {\n            images[$elem.isBroken() ? 'broken' : 'proper'].push(elem);\n\n            return;\n          }\n\n          return new Promise((resolve) => {\n            const removeListeners = $elem.on({\n              load() {\n                images.proper.add(elem);\n\n                removeListeners();\n                resolve();\n              },\n              error() {\n                images.broken.add(elem);\n\n                removeListeners();\n                resolve();\n              }\n            });\n          });\n        })\n        .$\n    ).then(() => images);\n  }\n\n  /**\n   * @method Elem#moveAttr\n   * @public\n   * @param {String} attr - Attribute to move to the first element.\n   * @param {String} [value = ''] - Value to set for the attribute. If not set attribute of the previous element or '' used.\n   * @returns {Elem} Returns this.\n   * @description Method for moving an attribute from previous element to the next one (first element in this set).\n   *\n   * @example\n   * elem1.moveAttr('attr', 'value');     // attribute 'attr' set to 'value' on elem1\n   * elem2.moveAttr('attr');              // attribute 'attr' removed from elem1. set to 'value' on elem2\n   * elem3.moveAttr('attr', 'new value'); // attribute 'attr' removed from elem2. set to 'new value' on elem3\n   */\n  moveAttr(attr, value = '') {\n    const prev = attrs[attr];\n    const elem = this.elem();\n\n    if (prev && elem.length) {\n      if (arguments.length < 2) {\n        value = prev.attr(attr);\n      }\n\n      prev.removeAttr(attr);\n    }\n\n    if (elem.length) {\n      attrs[attr] = elem.attr(attr, value);\n    }\n\n    return this;\n  }\n\n  /**\n   * @method Elem#moveClass\n   * @public\n   * @param {String} cls - Class to move to the first element.\n   * @returns {Elem} Returns this.\n   * @description Method for moving a class from previous element to the next one (first element in this set).\n   *\n   * @example\n   * elem1.moveClass('cls'); // class 'cls' added to elem1\n   * elem2.moveClass('cls'); // class 'cls' removed from elem1. added to elem1\n   */\n  moveClass(cls) {\n    const prev = classes[cls];\n    const elem = this.elem();\n\n    if (prev && elem.length) {\n      prev.removeClass(cls);\n    }\n\n    if (elem.length) {\n      classes[cls] = elem.addClass(cls);\n    }\n\n    return this;\n  }\n\n  /**\n   * @member Elem#name\n   * @type {String}\n   * @public\n   * @readonly\n   * @description tagName (lowercased) of the first element in the set.\n   *\n   * @example\n   * const elem1 = elem.create('div');\n   * elem1.name // 'div'\n   */\n  get name() {\n    return getName(this.$[0]);\n  }\n\n  /**\n   * @method Elem#next\n   * @public\n   * @param {String} [selector = null] - If present, finds next element to every elem that matches the selector.\n   * If not, finds next element to each element in the set.\n   * @returns {Elem} New instance of Elem.\n   * @description Method for finding next element to each element in the set.\n   *\n   * @example\n   * elem.next();       // finds next element to each element in the set\n   * elem.next('.foo'); // finds next element to each element that has 'foo' class\n   */\n  next(selector = null) {\n    return this.object((elems, elem) => {\n      /* eslint no-cond-assign: 0 */\n      while (elem = elem.nextElementSibling) {\n        if (isNull(selector) || new Elem(elem).is(selector)) {\n          return elems.add(elem);\n        }\n      }\n    }, new Elem());\n  }\n\n  /**\n   * @method Elem#off\n   * @public\n   * @param {...ElemEventString} events - Events to remove.\n   * @returns {Elem} Returns this.\n   * @description Method that removes all the listeners from each element in the set specified by the events arguments.\n   *\n   * @example\n   * elem.off('click');\n   * elem.off('click, input');\n   * elem.off('click, input', 'focus');\n   */\n  off(...events) {\n    return this.forEach((elem) => {\n      const { listeners } = elem.dwayneData;\n\n      iterate(arguments, (event) => {\n        iterate(event.split(eventSeparator), (event) => {\n          (listeners[event] || new Super()).forEach(({ removeListener }) => removeListener());\n        });\n      });\n    });\n  }\n\n  /**\n   * @method Elem#on\n   * @public\n   * @param {ElemEventString|Object.<ElemEventString|Listener>} event - Either a {@link ElemEventString} string\n   * or an object with event keys (a key is also ElemEventString) and listeners values.\n   * @param {String} [selector = null] - Selector to filter event targets.\n   * @param {Listener} [listener] - If the first argument is a string it must be a listener function for\n   * specified event(s).\n   * @returns {ElemRemoveListeners} Function that takes optional event argument.\n   * @description Adds event listeners for all the elements in the set.\n   * For debugging: If you need to know what listeners are in work (and what selectors filter targets)\n   * you can look at the base property of the only dwayne listener that listens for the event\n   * and find all working listeners in listener.base.dwayneData.listeners[event].$.\n   *\n   * @example\n   * elem.on(\n   *   'change, input',\n   *   'input, select, textarea, datalist, keygen, output',\n   *   (e, elem, index) => console.log(elem.value)\n   * );\n   * elem.on(\n   *   'change, input',\n   *   (e, elem, index) => console.log(elem.value)\n   * );\n   * elem.on(\n   *   {\n   *     'change, input': (e, elem, index) => console.log(elem.value),\n   *     'blur': console.log('blur')\n   *   },\n   *   'input, select, textarea, datalist, keygen, output'\n   * );\n   *\n   * const removeListeners = elem.on({\n   *   'change, input': (e, elem, index) => console.log(elem.value),\n   *   'blur': console.log('blur')\n   * });\n   *\n   * removeListeners('click');\n   * removeListeners('blur, change');\n   * removeListeners('blur, change', 'input');\n   * removeListeners();\n   */\n  on(event, selector = null, listener) {\n    const allListeners = new Super({});\n\n    if (isFunction(selector)) {\n      listener = selector;\n      selector = null;\n    }\n\n    if (isString(event)) {\n      event = { [event]: listener };\n    }\n\n    event = new Super(event).object((listeners, listener, event) => {\n      iterate(event.split(eventSeparator), (event) => {\n        listeners[event] = listener;\n      });\n    });\n\n    this.forEach((elem) => {\n      const { listeners } = (windowsDwayneData.find(({ element }) => element === elem) || {}).value || elem.dwayneData;\n\n      event.forEach((listener, event) => {\n        const removeEventListeners = listeners[event] = listeners[event] || new Super({}).define('index', {\n          value: 0,\n          configurable: true,\n          writable: true\n        });\n        const index = removeEventListeners.prop('index');\n\n        if (!removeEventListeners.has('listener')) {\n          const newListener = (e) => {\n            removeEventListeners.forEach(({ selector, listener }) => {\n              if (new Elem(e.target).is(selector)) {\n                listener.call(elem, e, elem, index);\n              }\n            });\n          };\n\n          newListener.base = elem;\n\n          elem.addEventListener(event, newListener, false);\n          removeEventListeners.define('listener', {\n            value: newListener,\n            configurable: true,\n            writable: true\n          });\n        }\n\n        const removeListener = () => {\n          removeEventListeners.delete(index);\n\n          if (!removeEventListeners.count) {\n            elem.removeEventListener(event, removeEventListeners.prop('listener'), false);\n            removeEventListeners.delete('listener');\n          }\n        };\n\n        allListeners.prop(event, (allListeners.prop(event) || new Arr()).push(removeListener));\n\n        removeEventListeners.assign({\n          index: index + 1,\n          [index]: {\n            selector,\n            listener,\n            removeListener\n          }\n        });\n      });\n    });\n\n    return function removeEventListeners(event) {\n      if (arguments.length) {\n        iterate(arguments, (event) => {\n          iterate(event.split(eventSeparator), (event) => {\n            if (allListeners.has(event)) {\n              allListeners.prop(event).forEach((removeListener) => removeListener());\n              allListeners.delete(event);\n            }\n          });\n        });\n\n        return;\n      }\n\n      allListeners.forEach((removeListeners) => {\n        removeListeners.forEach((removeListener) => removeListener());\n      });\n    };\n  }\n\n  /**\n   * @member {Number} Elem#outerWidth\n   * @type {Number}\n   * @public\n   * @readonly\n   * @description Method for finding how much height the element actually is.\n   *\n   * @example\n   * elem.css({\n   *   boxSizing: 'border-box',\n   *   height: '200px',\n   *   paddingTop: '2px',\n   *   paddingBottom: '3px',\n   *   borderTop: '1px solid black',\n   *   borderBottom: '4px solid black'\n   *   marginTop: '0px',\n   *   marginBottom: '5px'\n   * }).outerHeight; // 205\n   * elem\n   *   .css('box-sizing', 'content-box')\n   *   .outerHeight; // 215\n   * elem\n   *   .css('box-sizing', 'padding-box')\n   *   .outerHeight; // 210\n   */\n  get outerHeight() {\n    const elem = this.$[0];\n\n    if (!elem) {\n      return 0;\n    }\n\n    if (isWindow(elem)) {\n      return elem.outerHeight;\n    }\n\n    const {\n      borderTopWidth,\n      borderBottomWidth,\n      boxSizing,\n      height,\n      marginTop,\n      marginBottom,\n      paddingTop,\n      paddingBottom\n    } = this.calcCSS();\n    const borders = px(borderTopWidth) + px(borderBottomWidth);\n    const paddings = px(paddingTop) + px(paddingBottom);\n\n    return px(height) + px(marginTop) + px(marginBottom) + outerSwitcher(boxSizing, [borders, paddings]);\n  }\n\n  /**\n   * @member {Number} Elem#outerWidth\n   * @type {Number}\n   * @public\n   * @readonly\n   * @description Method for finding how much width the element actually is.\n   *\n   * @example\n   * elem.css({\n   *   boxSizing: 'border-box',\n   *   width: '200px',\n   *   paddingLeft: '2px',\n   *   paddingRight: '3px',\n   *   borderLeft: '1px solid black',\n   *   borderRight: '4px solid black'\n   *   marginLeft: '0px',\n   *   marginRight: '5px'\n   * }).outerWidth; // 205\n   * elem\n   *   .css('box-sizing', 'content-box')\n   *   .outerWidth; // 215\n   * elem\n   *   .css('box-sizing', 'padding-box')\n   *   .outerWidth; // 210\n   */\n  get outerWidth() {\n    const elem = this.$[0];\n\n    if (!elem) {\n      return 0;\n    }\n\n    if (isWindow(elem)) {\n      return elem.outerWidth;\n    }\n\n    const {\n      borderLeftWidth,\n      borderRightWidth,\n      boxSizing,\n      marginLeft,\n      marginRight,\n      paddingLeft,\n      paddingRight,\n      width\n    } = this.calcCSS();\n    const borders = px(borderLeftWidth) + px(borderRightWidth);\n    const paddings = px(paddingLeft) + px(paddingRight);\n\n    return px(width) + px(marginLeft) + px(marginRight) + outerSwitcher(boxSizing, [borders, paddings]);\n  }\n\n  /**\n   * @method Elem#parent\n   * @public\n   * @returns {Elem} New instance of Elem.\n   * @description Method returns wrap of the set of the parent elements of each element in the set.\n   */\n  parent() {\n    return this.object((elems, elem) => elems.add(elem.parentElement), new Elem());\n  }\n\n  /**\n   * @method Elem#parentTree\n   * @public\n   * @returns {Elem} New instance of Elem.\n   * @description Returns wrap of all parents of each element in the set.\n   *\n   * @example\n   * elem.parentTree(); // Elem\n   */\n  parentTree() {\n    return this.object((elems, elem) => {\n      while (elem = elem.parentNode) {\n        elems.add(elem);\n      }\n    }, new Elem());\n  }\n\n  /**\n   * @method Elem#prev\n   * @public\n   * @param {String} [selector = null] - If present, finds previous element to every elem that matches the selector.\n   * If not, finds previous element to each element in the set.\n   * @returns {Elem} New instance of Elem.\n   * @description Method for finding previous element to each element in the set.\n   *\n   * @example\n   * elem.next();       // finds previous element to each element in the set\n   * elem.next('.foo'); // finds previous element to each element that has 'foo' class\n   */\n  prev(selector = null) {\n    return this.object((elems, elem) => {\n      /* eslint no-cond-assign: 0 */\n      while (elem = elem.previousElementSibling) {\n        if (isNull(selector) || new Elem(elem).is(selector)) {\n          return elems.add(elem);\n        }\n      }\n    }, new Elem());\n  }\n\n  /**\n   * @method Elem#prop\n   * @public\n   * @param {String|Object.<String, ElemValueCallback|*>} property - Either a string of a property or an assigned object.\n   * @param {ElemValueCallback|*} [value] - If a property parameter is a string\n   * this has to be an assigned value if it's present.\n   * @returns {Elem|*} Returns this if it's setter or a value if getter.\n   * @description Method that is either a property getter for the first element in the set\n   * or a setter for every element in the set.\n   *\n   * @example\n   * elem.prop('draggable', false);\n   * elem.prop('draggable'); // false\n   */\n  prop(property, value) {\n    if (arguments.length <= 1 && isString(property)) {\n      return this.$[0] ? this.$[0][property] : undefined;\n    }\n\n    if (arguments.length >= 2) {\n      property = { [property]: value };\n    }\n\n    return this.forEach((elem, index) => {\n      iterate(property, (value, prop) => {\n        elem[prop] = isFunction(value) ? value(elem[prop], elem, index) : value;\n      });\n    });\n  }\n\n  /**\n   * @method Elem#ref\n   * @public\n   * @param {String|ElemValueCallback} [link] - If it's present link to a resource.\n   * @returns {Elem|String} If the link argument isn't present it's a getter of the 'src' attribute\n   * for the one of following elements: img, script, iframe, audio, video; of the 'action' attribute\n   * for a form element and of the 'href' attribute for the rest. If it's present it's a setter\n   * of the same attribute for all the element in the set.\n   * @description Method for getting resources links and setting them.\n   *\n   * @example\n   * elem.ref('/some/cool/image.png');\n   * elem.ref(); // '/some/cool/image.png'\n   */\n  ref(link) {\n    if (!arguments.length) {\n      return this.attr(refSwitcher(this.name));\n    }\n\n    return this.forEach((elem) => {\n      elem = new Elem(elem);\n\n      elem.attr(refSwitcher(elem.name), link);\n    });\n  }\n\n  /**\n   * @method Elem#remove\n   * @public\n   * @returns {Elem} Returns this.\n   * @description Removes all the elements from the set from the document.\n   * Note: it doesn't remove them from the set so watch out for the memory leaks.\n   *\n   * @example\n   * elem.remove();\n   */\n  remove() {\n    return this.forEach((elem) => {\n      elem.remove();\n    });\n  }\n\n  /**\n   * @method Elem@removeAttr\n   * @public\n   * @param {...String} attributes - Attributes to remove.\n   * @returns {Elem} Returns this.\n   * @description Removes all the attributes from arguments from all the elements in the set.\n   *\n   * @example\n   * elem.removeAttr('foo', 'bar', 'baz');\n   */\n  removeAttr(...attributes) {\n    return this.forEach((elem) => {\n      iterate(arguments, (attr) => {\n        elem.removeAttribute(attr);\n      });\n    });\n  }\n\n  /**\n   * @method Elem#removeClass\n   * @public\n   * @param {...String} classes - Classes to remove.\n   * @returns {Elem} Returns this.\n   * @description Removes all the classes from arguments from all the elements in the set.\n   *\n   * @example\n   * elem.removeClass('foo', 'bar', 'baz');\n   */\n  removeClass(...classes) {\n    return this.forEach((elem) => {\n      const list = elem.classList;\n\n      list.remove.apply(list, arguments);\n    });\n  }\n\n  /**\n   * @method Elem#removeCSS\n   * @public\n   * @param {...String} props - CSS properties to remove.\n   * @returns {Elem} Returns this.\n   * @description Removes all the CSS properties from arguments from all the elements in the set.\n   *\n   * @example\n   * elem.removeCSS('display', 'position', 'margin');\n   */\n  removeCSS(...props) {\n    return this.forEach((elem) => {\n      iterate(arguments, (css) => {\n        elem.style.removeProperty(css);\n      });\n    });\n  }\n\n  /**\n   * @method Elem#replace\n   * @public\n   * @param {String|Elem|Element} element - Element to replace the first element in the set\n   * with a set of elements specified by the argument (Element, set of elements or a selector of them).\n   * @returns {Elem} Returns this.\n   * @description Method is similar to\n   * [Node#replaceChild]{@link https://developer.mozilla.org/en/docs/Web/API/Node/replaceChild}.\n   *\n   * @example\n   * elem.replace(elem2);\n   * elem.replace(document.getElementById('id'));\n   * elem.replace('#id div.c1');\n   */\n  replace(element) {\n    element = toFind(element);\n\n    const parent = this.first().parent();\n\n    if (!parent.length) {\n      return this;\n    }\n\n    let elem = parent;\n    let method = 'into';\n    const next = this.next().first().$[0];\n    const prev = this.prev().first().$[0];\n\n    if (next) {\n      elem = next;\n      method = 'insertBefore';\n    } else if (prev) {\n      elem = prev;\n      method = 'insertAfter';\n    }\n\n    this.first().remove();\n\n    element[method](elem);\n  }\n\n  /**\n   * @method Elem#setOf\n   * @public\n   * @param {String} type - HTML element type.\n   * @param {Number|Object|*[]} iterator - A number (how many elements to create inside each element),\n   * an object or an array to iterate over.\n   * @param {ElemSetOfCallback} callback\n   * @returns {Elem} New instance of Elem.\n   * @description Function for creating set of elements inside each element in the set based on an array or an object.\n   *\n   * @example\n   * table.setOf('tr', [[1, 2], [3, 4], [5, 6]], (row, array) => {\n   *   D(row).setOf('td', array, (col, number) => {\n   *     D(col).text(number);\n   *   });\n   * });\n   */\n  setOf(type, iterator, callback) {\n    validate({ 2: callback }, { 2: ['function'] }, 'Elem#setOf');\n\n    iterator = new Super(iterator).$;\n\n    if (isNumber(iterator)) {\n      try {\n        validate({ 1: iterator }, { 1: ['intLike', '>=0'] }, 'Elem#setOf');\n      } catch (e) {\n        throw new Error('2nd argument must be either or non-negative integer, or object! (at Elem#setOf)');\n      }\n\n      iterator = array(iterator).$;\n    }\n\n    return this.object((elems, elem, index) => {\n      iterate(iterator, (value, key) => {\n        const created = new Elem(elem).create(type);\n\n        callback(created.$[0], value, key, iterator, elem, index);\n\n        elems.add(created);\n      });\n    }, new Elem());\n  }\n\n  /**\n   * @method Elem#show\n   * @public\n   * @returns {Elem} Returns this.\n   * @description Shows all elements in the set.\n   * If an element was hidden using {@link Elem#hide} previous display is set.\n   *\n   * @example\n   * elem.show();\n   */\n  show() {\n    return this.forEach((elem) => {\n      const { dwayneData } = elem;\n\n      elem = new Elem(elem);\n\n      if (elem.css('display').indexOf('none') === 0) {\n        elem.css('display', dwayneData.previousDisplay);\n      }\n\n      dwayneData.previousDisplay = '';\n    });\n  }\n\n  /**\n   * @method Elem#text\n   * @public\n   * @param {String|ElemValueCallback|*} [text] - Text to write instead of current text.\n   * @returns {Elem|String} If no arguments passed text of the first element in the set returned.\n   * Otherwise all elements texts in the set are set to the text argument.\n   * @description Gets or sets text.\n   *\n   * @example\n   * elem.text('123');\n   * elem.text(); // '123'\n   */\n  text(text) {\n    if (!arguments.length) {\n      return this.prop(textProperty);\n    }\n\n    return this.forEach((elem, index) => {\n      const txt = elem[textProperty];\n\n      new Elem(elem)\n        .html('')\n        .addText(\n          isFunction(text)\n            ? text(txt, elem, index)\n            : text\n        );\n    });\n  }\n\n  /**\n   * @method Elem#toggleAttr\n   * @public\n   * @param {String} attr - Attribute to toggle.\n   * @param {Boolean|*} [condition] - If present and the condition is truthy method adds the attribute\n   * with the '' value and if falsey method removes the attribute. If not present method adds\n   * the attribute if it doesn't exist and removes if it does.\n   * @returns {Elem} Returns this.\n   * @description Method for toggling attributes.\n   *\n   * @example\n   * elem.toggleAttr('attr');\n   * elem.toggleAttr('attr', someCondition);\n   */\n  toggleAttr(attr, condition) {\n    return this.forEach((elem) => {\n      elem = new Elem(elem);\n\n      if (arguments.length < 2 ? !elem.hasAttr(attr) : condition) {\n        elem.attr(attr, '');\n      } else {\n        elem.removeAttr(attr);\n      }\n    });\n  }\n\n  /**\n   * @method Elem#toggleAttr\n   * @public\n   * @param {String} cls - Class to toggle.\n   * @param {Boolean|*} [condition] - If present and the condition is truthy method adds the class\n   * and if falsey method removes the class. If not present method adds\n   * the class if it doesn't exist and removes if it does.\n   * @returns {Elem} Returns this.\n   * @description Method for toggling classes.\n   *\n   * @example\n   * elem.toggleClass('cls');\n   * elem.toggleClass('cls', someCondition);\n   */\n  toggleClass(cls, condition) {\n    return (arguments.length < 2 ? !this.hasClass(cls) : condition)\n      ? this.addClass(cls)\n      : this.removeClass(cls);\n  }\n\n  get toStringTag() {\n    return toStringTag(this.$$);\n  }\n\n  /**\n   * @method Elem#up\n   * @param {Integer} [level = 1] - What level up along the tree should be the parent.\n   * @returns {Elem} New instance of Elem.\n   * @description Creates a collection of parents of level &lt;level&gt;.\n   *\n   * @example\n   * elem.up();\n   * elem.up(2);\n   */\n  up(level = 1) {\n    validate([level], [['intLike', '>=0']], 'Elem#up');\n\n    level = Number(level);\n\n    return this.object((elems, elem) => {\n      let n = level;\n\n      while (n-- && elem) {\n        elem = elem.parentElement;\n      }\n\n      elems.add(elem);\n    }, new Elem());\n  }\n\n  /**\n   * @method Elem#validate\n   * @public\n   * @param {ValidateCallback} [validator] - If present, function that validates inputs.\n   * @returns {Elem|Object.<String, Error|*>|{ form: Error?, inputs: <Object.<String, Error>>|null }|null}\n   * If a callback argument provided returns this. If no arguments provided returns either an object\n   * with input names keys and errors values or null if no errors found.\n   * @description If a callback argument provided adds it to the element validators list. If no arguments provided\n   * validates every input element in the set with its own functions. If an element is a form it validates all input elements inside it.\n   *\n   * @example\n   * form.on('input change', 'input', (value, input) => {\n   *   const $input = D(input);\n   *\n   *   if (Number(value) %3) {\n   *     $input.attr('invalid', '');\n   *\n   *     throw new Error('The value should be divided by 3!');\n   *   }\n   *\n   *   $input.removeAttr('invalid');\n   * });\n   */\n  validate(validator) {\n    validate([validator], ['function||!'], 'Elem#validate');\n\n    if (validator) {\n      return this.forEach(({ dwayneData }) => {\n        dwayneData.validators.push(validator);\n      });\n    }\n\n    let errors = null;\n\n    this\n      .filter(`${ inputElements }, form`)\n      .forEach((elem, index) => {\n        if (getName(elem) === 'form') {\n          return new Elem(elem)\n            .find(inputElements)\n            .forEach((input, index) => {\n              validatorWrap(input, index);\n            });\n        }\n\n        validatorWrap(elem, index);\n      });\n\n    function validatorWrap(input, index) {\n      try {\n        if (input.validity && !input.validity.valid) {\n          throw new Error(input.validationMessage);\n        }\n\n        input.dwayneData.validators.forEach((validator) => {\n          validator(input.value, input, index);\n        });\n      } catch (err) {\n        (errors = errors || {})[input.name] = err;\n      }\n    }\n\n    return errors;\n  }\n\n  /**\n   * @method Elem#width\n   * @public\n   * @param {*|ElemValueCallback} [width] - Width to set.\n   * @returns {Elem|String} If no arguments passed width of the first element in the set returned.\n   * Otherwise all elements widths in the set are set to the width argument.\n   * @description Gets or sets width.\n   *\n   * @example\n   * elem.width(123);\n   * elem.width(); // 123\n   */\n  width(width) {\n    return this.prop.apply(this, new Arr(arguments).unshift('width').$);\n  }\n}\n\ndefineProperties(Elem.prototype, {\n  [Symbol.toStringTag]: 'Elem'\n});\n\n/**\n * @const {Elem} win\n * @type {Elem}\n * @public\n * @description Elem instance of window.\n */\nexport const win = new Elem(global);\n\n/**\n * @const {Elem} doc\n * @type {Elem}\n * @public\n * @description Elem instance of document.\n */\nexport const doc = new Elem(nativeDocument);\n\n/**\n * @const {Elem} html\n * @type {Elem}\n * @public\n * @description Elem instance of document.documentElement.\n */\nexport const html = new Elem(nativeDocument.documentElement);\n\n/**\n * @const {Elem} body\n * @type {Elem}\n * @public\n * @description Elem instance of document.body.\n */\nexport const body = new Elem(nativeDocument.body);\n\n/**\n * @const {Elem} head\n * @type {Elem}\n * @public\n * @description Elem instance of document.head.\n */\nexport const head = new Elem(nativeDocument.head);\n\ndynamicDefineProperties(Elem.prototype, elements, (elem) => function () {\n  return this.create.apply(this, new Arr(arguments).unshift(elem).$);\n});\n\ndynamicDefineProperties(Elem.prototype, canvasGetMethods, (method) => function () {\n  const ctx = this.ctx();\n\n  if (ctx) {\n    return ctx[method].apply(ctx, arguments);\n  }\n});\n\ndynamicDefineProperties(Elem.prototype, canvasRestMethods, (method) => function () {\n  const ctx = this.ctx();\n\n  if (ctx) {\n    ctx[method].apply(ctx, arguments);\n  }\n\n  return this;\n});\n\n/**\n * @function toFind\n * @private\n * @param {Element|Elem|String} elem - Element, selector of Elements or Elem.\n * @returns {Elem} Instance of Elem.\n */\nfunction toFind(elem) {\n  if (isString(elem)) {\n    elem = find(elem);\n  }\n\n  return new Elem(elem);\n}\n\n/**\n * @function isElem\n * @private\n * @param {*} value - Value to check if it's Elem.\n * @returns {Boolean} If the value is Elem.\n * @description Returns if the value is Elem or not.\n */\nfunction isElem(value) {\n  return value instanceof Elem;\n}\n\n/**\n * @function isWindow\n * @private\n * @param {*} value - Value to check if it's Window.\n * @returns {Boolean} If the value is Window.\n * @description Returns if the value is Window or not.\n */\nfunction isWindow(value) {\n  return toStringTag(value) === 'Window';\n}\n\n/**\n * @function isHTMLDocument\n * @private\n * @param {*} value - Value to check if it's HTMLDocument.\n * @returns {Boolean} If the value is HTMLDocument.\n * @description Returns if the value is HTMLDocument or not.\n */\nfunction isHTMLDocument(value) {\n  return toStringTag(value) === 'HTMLDocument';\n}\n\n/**\n * @function getElem\n * @private\n * @param {Elem} elem - Element to check.\n * @returns {Element} The argument or a fallback if needed.\n */\nfunction getElem(elem) {\n  return elem.$[0] || emptyDiv;\n}\n\n/**\n * @function getName\n * @private\n * @param {Element} [elem] - Element which name is needed to know.\n * @returns {String} Elements name\n */\nfunction getName(elem) {\n  return (elem && elem.tagName && elem.tagName.toLowerCase()) || '';\n}\n\n/**\n * @function addDwayneData\n * @private\n * @param {Element} elem - Element to add dwayneData to.\n * @returns {void}\n */\nfunction addDwayneData(elem) {\n  if (!{}.hasOwnProperty.call(elem, 'dwayneData') && !isWindow(elem)) {\n    /**\n     * @member Element#dwayneData\n     * @type {Object}\n     * @protected\n     * @property {String} previousDisplay - Parameter used for hiding/showing elements.\n     * @property {Object.<String, Super>} removeListeners - Parameter used for remove event listeners.\n     * @property {CanvasRenderingContext2D} [ctx] - Canvas rendering context.\n     * @property {Arr} validators - Validators assigned to element.\n     * @description D data.\n     */\n    Object.defineProperty(elem, 'dwayneData', {\n      value: {\n        previousDisplay: '',\n        listeners: {},\n        ctx: getName(elem) === 'canvas' && elem.getContext('2d'),\n        validators: new Arr([])\n      }\n    });\n  } else if (!windowsDwayneData.some(({ element }) => element === elem)) {\n    windowsDwayneData.push({\n      element: elem,\n      listeners: {}\n    });\n  }\n}\n\nconstructors[2].push({\n  check: (elem) => (\n    isElement(elem) ||\n    isWindow(elem) ||\n    isHTMLDocument(elem) ||\n    /^(HTMLCollection|NodeList)$/.test(toStringTag(elem))\n  ),\n  cls: Elem\n});\n\n/**\n * @function find\n * @public\n * @param {String} selector - Selector to find.\n * @param {Element} [base = document] - Base to find in.\n * @returns {Elem} New instance of Elem.\n * @description Synonym for\n * [Document#querySelectorAll]{@link https://developer.mozilla.org/en/docs/Web/API/Document/querySelectorAll}.\n */\nexport function find(selector, base = nativeDocument) {\n  return new Elem(base.querySelectorAll(String(selector)));\n}\n\n/**\n * @function parseHTML\n * @public\n * @param {String} html - HTML to parse.\n * @returns {Elem} New instance of Elem.\n * @description Parses HTML and returns the contents.\n *\n * @example\n * parseHTML('&lt;div&gt;123&lt;/div&gt;'); // Elem\n */\nexport function parseHTML(html) {\n  return doc\n    .div()\n    .html(html)\n    .children();\n}\n\n/**\n * @function px\n * @public\n * @param {String|Number} size - String containing pixels value or a number.\n * @returns {Number} Number of pixels.\n * @description Function for parsing pixel strings.\n *\n * @example\n * px('0px');  // 0\n * px('42px'); // 42\n */\nexport function px(size) {\n  return Number(String(size).replace(/px$/, ''));\n}\n\nexport default Elem;\n","/**\n * @module Router\n * @private\n * @mixin\n * @description Exports Router class.\n */\n\nimport Arr from './Arr';\nimport Elem, { find, win } from './Elem';\nimport Func from './Func';\nimport Promise from './Promise';\nimport Str from './Str';\nimport Super from './Super';\nimport { switcher } from './Switcher';\nimport {\n  isFunction, isNull, isNullOrUndefined, isRegExp, isString,\n  assign, iterate, defineProperties\n} from './helpers';\nimport constructURL from './helpers/constructURL';\nimport resolveURL from './helpers/resolveURL';\n\n/**\n * @typedef {Object} URLOptions\n * @public\n * @property {Object} [params = {}] - URL params.\n * @property {Object} [query = {}] - Query params.\n * @property {String} [hash = ''] - Hash.\n */\n\n/**\n * @event Router#event\n * @public\n * @description Router event.\n */\n\n/**\n * @method Router#event#pause\n * @public\n * @description Method that pauses the event propagation. Only {@link Router#event:beforeLeave} and\n * {@link Router#event:beforeLoad} can be paused.\n *\n * @example\n * event.pause();\n */\n\n/**\n * @method Router#event#continue\n * @public\n * @description Method that continues the event propagation. Only {@link Router#event:beforeLeave} and\n * {@link Router#event:beforeLoad} can be paused therefore continued.\n *\n * @example\n * event.continue();\n */\n\n/**\n * @method Router#event#stop\n * @public\n * @description Method that stops the event propagation. Only {@link Router#event:beforeLeave} and\n * {@link Router#event:beforeLoad} can be stopped.\n *\n * @example\n * event.stop();\n */\n\n/**\n * @event Router#event:init\n * @public\n * @property {String} type - 'init' string.\n * @description Router init event. Is fired once after Router.init has been called\n * and Router initialization. It cannot be [paused]{@link Router#event#pause}\n * or [stopped]{@link Router#event#stop}.\n */\n\n/**\n * @event Router#event:beforeLeave\n * @public\n * @property {String} type - 'beforeLeave' string.\n * @property {Router} state - Current state.\n * @property {URL} url - Current URL.\n * @property {URL} toURL - URL the redirect goes to.\n * @description Router beforeLeave event. Is fired when an attempt to leave the state happened\n * (or it bubbled to the parent state). It can be [paused]{@link Router#event#pause}\n * and [stopped]{@link Router#event#stop}.\n */\n\n/**\n * @event Router#event:leave\n * @public\n * @property {String} type - 'leave' string.\n * @property {Router} state - Current state.\n * @property {URL} url - Current URL.\n * @property {URL} toURL - URL the redirect goes to.\n * @description Router leave event. Is fired right after {@link Router#event:beforeLeave} has been fired.\n * It cannot be [paused]{@link Router#event#pause} or [stopped]{@link Router#event#stop}.\n */\n\n/**\n * @event Router#event:beforeLoad\n * @public\n * @property {String} type - 'beforeLoad' string.\n * @property {Router} state - Loading state.\n * @property {URL} url - Loading URL.\n * @description Router beforeLoad event. Is fired when the URL has been already changed after\n * {@link Router#event:leave} has been fired, after the only {@link Router#event:init}\n * has been fired and after browser back or forward buttons has been pressed.\n * It can be [paused]{@link Router#event#pause} and [stopped]{@link Router#event#stop}\n * preventing the state from loading and causing going to the next matched state.\n * Is fired from the Router state down to the loading state.\n */\n\n/**\n * @event Router#event:load\n * @public\n * @property {String} type - 'leave' string.\n * @property {Router} state - Loading state.\n * @property {URL} url - Loading URL.\n * @description Router load event. Is fired right after {@link Router#event:beforeLoad} has been fired.\n * It cannot be [paused]{@link Router#event#pause} or [stopped]{@link Router#event#stop}.\n * Is fired from the Router state down to the loading state.\n */\n\n/**\n * @event Router#event:render\n * @public\n * @property {String} type - 'render' string.\n * @property {Router} state - Rendering state.\n * @property {URL} url - Loading URL.\n * @description Router load event. Is fired right after {@link Router#event:beforeLoad} has been fired.\n * It cannot be [paused]{@link Router#event#pause} or [stopped]{@link Router#event#stop}.\n * In order to render the state there should be an element with the \"dwayne-router-state\" attribute\n * set to the state name. States are rendered from the Router down to the current state.\n */\n\n/**\n * @callback RouterRemoveListeners\n * @public\n * @param {String} [event] - If not specified all listeners are removed.\n * Otherwise only specified by the name are to be removed.\n */\n\nconst extendLink = 'https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Classes#Sub_classing_with_extends';\nconst stateAttrName = 'dwayne-router-state';\nconst isPrototypeOf = {}.isPrototypeOf;\nconst {\n  URL,\n  history,\n  location,\n  location: {\n    origin,\n    href\n  }\n} = global;\nconst stoppable = new Arr(['beforeLeave', 'beforeLoad']);\nconst stopError = new Error();\nconst states = new Arr([]);\nconst pathSwitcher = switcher('call', () => {\n  throw new Error('State path must be a string, a regular expression or undefined! (at registerState)');\n})\n  .case(isRegExp, (path) => ({\n    path: path.source.replace(/\\\\\\//g, '/'),\n    url: path,\n    params: {}\n  }))\n  .case(isNullOrUndefined, () => ({\n    path: '/',\n    url: '/',\n    params: {}\n  }))\n  .case(isString, (path) => {\n    if (path.indexOf('/')) {\n      throw new Error('If state path is a string it must start with \"/\"! (at registerState)');\n    }\n\n    const index = path.indexOf('?');\n    const params = new Super({});\n    let newURL = '';\n    const newPath = new Str(path)\n      .slice(0, index === -1 ? path.length : index)\n      .replace(/^\\/|\\/$/g)\n      .split(/\\//)\n      .map((part, i, array) => {\n        if (!part && array.length > 1) {\n          throw new Error('If state path is a string it must not contain \"//\" or end with \"/\"! (at registerState)');\n        }\n\n        const index = part.indexOf(':');\n\n        if (index > 0) {\n          throw new Error('If state path is a string resource part must be either a string or an URL parameter! (at registerState)');\n        }\n\n        if (index === -1) {\n          return {\n            url: part,\n            value: part\n          };\n        }\n\n        const {\n          name,\n          regexp = /[^\\/]*/\n        } = resolveParameter(\n          part.slice(1),\n          'URL parameter must not be an empty string or contain characters besides \"a-zA-Z_$\"! (at registerState)',\n          'URL parameter regexp validator must be within parentheses (e.g. :userId(\\\\d+) and not contain ones)! (at registerState)'\n        );\n\n        params.$[name] = params.count;\n\n        return {\n          type: 'param',\n          url: `:${ name }`,\n          value: regexp\n        };\n      })\n      .word(({ type, url, value }) => {\n        let newPath;\n\n        if (type === 'param') {\n          newPath = `(${ value.source.replace(/\\\\\\//g, '/') })`;\n        } else {\n          newPath = new Str(value).escapeRegExp().$;\n        }\n\n        newURL += `/${ url }`;\n\n        return `/${ newPath }`;\n      });\n\n    return {\n      path: newPath,\n      url: newURL,\n      params: params.$\n    };\n  });\n\nlet eventPromise = Promise.resolve();\nlet pushed;\nlet initialized;\nlet routerLoaded;\nlet router;\nlet pageTitle;\nlet pageIcon;\nlet defaultState;\nlet currentState;\nlet currentURL = new URL(location.href);\nlet currentTitle;\nlet currentIcon;\n\n/**\n * @class Router\n * @public\n * @param {Object} props - Always pass props to the super constructor from the Router subclasses.\n * @returns {Router} New instance of Router state.\n * @description Wrap of an array.\n *\n * @example\n * Class for routing the app. It uses [History API]{@link https://developer.mozilla.org/en/docs/Web/API/History_API}.\n * You can redirect and go to parts of your app not reloading the page (changing the URL).\n * URLs and queries can be validates. There can hooks (such as {@link Router#event:beforeLoad},\n * {@link Router#event:load}, {@link Router#event:beforeLeave}, {@link Router#event:leave}\n * and {@link Router#event:render}). Don't try to call new <YourState>() or new Router().\n * All following examples contain proposed syntax for class properties.\n */\nexport class Router {\n  /**\n   * @member {Object} Router.$$\n   * @type {Object}\n   * @protected\n   * @property {Object} listeners - State listeners.\n   * @property {Arr} [states] - All states. Only Router has this property.\n   * @property {Router} [state] - Current state. Only Router has this property.\n   * @description Config object.\n   */\n  static $$ = {\n    listeners: {},\n    state: null,\n    states\n  };\n\n  /**\n   * @member {Router} Router.parent\n   * @type {Router}\n   * @protected\n   * @description Parent state.\n   */\n  static parent = null;\n\n  /**\n   * @member {Arr} Router.children\n   * @type {Arr}\n   * @protected\n   * @description Children states.\n   */\n  static children = new Arr([]);\n\n  /**\n   * @member {RegExp} Router.validatePath\n   * @type {RegExp}\n   * @protected\n   * @description Regexp to validate the URL. Created during the router initialization.\n   */\n  static validatePath = /^\\/$/;\n\n  /**\n   * @member {String} Router.url\n   * @type {String}\n   * @protected\n   * @description State matching URL. Generated during the router initialization.\n   */\n  static url = '/';\n\n  /**\n   * @member {String} Router.relativePath\n   * @type {String}\n   * @protected\n   * @description State matching relative path. Generated during the state registration.\n   */\n  static relativePath = '/';\n\n  /**\n   * @member {String|RegExp} Router.relativeURL\n   * @type {String|RegExp}\n   * @protected\n   * @description State matching relative URL. Generated during the state registration.\n   */\n  static relativeURL = '/';\n\n  /**\n   * @member {Object} Router.params\n   * @type {Object}\n   * @protected\n   * @description State URL params. Generated during the state registration.\n   */\n  static params = {};\n\n  /**\n   * @member {Object} Router.query\n   * @type {Object}\n   * @protected\n   * @description State query params. Generated during the state registration.\n   */\n  static query = {};\n\n  /**\n   * @member {Boolean} Router.abstract\n   * @type {Boolean}\n   * @public\n   * @description If the states should be abstract or not. Abstract state cannot be current state.\n   * This field is not required and defaults to false.\n   */\n  static abstract = false;\n\n  /**\n   * @member {String} Router.stateName\n   * @type {String}\n   * @public\n   * @description A unique name bound to state. Required.\n   */\n  static stateName = null;\n\n  /**\n   * @member {String|RegExp} Router.path\n   * @type {String|RegExp}\n   * @public\n   * @description State path relative to the parent state. Must begin with \"/\" if present.\n   * Not required and defaults to \"/\".\n   */\n  static path = '/';\n\n  /**\n   * @member {String|Function} Router.template\n   * @type {String|Function}\n   * @public\n   * @description State template. Can be either a static string template\n   * or a generated function from your javascript templates provider.\n   * Not required and defaults to \"\".\n   */\n  static template = '';\n\n  /**\n   * @member {Object} Router.templateParams\n   * @type {Object}\n   * @public\n   * @description State template params (for javascript templates).\n   * During the Router initialization are inherited from the parent state template params.\n   * Not required and defaults to {}.\n   */\n  static templateParams = {};\n\n  /**\n   * @member {Boolean} Router.encodeParams\n   * @type {Boolean}\n   * @public\n   * @description If the URL params should be encoded during the URL building (see {@link Router.buildURL}).\n   * Not required and inherited from the parent state. Router default value is true.\n   */\n  static encodeParams = true;\n\n  /**\n   * @member {Boolean} Router.decodeParams\n   * @type {Boolean}\n   * @public\n   * @description If the URL params should be decoded during the state initialization.\n   * Not required and inherited from the parent state. Router default value is true.\n   */\n  static decodeParams = true;\n\n  /**\n   * @member {Boolean} Router.encodeQuery\n   * @type {Boolean}\n   * @public\n   * @description If the query params should be encoded during the URL building (see {@link Router.buildURL}).\n   * Not required and inherited from the parent state. Router default value is true.\n   */\n  static encodeQuery = true;\n\n  /**\n   * @member {Boolean} Router.decodeQuery\n   * @type {Boolean}\n   * @public\n   * @description If the query params should be decoded during the state initialization.\n   * Not required and inherited from the parent state. Router default value is true.\n   */\n  static decodeQuery = true;\n\n  /**\n   * @member {Boolean} Router.icon\n   * @type {String}\n   * @public\n   * @description URL to the app icon (one within the tab). To set icons you should create a link element\n   * with \"dwayne-router-icon\" id. Router will set href itself.\n   * Not required and inherited from the parent state. Router default value is null.\n   */\n  static icon = null;\n\n  /**\n   * @member {Boolean} Router.title\n   * @type {String}\n   * @public\n   * @description App title (one within the tab). To set title you should create a title element\n   * with \"dwayne-router-title\" id. Router will set the value itself.\n   * Not required and inherited from the parent state. Router default value is null.\n   */\n  static title = null;\n\n  /**\n   * @member {Router} Router.default\n   * @type {Router}\n   * @public\n   * @description Works with Router only. Default Router state.\n   */\n  static get default() {\n    return defaultState;\n  }\n  // noinspection JSAnnotator\n  static set default(state) {\n    if (states.indexOf(state) === -1) {\n      throw new Error('State must be registered! (Router.default)');\n    }\n\n    const {\n      abstract,\n      path,\n      params,\n      query\n    } = state;\n\n    if (abstract) {\n      throw new Error('Default state must not be abstract! (Router.default)');\n    }\n\n    if (isRegExp(path)) {\n      throw new Error('Default state must not have regexp path! (Router.default)');\n    }\n\n    if (new Super(params).count || new Super(query).count) {\n      throw new Error('Default state must not have URL or query params! (Router.default)');\n    }\n\n    defaultState = state;\n  }\n\n  /**\n   * @method Router.buildURL\n   * @public\n   * @param {String} [relativeToURL = location.href] - Relative to what URL new URL should be built.\n   * @param {URLOptions} [options = {}] - URL options.\n   * @returns {String} Built URL.\n   * @description Method for building URLs that guaranteed to be matched by this state.\n   * Works properly only after {@link Router#event:init} has been fired.\n   *\n   * @example\n   * class MyState extends Router {\n   *   static stateName = 'myState';\n   *   static path = '/user/:userId';\n   * }\n   *\n   * registerState(MyState);\n   *\n   * Router.on('init', () => {\n   *   MyState.buildURL({\n   *     params: {\n   *       userId: 42\n   *     },\n   *     query: {\n   *       param: 'value'\n   *     }\n   *   }); // '<yourOrigin>/user/42?param=value'\n   * });\n   */\n  static buildURL(relativeToURL = location.href, options = {}) {\n    if (arguments.length === 1 && !isString(relativeToURL)) {\n      options = relativeToURL;\n      relativeToURL = location.href;\n    }\n\n    const { url } = this;\n\n    if (isRegExp(url)) {\n      throw new Error('URL can be built only from the string URLs! (Router.buildURL)');\n    }\n\n    const {\n      params = {},\n      query = {},\n      hash = ''\n    } = options;\n\n    const {\n      origin,\n      pathname\n    } = new URL(url, relativeToURL);\n\n    return constructURL(origin, pathname, params, query, hash, {\n      params: this.encodeParams,\n      query: this.encodeQuery\n    });\n  }\n\n  /**\n   * @method Router.go\n   * @public\n   * @fires Router#event:beforeLeave\n   * @param {URLOptions} [options = {}] - URL options.\n   * @description Method combines {@link Router#buildURL} and {@link go}.\n   *\n   * @example\n   * class MyState extends Router {\n   *   static stateName = 'myState';\n   *   static path = '/user/:userId';\n   * }\n   *\n   * registerState(MyState);\n   *\n   * Router.on('init', () => {\n   *   MyState.go({\n   *     params: {\n   *       userId: 42\n   *     },\n   *     query: {\n   *       param: 'value'\n   *     }\n   *   });\n   * });\n   */\n  static go(options) {\n    if (this.abstract) {\n      throw new Error('Cannot go to an abstract state! (at Router.go)');\n    }\n\n    go(this.buildURL(options));\n  }\n\n  /**\n   * @method Router.redirect\n   * @public\n   * @fires Router#event:beforeLeave\n   * @param {URLOptions} [options = {}] - URL options.\n   * @description Method combines {@link Router#buildURL} and {@link redirectTo}.\n   *\n   * @example\n   * class MyState extends Router {\n   *   static stateName = 'myState';\n   *   static path = '/user/:userId';\n   * }\n   *\n   * registerState(MyState);\n   *\n   * Router.on('init', () => {\n   *   MyState.redirect({\n   *     params: {\n   *       userId: 42\n   *     },\n   *     query: {\n   *       param: 'value'\n   *     }\n   *   });\n   * });\n   */\n  static redirect(options) {\n    if (this.abstract) {\n      throw new Error('Cannot go to an abstract state! (at Router.go)');\n    }\n\n    redirectTo(this.buildURL(options));\n  }\n\n  /**\n   * @method Router.init\n   * @public\n   * @fires Router#event:init\n   * @description Method for initializing Router.\n   * Note that method like {@link Router.buildURL} and {@link Router.go}\n   * don't work properly until the 'init' event is fired. In order to initialize Router\n   * there should be an element with the \"dwayne-router\" id (content of the Router states).\n   *\n   * @example\n   * Router.init();\n   */\n  static init() {\n    initialized = true;\n\n    initialize();\n  }\n\n  /**\n   * @method Router.on\n   * @public\n   * @listens Router#event\n   * @param {String|Object.<String|Listener>} event - Either a event string\n   * or an object with event keys and listeners values.\n   * @param {Listener} [listener] - If the first argument is a string it must be a listener function for\n   * specified event.\n   * @returns {RouterRemoveListeners} Function that can remove listeners that has just been set.\n   * @description Method for listening to all events you want. beforeLeave\n   */\n  static on(event, listener) {\n    if (arguments.length >= 2) {\n      event = { [event]: listener };\n    }\n\n    const { listeners } = this.$$;\n    const allListeners = {};\n\n    iterate(event, (listener, event) => {\n      const array = listeners[event] || new Arr([]);\n\n      listener = new Func(listener).bindContext(this);\n\n      allListeners[event] = listener;\n      (listeners[event] = array).push(listener);\n    });\n\n    return function removeEventListeners(event) {\n      let actualListeners = allListeners;\n\n      if (allListeners[event]) {\n        actualListeners = { [event]: allListeners[event] };\n      }\n\n      iterate(actualListeners, (listener, event) => {\n        const eventListeners = listeners[event];\n\n        const found = eventListeners.find((l) => l === listener);\n\n        if (found) {\n          eventListeners.splice(found.key);\n        }\n      });\n    };\n  }\n\n  /**\n   * @member {Elem} Router#base\n   * @type {Elem}\n   * @public\n   * @description State rendering base node.\n   * Created before firing {@link Router#event:render}.\n   */\n  base = router;\n\n  /**\n   * @member {String} Router#name\n   * @type {String}\n   * @public\n   * @description State name (inherited from the constructor).\n   * Created during state initialization.\n   */\n  name = null;\n\n  /**\n   * @member {URL} Router#url\n   * @type {URL}\n   * @public\n   * @description State URL.\n   * Created during state initialization.\n   */\n  url = new URL(location.href);\n\n  /**\n   * @member {Object} Router#params\n   * @type {Object}\n   * @public\n   * @description State URL params.\n   * Created during state initialization.\n   */\n  params = {};\n\n  /**\n   * @member {Object} Router#query\n   * @type {Object}\n   * @public\n   * @description State query params.\n   * Created during state initialization.\n   */\n  query = {};\n\n  /**\n   * @member {String} Router#hash\n   * @type {String}\n   * @public\n   * @description State query params.\n   * Created during state initialization.\n   */\n  hash = '';\n\n  /**\n   * @member {Object} Router#templateParams\n   * @type {Object}\n   * @public\n   * @description State template params. Inherited from the constructor template params.\n   * Can be changed before rendering in beforeLoad or load event listeners.\n   * Created during state initialization.\n   */\n  templateParams = new Super(new Super(this).proto().$.constructor.templateParams).create().$;\n\n  constructor(props = {}) {\n    assign(this, props);\n  }\n\n  /**\n   * @method Router#onBeforeLeave\n   * @public\n   * @listens Router#event:beforeLeave\n   * @param {Router#event:beforeLeave} event - Fired event.\n   * @description Called on beforeLeave event. Called after the listeners.\n   */\n  onBeforeLeave() {}\n\n  /**\n   * @method Router#onBeforeLoad\n   * @public\n   * @listens Router#event:beforeLoad\n   * @param {Router#event:beforeLoad} event - Fired event.\n   * @description Called on beforeLoad event. Called after the listeners.\n   */\n  onBeforeLoad() {}\n\n  /**\n   * @method Router#onInit\n   * @public\n   * @listens Router#event:init\n   * @param {Router#event:init} event - Fired event.\n   * @description Called on init event. Called after the listeners.\n   */\n  onInit() {}\n\n  /**\n   * @method Router#onLeave\n   * @public\n   * @listens Router#event:leave\n   * @param {Router#event:leave} event - Fired event.\n   * @description Called on leave event. Called after the listeners.\n   */\n  onLeave() {}\n\n  /**\n   * @method Router#onLoad\n   * @public\n   * @listens Router#event:load\n   * @param {Router#event:load} event - Fired event.\n   * @description Called on load event. Called after the listeners.\n   */\n  onLoad() {}\n\n  /**\n   * @method Router#onRender\n   * @public\n   * @listens Router#event:render\n   * @param {Router#event:render} event - Fired event.\n   * @description Called on render event. Called after the listeners.\n   */\n  onRender() {}\n}\n\nconst MainState = Router.prototype;\n\ndefaultState = Router;\n\n/**\n * @function redirect\n * @private\n * @param {URL} newURL - New URL to go to.\n * @param {Boolean} [push] - If it's need to push state or rather replace it.\n */\nfunction redirect(newURL, push) {\n  eventPromise = eventPromise\n    .then(() => dispatchNewEvent('beforeLeave'))\n    .then(() => dispatchNewEvent('leave'))\n    .then(() => {\n      (currentState ? currentState.base : new Elem([]))\n        .hide()\n        .html('');\n    })\n    .then(() => beforeLoad(newURL, push ? 'pushState' : 'replaceState'))\n    .catch(handleError)\n    .catch(() => {});\n\n  function dispatchNewEvent(type) {\n    return dispatchEvent(new Super({}).value({\n      type,\n      state: currentState,\n      url: newURL,\n      toURL: currentURL\n    }).$);\n  }\n}\n\n/**\n * @function beforeLoad\n * @private\n * @param {URL} newURL - New URL to load.\n * @param {'pushState'|'replaceState'|undefined} action - Action to do.\n * @returns {Promise}\n */\nfunction beforeLoad(newURL, action) {\n  if (newURL.origin !== origin) {\n    location.href = newURL.href;\n\n    return Promise.reject(stopError);\n  }\n\n  const { hash } = resolveURL(newURL, Router.decodeQuery);\n  let newState;\n\n  return Promise.resolve()\n    .then(() => {\n      let promise = Promise.reject();\n\n      findStatesByURL(newURL).forEach(({ state, params, query }) => {\n        promise = promise\n          .catch(() => {\n            newState = new state({\n              name: state.stateName,\n              url: newURL,\n              params,\n              query,\n              hash\n            });\n\n            return dispatchNewEvent('beforeLoad');\n          });\n      });\n\n      return promise;\n    })\n    .then(() => {\n      if (action) {\n        history[action](null, null, newURL.href);\n      }\n\n      pushed = true;\n\n      currentState = Router.$$.state = newState;\n      currentURL = newURL;\n\n      return dispatchNewEvent('load');\n    })\n    .then(() => {\n      const proto = new Super(newState).proto().$.constructor;\n      const renderStates = new Arr([proto]);\n      const {\n        stateName,\n        templateParams\n      } = newState;\n      const {\n        title,\n        icon\n      } = proto;\n      const ownTemplateParams = new Super(templateParams).clone();\n      let state = proto;\n      let promise = Promise.resolve();\n\n      while (!getStateBase(state).length && (state = state.parent)) {\n        renderStates.unshift(state);\n      }\n\n      find(`[${ stateAttrName }]`).forEach((elem) => {\n        elem = new Elem(elem);\n\n        const stateNameFromAttr = elem.attr(stateAttrName);\n        const { value: foundState } = states.find(({ stateName }) => stateName === stateNameFromAttr) || {};\n\n        if (!foundState || (stateNameFromAttr !== stateName && !(newState instanceof foundState))) {\n          elem\n            .hide()\n            .html('');\n        }\n      });\n\n      renderStates.forEach((state) => {\n        const {\n          template,\n          templateParams: parentTemplateParams\n        } = state;\n        const templateParams = new Super(parentTemplateParams)\n          .create()\n          .assign(ownTemplateParams)\n          .$;\n\n        promise = promise.then(() => {\n          const base = getStateBase(state)\n            .first()\n            .show();\n\n          try {\n            base.html(isFunction(template) ? template(templateParams) : template);\n          } catch (err) {\n            console.error('%s %o', 'Render error:', err);\n          }\n\n          base\n            .find(`[${ stateAttrName }]`)\n            .hide();\n\n          if (state === proto) {\n            newState.base = base;\n\n            if (!isNull(title) && title !== currentTitle) {\n              pageTitle.text(currentTitle = title);\n            }\n\n            if (!isNull(icon) && icon !== currentIcon) {\n              pageIcon.ref(currentIcon = icon);\n            }\n          }\n\n          return dispatchNewEvent('render', state);\n        });\n      });\n\n      return promise;\n    })\n    .catch(handleError)\n    .catch(() => {});\n\n  function dispatchNewEvent(type, renderingState) {\n    return dispatchEvent(new Super({}).value({\n      type,\n      state: newState,\n      url: newURL\n    }).$, renderingState);\n  }\n}\n\n/**\n * @function decode\n * @private\n * @param {String} string - String to decode.\n * @param {Boolean} decodeParams - If the string should be decoded in the first place.\n * @returns {String} Decoded string.\n */\nfunction decode(string, decodeParams) {\n  return decodeParams\n    ? decodeURIComponent(string)\n    : string;\n}\n\n/**\n * @function handleError\n * @private\n * @param {Error} err - Error to handle.\n */\nfunction handleError(err) {\n  if (err !== stopError) {\n    printError(err);\n\n    throw err;\n  }\n}\n\n/**\n * @function printError\n * @private\n * @param {Error} err - Error to log.\n */\nfunction printError(err) {\n  console.error('%s %o', 'Uncaught (in event listener)', err);\n}\n\n/**\n * @function getStateBase\n * @param {Router} state - State to find the base of.\n * @returns {Elem} State base.\n */\nfunction getStateBase(state) {\n  return state === Router ? router : find(`[${ stateAttrName }=\"${ state.stateName }\"]`);\n}\n\n/**\n * @function isInstanceOfRouterState\n * @param {Router} state - State to find out if it extends Router.\n * @returns {Boolean} If the state extends Router.\n */\nfunction isInstanceOfRouterState(state) {\n  return isPrototypeOf.call(Router, state) || isPrototypeOf.call(MainState, state.prototype);\n}\n\n/**\n * @function resolveParameter\n * @private\n * @param {String} param - Param to resolve.\n * @param {String} nameErrorName - Name error description.\n * @param {String} valueErrorName - Name error description.\n * @returns {{ name: String, regexp: RegExp|undefined }}\n */\nfunction resolveParameter(param, nameErrorName, valueErrorName) {\n  const nameMatch = param.match(/^[a-z_\\$]+/i);\n\n  if (!nameMatch) {\n    throw new Error(nameErrorName);\n  }\n\n  const name = nameMatch[0];\n  const value = param.slice(name.length);\n  let regexp;\n\n  if (value && (value.indexOf('(') || value.indexOf(')') !== value.length - 1)) {\n    throw new Error(valueErrorName);\n  }\n\n  if (value) {\n    regexp = new RegExp(value.slice(1, -1));\n  }\n\n  return {\n    name,\n    regexp\n  };\n}\n\n/**\n * @function findStatesByURL\n * @private\n * @param {URL} url - Current URL.\n * @returns {Arr} Arr of matching states.\n */\nfunction findStatesByURL(url) {\n  const pathname = url.pathname || '/';\n  const search = url.search || '';\n  const eventualStates = states.object((states, state) => {\n    if (state.abstract) {\n      return;\n    }\n\n    const {\n      url: stateURL,\n      validatePath,\n      params,\n      query: requiredQuery,\n      decodeParams,\n      decodeQuery\n    } = state;\n    const query = new Super(resolveURL(url, decodeQuery).query);\n    const eventualParams = {};\n    const match = (\n      (pathname.replace(/\\/$/, '') || '/') +\n      (isRegExp(stateURL) ? search : '')\n    ).match(validatePath);\n\n    if (!match) {\n      return false;\n    }\n\n    /* eslint guard-for-in: 0 */\n    for (const param in requiredQuery) {\n      if (!query.hasOwn(param) || !requiredQuery[param].test(query.$[param])) {\n        return;\n      }\n    }\n\n    match.shift();\n\n    for (const param in params) {\n      eventualParams[param] = decode(match[params[param]], decodeParams);\n    }\n\n    states.push({\n      state,\n      params: eventualParams,\n      query: query.$\n    });\n  }, new Arr([]));\n\n  if (eventualStates.every(({ state }) => state !== defaultState)) {\n    eventualStates.push({\n      state: defaultState,\n      params: {},\n      query: resolveURL(url, defaultState.decodeQuery).query\n    });\n  }\n\n  return eventualStates;\n}\n\n/**\n * @function dispatchEvent\n * @private\n * @param {Router#event} event - Event to be fired.\n * @param {Router} [renderingState] - If it's render event it's current rendering state.\n */\nfunction dispatchEvent(event, renderingState) {\n  let paused;\n  let stopped;\n  let continuePropagation = () => {};\n  let stopPropagation = () => {};\n  let promise = Promise.resolve();\n\n  const {\n    type,\n    state\n  } = event;\n  const isStoppable = stoppable.indexOfStrict(type) !== -1 && state && (\n    new Super(state).proto().$.constructor !== defaultState ||\n    type !== 'beforeLoad'\n  );\n\n  new Super(event).value({\n    continue() {\n      if (isStoppable) {\n        paused = false;\n        continuePropagation();\n      }\n    },\n    pause() {\n      if (isStoppable) {\n        paused = true;\n      }\n    },\n    stop() {\n      if (isStoppable) {\n        stopped = true;\n        stopPropagation();\n      }\n    }\n  });\n\n  getListeners(state, type, renderingState).forEach((listener) => {\n    promise = promise.then(() => new Promise((resolve, reject) => {\n      let finished = false;\n\n      continuePropagation = () => {\n        if (finished) {\n          resolve();\n        }\n      };\n\n      stopPropagation = () => {\n        reject(stopError);\n      };\n\n      listener(event);\n\n      finished = true;\n\n      if (stopped) {\n        return reject(stopError);\n      }\n\n      if (!paused) {\n        resolve();\n      }\n    }));\n  });\n\n  return promise.catch((err) => {\n    if (err !== stopError && !isStoppable) {\n      printError(err);\n    }\n\n    if (isStoppable) {\n      throw err;\n    }\n  });\n}\n\n/**\n * @function getListeners\n * @private\n * @param {Router} state - State to get listeners from.\n * @param {String} type - Event type.\n * @param {Router} [renderingState] - If the type is \"render\" then it's current rendering state.\n */\nfunction getListeners(state = new Super(MainState).create().$, type, renderingState) {\n  const tree = new Arr([]);\n  const desc = /leave/i.test(type);\n  const method = desc ? 'push' : 'unshift';\n  const listenerName = `on${ new Str(type).capitalizeFirst() }`;\n  let proto = new Super(state).proto().$.constructor;\n\n  while (proto) {\n    if (!renderingState || isPrototypeOf.call(proto, renderingState) || renderingState === proto) {\n      tree[method](proto);\n    }\n\n    proto = proto.parent;\n  }\n\n  return tree\n    .object((listeners, {\n      $$: {\n        listeners: ownListeners\n        },\n      prototype: proto\n    }) => {\n      if (new Super(proto).hasOwn(listenerName)) {\n        listeners.push(new Func(proto[listenerName]).bind(state));\n      }\n\n      listeners.push.apply(listeners, (ownListeners[type] || new Arr([])).$);\n    }, new Arr([]));\n}\n\n/**\n * @function initialize\n * @private\n */\nfunction initialize() {\n  if (initialized && !routerLoaded) {\n    routerLoaded = true;\n    pageTitle = find('#dwayne-router-title');\n    pageIcon = find('#dwayne-router-icon');\n\n    find(`[${ stateAttrName }]`).hide();\n\n    defineProperties(MainState, {\n      base: router = find('#dwayne-router').first()\n    });\n\n    win.on('click', (e) => {\n      const target = new Elem(e.target);\n\n      if (target.name === 'a' && target.attr('target') !== '_blank') {\n        const url = target.attr('href') || '';\n        const currentURL = location.href;\n        const newURL = new URL(url, currentURL);\n        const index = newURL.href.indexOf('#');\n\n        if (\n          index !== -1 && (\n            currentURL.indexOf('#') === -1 || (\n              currentURL.slice(index) === newURL.href.slice(index) &&\n              location.hash !== newURL.hash\n            )\n          )\n        ) {\n          return;\n        }\n\n        e.preventDefault();\n\n        redirect(newURL, true);\n      }\n    });\n\n    states.forEach((state) => {\n      const {\n        parent: {\n          children,\n          params: parentParams,\n          query: parentQuery,\n          templateParams: parentTemplateParams\n        },\n        params,\n        query,\n        templateParams,\n        relativeURL,\n        relativePath\n      } = state;\n      let proto = state;\n      let count = 0;\n      let newPath = relativePath;\n      let newURL = '';\n\n      while (proto = proto.parent) {\n        count += new Super(proto.params).count;\n        newPath = proto.relativePath + newPath;\n        newURL = proto.relativeURL + newURL;\n      }\n\n      newPath = new RegExp(`^${ newPath.replace(/\\/+/g, '/').replace(/\\/$/, '') || '/' }$`);\n      newURL = isRegExp(relativeURL)\n        ? newPath\n        : (newURL + relativeURL).replace(/\\/+/g, '/').replace(/\\/$/, '') || '/';\n\n      children.push(state);\n\n      new Super(templateParams).proto(parentTemplateParams);\n      new Super(query).proto(parentQuery);\n      new Super(params)\n        .proto(parentParams)\n        .forEach((value, key, params) => {\n          params[key] += count;\n        });\n\n      defineProperties(state, {\n        url: newURL,\n        validatePath: newPath\n      });\n    });\n\n    eventPromise = eventPromise\n      .then(() => dispatchEvent(new Super({}).value({\n        type: 'init'\n      }).$))\n      .then(() => beforeLoad(new URL(location.href)))\n      .then(() => {\n        win.on('popstate', () => {\n          if (location.href !== href) {\n            pushed = true;\n          }\n\n          if (pushed) {\n            eventPromise = eventPromise.then(() => beforeLoad(new URL(location.href)));\n          }\n        });\n      });\n  }\n}\n\n/**\n * @function go\n * @public\n * @fires Router#event:beforeLeave\n * @param {String} url - URL to go to.\n * @returns {void}\n * @description Function for directing to an URL. Can be external one or inner one.\n *\n * @example\n * go('/user/56');\n */\nexport function go(url) {\n  redirect(new URL(url, location.href), true);\n}\n\n/**\n * @function redirectTo\n * @public\n * @fires Router#event:beforeLeave\n * @param {String} url - URL to go to.\n * @returns {void}\n * @description Function for redirecting to an URL. Can be external one or inner one.\n *\n * @example\n * redirectTo('/user/56');\n */\nexport function redirectTo(url) {\n  redirect(new URL(url, location.href));\n}\n\n/**\n * @function registerState\n * @public\n * @param {Router} state - State to register.\n * @returns {void}\n * @description Function for registering states.\n *\n * @example\n * class MyState extends Router {\n *   static stateName = 'myState';\n *   static path = '/user/:userId';\n * }\n *\n * registerState(MyState);\n */\nexport function registerState(state) {\n  if (states.indexOf(state) !== -1) {\n    return;\n  }\n\n  if (!isInstanceOfRouterState(state)) {\n    throw new Error(`State must extend (${ extendLink }) Router! (at registerState)`);\n  }\n\n  const { stateName } = state;\n\n  if (!new Super(state).hasOwn('stateName') || states.find(({ stateName: n }) => n === stateName)) {\n    throw new Error('State must have unique stateName! (at registerState)');\n  }\n\n  const proto = Object.getPrototypeOf(state);\n\n  if (isRegExp(proto.url)) {\n    throw new Error('URL regexp state cannot be extended! (at registerState)');\n  }\n\n  const $state = new Super(state);\n  const path = $state.hasOwn('path')\n    ? state.path\n    : '';\n  const {\n    url: relativeURL,\n    path: relativePath,\n    params\n  } = pathSwitcher(path);\n\n  defineProperties(state, {\n    $$: {\n      listeners: {}\n    },\n\n    stateName,\n    parent: proto,\n    children: new Arr([]),\n    template: $state.hasOwn('template')\n      ? state.template\n      : '',\n    relativeURL,\n    relativePath,\n    params,\n    abstract: $state.hasOwn('abstract') && !!state.abstract,\n    templateParams: $state.hasOwn('templateParams')\n      ? state.templateParams\n      : {},\n    query: {}\n  });\n\n  const { query } = state;\n  const index = isString(path) ? path.indexOf('?') : -1;\n\n  if (index !== -1) {\n    new Str(path)\n      .replace(/&$/)\n      .slice(index + 1)\n      .split('&')\n      .forEach((param) => {\n        const {\n          name,\n          regexp = /[\\s\\S]*/\n        } = resolveParameter(\n          param,\n          'Query parameter must not be an empty string or contain characters besides \"a-zA-Z_$\"! (at registerState)',\n          'Query parameter regexp validator must be within parentheses (e.g. :userId(\\\\d+)) and not contain them! (at registerState)'\n        );\n\n        query[name] = new RegExp(`^${ regexp.source.replace(/\\\\\\//g, '/') }$`);\n      });\n  }\n\n  states.push(state);\n}\n","/* eslint no-nested-ternary: 0 */\r\n/* eslint no-negated-condition: 0 */\r\nexport default typeof window !== 'undefined' ? window : typeof global !== 'undefined' ? global : typeof self !== 'undefined' ? self : {};\r\n","/**\n * @module helpers/Symbol\n * @private\n * @description Exports Symbol class.\n */\n\nexport const Symbol = global.Symbol || {\n  toStringTag: 'Symbol.toStringTag',\n  iterator: Math.random().toString(36)\n};\n","/**\n * @module constants/validateCheckExpressions\n * @private\n * @description Exports different types of validate expressions for {@link module:helpers/validate}.\n */\n\nimport * as methods from '../helpers/checkTypes';\n\n/**\n * @callback checkValidityCallback\n * @private\n * @param {*} value - Value to check.\n */\n\n/**\n * @typedef {Object} validateExpr\n * @private\n * @property {String} text - Text of the thrown error.\n * @property {Error} error - Type of the thrown error.\n * @property {checkValidityCallback} check - Callback for checking value.\n */\n\n/**\n * @type {validateExpr[]}\n * @private\n * @description Object of different types of validation.\n */\nexport default {\n  '>0': {\n    check: (n) => n > 0,\n    text: '$n argument must be positive!',\n    error: RangeError\n  },\n  '>=0': {\n    check: (n) => n >= 0,\n    text: '$n argument must be non-negative!',\n    error: RangeError\n  },\n  '<0': {\n    check: (n) => n < 0,\n    text: '$n argument must be negative!',\n    error: RangeError\n  },\n  '<=0': {\n    check: (n) => n <= 0,\n    text: '$n argument must be non-positive!',\n    error: RangeError\n  },\n  '!!': {\n    check: methods.isNullOrUndefined,\n    text: '$n argument must be not null or undefined!',\n    error: TypeError\n  },\n  array: {\n    check: methods.isArray,\n    text: '$n argument must be an array!',\n    error: TypeError\n  },\n  'array||!': {\n    check: (a) => methods.isArray(a) || methods.isNullOrUndefined(a),\n    text: '$n argument must be an array, or undefined, or null!',\n    error: TypeError\n  },\n  arrayLike: {\n    check: methods.isArrayLike,\n    text: '$n argument must be array-like!',\n    error: TypeError\n  },\n  'arrayLike||!': {\n    check: (a) => methods.isArrayLike(a) || methods.isNullOrUndefined(a),\n    text: '$n argument must be array-like, or undefined, or null!',\n    error: TypeError\n  },\n  date: {\n    check: methods.isDate,\n    text: '$n argument must be a date!',\n    error: TypeError\n  },\n  'date||!': {\n    check: (d) => methods.isDate(d) || methods.isNullOrUndefined(d),\n    text: '$n argument must be a date, or undefined, or null!',\n    error: TypeError\n  },\n  dateLike: {\n    check: methods.isDateLike,\n    text: '$n argument must be date-like!',\n    error: TypeError\n  },\n  'dateLike||!': {\n    check: (d) => methods.isDateLike(d) || methods.isNullOrUndefined(d),\n    text: '$n argument must be date-like, or undefined, or null!',\n    error: TypeError\n  },\n  function: {\n    check: methods.isFunction,\n    text: '$n argument must be a function!',\n    error: TypeError\n  },\n  'function||!': {\n    check: (f) => methods.isFunction(f) || methods.isNullOrUndefined(f),\n    text: '$n argument must be a function, or undefined, or null!',\n    error: TypeError\n  },\n  int: {\n    check: methods.isInteger,\n    text: '$n argument must be an integer!',\n    error: TypeError\n  },\n  'int||!': {\n    check: (i) => methods.isInteger(i) || methods.isNullOrUndefined(i),\n    text: '$n argument must be an integer, or undefined, or null!',\n    error: TypeError\n  },\n  intLike: {\n    check: methods.isIntegerLike,\n    text: '$n argument must be integer-like!',\n    error: TypeError\n  },\n  'intLike||!': {\n    check: (i) => methods.isIntegerLike(i) || methods.isNullOrUndefined(i),\n    text: '$n argument must be integer-like, or undefined, or null!',\n    error: TypeError\n  },\n  number: {\n    check: methods.isNumber,\n    text: '$n argument must be a number!',\n    error: TypeError\n  },\n  'number||!': {\n    check: (n) => methods.isNumber(n) || methods.isNullOrUndefined(n),\n    text: '$n argument must be a number, or undefined, or null!',\n    error: TypeError\n  },\n  numberLike: {\n    check: methods.isNumberLike,\n    text: '$n argument must be number-like!',\n    error: TypeError\n  },\n  'numberLike||!': {\n    check: (n) => methods.isNumberLike(n) || methods.isNullOrUndefined(n),\n    text: '$n argument must be number-like, or undefined, or null!',\n    error: TypeError\n  },\n  object: {\n    check: methods.isObject,\n    text: '$n argument must be an object!',\n    error: TypeError\n  },\n  'object||!': {\n    check: (o) => methods.isObject(o) || methods.isNullOrUndefined(o),\n    text: '$n argument must be an object, or undefined, or null!',\n    error: TypeError\n  },\n  regexp: {\n    check: methods.isRegExp,\n    text: '$n argument must be a regular expression!',\n    error: TypeError\n  },\n  'regexp||!': {\n    check: (r) => methods.isRegExp(r) || methods.isNullOrUndefined(r),\n    text: '$n argument must be a regular expression, or undefined, or null!',\n    error: TypeError\n  },\n  string: {\n    check: methods.isString,\n    text: '$n argument must be a string!',\n    error: TypeError\n  },\n  'string||!': {\n    check: (s) => methods.isString(s) || methods.isNullOrUndefined(s),\n    text: '$n argument must be a string, or undefined, or null!',\n    error: TypeError\n  }\n};\n","/**\n * @module Promise\n * @private\n * @mixin\n * @description Exports Promise class.\n */\n\nimport { isFunction, defineProperties, Symbol } from './helpers';\n\nconst secret = {};\nconst iterator = Symbol.iterator;\n\nexport class Promise {\n  constructor(executor) {\n    if (!isFunction(executor)) {\n      throw new TypeError(`Promise resolver ${ {}.toString.call(executor) } is not a function`);\n    }\n\n    let hiddenStatus;\n    let hiddenValue;\n\n    const\tonFulfill = [];\n    const onReject = [];\n    const realPromise = this;\n    const hiddenPromise = {\n      handled: false,\n      get status() {\n        return hiddenStatus;\n      },\n      set status(value) {\n        hiddenStatus = value;\n        realPromise.status = value;\n      },\n      get value() {\n        return hiddenValue;\n      },\n      set value(val) {\n        hiddenValue = val;\n        realPromise.value = val;\n      }\n    };\n\n    hiddenPromise.status = 'pending';\n    hiddenPromise.value = undefined;\n\n    /**\n     * @typedef {Object} hiddenPromise\n     * @private\n     * @property {Boolean|Object} handled - If the promise is handled or not.\n     * @property {'pending'|'fulfilled'|'rejected'} status - Status of the promise.\n     * @property {*} value - Value of the promise.\n     */\n\n    /**\n     * @member {Function} hiddenPromise#handle\n     * @private\n     * @param {('reject'|'resolve')} event - Type of the event to handle.\n     * @param {Function} handler - Handler itself.\n     * @param {Function} resolve - Resolve function.\n     * @param {Function} reject - Reject function.\n     * @param {Object} secret - Secret.\n     * @description Private method for handling promises.\n     */\n\n    /**\n     * @member {hiddenPromise} Promise#$$\n     * @protected\n     */\n    defineProperties(this.$$ = {}, {\n      'get/set handled': {\n        get() {\n          return hiddenPromise.handled;\n        },\n        set(key) {\n          if (key === secret) {\n            hiddenPromise.handled = true;\n          }\n        }\n      },\n      handle(status, f, resolve, reject, key) {\n        if (key === secret) {\n          const proxy = isFunction(f) ? (value) => {\n            try {\n              resolve(f(value));\n            } catch (err) {\n              return reject(err);\n            }\n          } : null;\n\n          if (status === 'resolve') {\n            onFulfill.push(proxy || ((value) => resolve(value)));\n          } else if (status === 'reject') {\n            onReject.push(proxy || ((err) => reject(err)));\n          }\n        }\n      },\n      'get status'() {\n        return hiddenPromise.status;\n      },\n      'get value'() {\n        return hiddenPromise.value;\n      }\n    });\n\n    try {\n      executor(resolve, reject);\n    } catch (err) {\n      reject(err);\n    }\n\n    function reject(err) {\n      if (hiddenPromise.status === 'pending') {\n        hiddenPromise.status = 'rejected';\n        hiddenPromise.value = err;\n\n        for (let i = 0, length = onReject.length; i < length; i++) {\n          hiddenPromise.handled = true;\n\n          onReject[i](err);\n        }\n\n        setTimeout(() => {\n          if (!hiddenPromise.handled) {\n            console.error('%s %o', 'Uncaught (in promise)', err);\n          }\n        }, 1);\n      }\n    }\n\n    function resolve(value) {\n      if (hiddenPromise.status === 'pending') {\n        if (value && isFunction(value.then)) {\n          return value.then((value) => {\n            resolve(value);\n          }, (err) => {\n            reject(err);\n          });\n        }\n\n        hiddenPromise.status = 'fulfilled';\n        hiddenPromise.value = value;\n\n        for (let i = 0, length = onFulfill.length; i < length; i++) {\n          hiddenPromise.handled = true;\n\n          onFulfill[i](value);\n        }\n      }\n    }\n  }\n\n  static all(iterable) {\n    const array = [];\n\n    let toResolve = 0;\n\n    if (iterable[iterator]) {\n      iterable = iterable[iterator]();\n\n      return new Promise((resolve, reject) => {\n        let next;\n        let i = 0;\n\n        while (!(next = iterable.next()).done) {\n          const promise = Promise.resolve(next.value);\n\n          toResolve++;\n\n          ((i) => {\n            promise.then((value) => {\n              toResolve--;\n              array[i] = value;\n\n              setTimeout(() => {\n                if (next.done && !toResolve) {\n                  resolve(array);\n                }\n              }, 1);\n            }, reject);\n          })(i++);\n        }\n\n        if (!i) {\n          return Promise.resolve([]);\n        }\n      });\n    }\n\n    const length = iterable.length;\n\n    if (!length) {\n      return Promise.resolve([]);\n    }\n\n    toResolve = length;\n\n    return new Promise((resolve, reject) => {\n      for (let i = 0; i < length; i++) {\n        const promise = Promise.resolve(array[i]);\n\n        promise.then((value) => {\n          toResolve--;\n          array[i] = value;\n\n          if (!toResolve) {\n            resolve(array);\n          }\n        }, reject);\n      }\n    });\n  }\n\n  static race(iterable) {\n    const array = [];\n\n    if (iterable[iterator]) {\n      iterable = iterable[iterator]();\n\n      return new Promise((resolve, reject) => {\n        let next;\n\n        while (!(next = iterable.next()).done) {\n          next.value.then(resolve, reject);\n        }\n      });\n    }\n\n    return new Promise((resolve, reject) => {\n      for (let i = 0, length = array.length; i < length; i++) {\n        array[i].then(resolve, reject);\n      }\n    });\n  }\n\n  static reject(value) {\n    return new Promise((resolve, reject) => {\n      reject(value);\n    });\n  }\n\n  static resolve(value) {\n    if (value && isFunction(value.then)) {\n      return value;\n    }\n\n    return new Promise((resolve) => {\n      resolve(value);\n    });\n  }\n\n  abort() {}\n\n  catch(onRejected) {\n    return this.then(null, onRejected);\n  }\n\n  then(onFulfilled, onRejected) {\n    const promise = this.$$;\n\n    if (promise.status === 'pending') {\n      return new Promise((resolve, reject) => {\n        promise.handle('reject', onRejected, resolve, reject, secret);\n        promise.handle('resolve', onFulfilled, resolve, reject, secret);\n      });\n    }\n\n    promise.handled = secret;\n\n    const { value } = promise;\n\n    let method;\n    let handler;\n\n    if (promise.status === 'fulfilled') {\n      method = 'resolve';\n      handler = onFulfilled;\n    } else {\n      method = 'reject';\n      handler = onRejected;\n    }\n\n    if (!isFunction(handler)) {\n      return Promise[method](value);\n    }\n\n    try {\n      return Promise.resolve(handler(value));\n    } catch (err) {\n      return Promise.reject(err);\n    }\n  }\n}\n\ndefineProperties(Promise.prototype, {\n  [Symbol.toStringTag]: 'Promise'\n});\n\nexport default Promise;\n","/**\n * @module constants/regexpSpecialCharacters\n * @private\n * @description Exports special characters for RegExp.\n */\n\n/**\n * @const\n * @name module:constants/regexpSpecialCharacters~regexpSpecialCharacters\n * @type {String[]}\n */\nexport default [\n  '.',\n  '+', '*', '?',\n  '(', ')',\n  '[', ']',\n  '{', '}',\n  '<', '>',\n  '^', '$',\n  '!',\n  '=',\n  ':',\n  '-',\n  '|',\n  ',',\n  '\\\\'\n];\n","/**\n * @module helpers/parseHeaders\n * @private\n * @description Exports parseHeaders method.\n */\n\nimport Str from '../Str';\nimport { iterate } from './iterate';\n\n/**\n * @function parseHeaders\n * @param {String} rawHeaders - Raw headers.\n * @returns {Object} Headers object\n * @description Function for parsing raw headers.\n */\nexport default (rawHeaders) => {\n  const headers = {};\n\n  iterate((rawHeaders || '').split('\\n'), (value) => {\n    const index = value.indexOf(':');\n    const key = new Str(value.substring(0, index))\n      .trim()\n      .toCamelCase().$;\n    const val = new Str(value.substring(index + 1)).trim().$;\n\n    if (key) {\n      headers[key] = (headers[key] ? `${ headers[key] }, ` : '') + val;\n    }\n  });\n\n  return headers;\n};\n","/**\r\n * @module helpers/transformData\r\n * @private\r\n * @description Exports transformData method.\r\n */\r\n\r\nimport Arr from '../Arr';\r\nimport Super from '../Super';\r\nimport { isObject, toStringTag } from './';\r\n\r\nconst notToTransform = new Arr(['FormData', 'File', 'Blob', 'ArrayBuffer', 'String', 'Number']);\r\nconst withoutBody = new Arr(['DELETE', 'GET', 'HEAD']);\r\n\r\n/**\r\n * @function transformData\r\n * @param {*} data - Data to transform\r\n * @param {String} method - HTTP method.\r\n * @param {Object} headers - Object with headers.\r\n * @returns {*} - Transformed data.\r\n */\r\nexport default (data, method, headers) => {\r\n  data = new Super(data).$;\r\n\r\n  if (withoutBody.indexOfStrict(method) !== -1) {\r\n    return null;\r\n  }\r\n\r\n  if (isObject(data) && notToTransform.keyOfStrict(toStringTag(data)) !== -1) {\r\n    if (!headers.contentType) {\r\n      headers.contentType = ['application/json;charset=utf-8'];\r\n    }\r\n\r\n    return new Super(data).json();\r\n  }\r\n\r\n  return data;\r\n};\r\n","/**\r\n * @module constants/appliedRegExps\r\n * @private\r\n * @description Exports different types of syntax for {@link Elem#apply}.\r\n */\r\n\r\n/**\r\n * @callback matchAppliedExprCallback\r\n * @param {Elem} elem - D-elem of an element to apply expression to.\r\n * @param {String} string - Matched applied name.\r\n * @param {String} arg - Argument within the parentheses.\r\n */\r\n\r\n/**\r\n * @type {Object.<String, matchAppliedExprCallback|Object.<String, matchAppliedExprCallback>>}\r\n * @description Object of different types of syntax.\r\n */\r\n\r\nexport default {\r\n  '#'(elem, id) {\r\n    elem.id(id);\r\n  },\r\n  '.'(elem, cls) {\r\n    elem.addClass(cls);\r\n  },\r\n  $(elem, attr, value) {\r\n    elem.attr(attr, value);\r\n  },\r\n  '@'(elem, prop, value) {\r\n    elem.css(prop, value);\r\n  },\r\n  '&'(elem, name, html) {\r\n    elem.html(html);\r\n  },\r\n  '*'(elem, name, text) {\r\n    elem.text(text);\r\n  },\r\n  '-': {\r\n    '.'(elem, cls) {\r\n      elem.removeClass(cls);\r\n    },\r\n    $(elem, attr) {\r\n      elem.removeAttr(attr);\r\n    },\r\n    '@'(elem, prop) {\r\n      elem.removeCSS(prop);\r\n    }\r\n  }\r\n};\r\n","/**\n * @module constants/elements\n * @private\n * @description Exports methods for {@link Elem} for creating html-elements.\n */\n\n/**\n * @const\n * @type {String[]}\n */\nexport default [\n  /**\n   * @member {Function} Elem#a\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'a',\n\n  /**\n   * @member {Function} Elem#abbr\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'abbr',\n\n  /**\n   * @member {Function} Elem#address\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'address',\n\n  /**\n   * @member {Function} Elem#area\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'area',\n\n  /**\n   * @member {Function} Elem#article\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'article',\n\n  /**\n   * @member {Function} Elem#audio\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'audio',\n\n  /**\n   * @member {Function} Elem#b\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'b',\n\n  /**\n   * @member {Function} Elem#base\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'base',\n\n  /**\n   * @member {Function} Elem#bdi\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'bdi',\n\n  /**\n   * @member {Function} Elem#bdo\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'bdo',\n\n  /**\n   * @member {Function} Elem#blockquote\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'blockquote',\n\n  /**\n   * @member {Function} Elem#body\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'body',\n\n  /**\n   * @member {Function} Elem#br\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'br',\n\n  /**\n   * @member {Function} Elem#button\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'button',\n\n  /**\n   * @member {Function} Elem#canvas\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'canvas',\n\n  /**\n   * @member {Function} Elem#caption\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'caption',\n\n  /**\n   * @member {Function} Elem#cite\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'cite',\n\n  /**\n   * @member {Function} Elem#code\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'code',\n\n  /**\n   * @member {Function} Elem#col\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'col',\n\n  /**\n   * @member {Function} Elem#colgroup\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'colgroup',\n\n  /**\n   * @member {Function} Elem#content\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'content',\n\n  /**\n   * @member {Function} Elem#datalist\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'datalist',\n\n  /**\n   * @member {Function} Elem#dd\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'dd',\n\n  /**\n   * @member {Function} Elem#del\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'del',\n\n  /**\n   * @member {Function} Elem#details\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'details',\n\n  /**\n   * @member {Function} Elem#dfn\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'dfn',\n\n  /**\n   * @member {Function} Elem#dialog\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'dialog',\n\n  /**\n   * @member {Function} Elem#div\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'div',\n\n  /**\n   * @member {Function} Elem#dl\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'dl',\n\n  /**\n   * @member {Function} Elem#dt\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'dt',\n\n  /**\n   * @member {Function} Elem#element\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'element',\n\n  /**\n   * @member {Function} Elem#em\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'em',\n\n  /**\n   * @member {Function} Elem#embed\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'embed',\n\n  /**\n   * @member {Function} Elem#fieldset\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'fieldset',\n\n  /**\n   * @member {Function} Elem#figcaption\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'figcaption',\n\n  /**\n   * @member {Function} Elem#figure\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'figure',\n\n  /**\n   * @member {Function} Elem#footer\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'footer',\n\n  /**\n   * @member {Function} Elem#form\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'form',\n\n  /**\n   * @member {Function} Elem#h1\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'h1',\n\n  /**\n   * @member {Function} Elem#h2\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'h2',\n\n  /**\n   * @member {Function} Elem#h3\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'h3',\n\n  /**\n   * @member {Function} Elem#h4\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'h4',\n\n  /**\n   * @member {Function} Elem#h5\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'h5',\n\n  /**\n   * @member {Function} Elem#h6\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'h6',\n\n  /**\n   * @member {Function} Elem#head\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'head',\n\n  /**\n   * @member {Function} Elem#header\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'header',\n\n  /**\n   * @member {Function} Elem#hgroup\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'hgroup',\n\n  /**\n   * @member {Function} Elem#hr\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'hr',\n\n  /**\n   * @member {Function} Elem#i\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'i',\n\n  /**\n   * @member {Function} Elem#iframe\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'iframe',\n\n  /**\n   * @member {Function} Elem#img\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'img',\n\n  /**\n   * @member {Function} Elem#input\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'input',\n\n  /**\n   * @member {Function} Elem#ins\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'ins',\n\n  /**\n   * @member {Function} Elem#kbd\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'kbd',\n\n  /**\n   * @member {Function} Elem#label\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'label',\n\n  /**\n   * @member {Function} Elem#legend\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'legend',\n\n  /**\n   * @member {Function} Elem#li\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'li',\n\n  /**\n   * @member {Function} Elem#link\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'link',\n\n  /**\n   * @member {Function} Elem#main\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'main',\n\n  /**\n   * @member {Function} Elem#mark\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'mark',\n\n  /**\n   * @member {Function} Elem#menu\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'menu',\n\n  /**\n   * @member {Function} Elem#menuitem\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'menuitem',\n\n  /**\n   * @member {Function} Elem#meta\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'meta',\n\n  /**\n   * @member {Function} Elem#meter\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'meter',\n\n  /**\n   * @member {Function} Elem#nav\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'nav',\n\n  /**\n   * @member {Function} Elem#noscript\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'noscript',\n\n  /**\n   * @member {Function} Elem#null\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'null',\n\n  /**\n   * @member {Function} Elem#ol\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'ol',\n\n  /**\n   * @member {Function} Elem#optgroup\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'optgroup',\n\n  /**\n   * @member {Function} Elem#option\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'option',\n\n  /**\n   * @member {Function} Elem#output\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'output',\n\n  /**\n   * @member {Function} Elem#p\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'p',\n\n  /**\n   * @member {Function} Elem#param\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'param',\n\n  /**\n   * @member {Function} Elem#pre\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'pre',\n\n  /**\n   * @member {Function} Elem#progress\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'progress',\n\n  /**\n   * @member {Function} Elem#q\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'q',\n\n  /**\n   * @member {Function} Elem#rp\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'rp',\n\n  /**\n   * @member {Function} Elem#rt\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'rt',\n\n  /**\n   * @member {Function} Elem#rtc\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'rtc',\n\n  /**\n   * @member {Function} Elem#ruby\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'ruby',\n\n  /**\n   * @member {Function} Elem#s\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  's',\n\n  /**\n   * @member {Function} Elem#samp\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'samp',\n\n  /**\n   * @member {Function} Elem#script\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'script',\n\n  /**\n   * @member {Function} Elem#section\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'section',\n\n  /**\n   * @member {Function} Elem#select\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'select',\n\n  /**\n   * @member {Function} Elem#shadow\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'shadow',\n\n  /**\n   * @member {Function} Elem#small\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'small',\n\n  /**\n   * @member {Function} Elem#source\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'source',\n\n  /**\n   * @member {Function} Elem#span\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'span',\n\n  /**\n   * @member {Function} Elem#strong\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'strong',\n\n  /**\n   * @member {Function} Elem#style\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'style',\n\n  /**\n   * @member {Function} Elem#sub\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'sub',\n\n  /**\n   * @member {Function} Elem#summary\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'summary',\n\n  /**\n   * @member {Function} Elem#sup\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'sup',\n\n  /**\n   * @member {Function} Elem#table\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'table',\n\n  /**\n   * @member {Function} Elem#tbody\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'tbody',\n\n  /**\n   * @member {Function} Elem#td\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'td',\n\n  /**\n   * @member {Function} Elem#template\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'template',\n\n  /**\n   * @member {Function} Elem#textarea\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'textarea',\n\n  /**\n   * @member {Function} Elem#tfoot\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'tfoot',\n\n  /**\n   * @member {Function} Elem#th\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'th',\n\n  /**\n   * @member {Function} Elem#thead\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'thead',\n\n  /**\n   * @member {Function} Elem#time\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'time',\n\n  /**\n   * @member {Function} Elem#title\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'title',\n\n  /**\n   * @member {Function} Elem#tr\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'tr',\n\n  /**\n   * @member {Function} Elem#track\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'track',\n\n  /**\n   * @member {Function} Elem#u\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'u',\n\n  /**\n   * @member {Function} Elem#ul\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'ul',\n\n  /**\n   * @member {Function} Elem#var\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'var',\n\n  /**\n   * @member {Function} Elem#video\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'video',\n\n  /**\n   * @member {Function} Elem#wbr\n   * @type {Function}\n   * @param {...String} appliedExpressions\n   * @returns {Elem}\n   */\n  'wbr'\n];\n","/**\n * @module constants/elements\n * @private\n * @description Exports different canvas methods for {@link Elem} for creating html-elements.\n */\n\n/**\n * @const\n * @type {String[]}\n */\nexport const canvasGetMethods = [\n  /**\n   * @member {Function} Elem#createImageData\n   * @type {Function}\n   * @param {...*} args\n   * @returns {ImageData|void}\n   * @see https://developer.mozilla.org/en/docs/Web/API/CanvasRenderingContext2D/createImageData\n   */\n  'createImageData',\n\n  /**\n   * @member {Function} Elem#createLinearGradient\n   * @type {Function}\n   * @param {...*} args\n   * @returns {CanvasGradient|void}\n   * @see https://developer.mozilla.org/en/docs/Web/API/CanvasRenderingContext2D/createLinearGradient\n   */\n  'createLinearGradient',\n\n  /**\n   * @member {Function} Elem#createPattern\n   * @type {Function}\n   * @param {...*} args\n   * @returns {CanvasPattern|void}\n   * @see https://developer.mozilla.org/en/docs/Web/API/CanvasRenderingContext2D/createPattern\n   */\n  'createPattern',\n\n  /**\n   * @member {Function} Elem#createRadialGradient\n   * @type {Function}\n   * @param {...*} args\n   * @returns {CanvasGradient|void}\n   * @see https://developer.mozilla.org/en/docs/Web/API/CanvasRenderingContext2D/createRadialGradient\n   */\n  'createRadialGradient',\n\n  /**\n   * @member {Function} Elem#getImageData\n   * @type {Function}\n   * @param {...*} args\n   * @returns {ImageData|void}\n   * @see https://developer.mozilla.org/en/docs/Web/API/CanvasRenderingContext2D/getImageData\n   */\n  'getImageData',\n\n  /**\n   * @member {Function} Elem#getLineDash\n   * @type {Function}\n   * @param {...*} args\n   * @returns {Number[]|void}\n   * @see https://developer.mozilla.org/en/docs/Web/API/CanvasRenderingContext2D/getLineDash\n   */\n  'getLineDash',\n\n  /**\n   * @member {Function} Elem#isPointInPath\n   * @type {Function}\n   * @param {...*} args\n   * @returns {Boolean|void}\n   * @see https://developer.mozilla.org/en/docs/Web/API/CanvasRenderingContext2D/isPointInPath\n   */\n  'isPointInPath',\n\n  /**\n   * @member {Function} Elem#isPointInStroke\n   * @type {Function}\n   * @param {...*} args\n   * @returns {Boolean|void}\n   * @see https://developer.mozilla.org/en/docs/Web/API/CanvasRenderingContext2D/isPointInStroke\n   */\n  'isPointInStroke',\n\n  /**\n   * @member {Function} Elem#measureText\n   * @type {Function}\n   * @param {...*} args\n   * @returns {TextMetrics|void}\n   * @see https://developer.mozilla.org/en/docs/Web/API/CanvasRenderingContext2D/measureText\n   */\n  'measureText'\n];\n\nexport const canvasRestMethods = [\n  /**\n   * @member {Function} Elem#arc\n   * @type {Function}\n   * @param {...*} args\n   * @returns {Elem}\n   * @see https://developer.mozilla.org/en/docs/Web/API/CanvasRenderingContext2D/arc\n   */\n  'arc',\n\n  /**\n   * @member {Function} Elem#arcTo\n   * @type {Function}\n   * @param {...*} args\n   * @returns {Elem}\n   * @see https://developer.mozilla.org/en/docs/Web/API/CanvasRenderingContext2D/arcTo\n   */\n  'arcTo',\n\n  /**\n   * @member {Function} Elem#beginPath\n   * @type {Function}\n   * @param {...*} args\n   * @returns {Elem}\n   * @see https://developer.mozilla.org/en/docs/Web/API/CanvasRenderingContext2D/beginPath\n   */\n  'beginPath',\n\n  /**\n   * @member {Function} Elem#bezierCurveTo\n   * @type {Function}\n   * @param {...*} args\n   * @returns {Elem}\n   * @see https://developer.mozilla.org/en/docs/Web/API/CanvasRenderingContext2D/bezierCurveTo\n   */\n  'bezierCurveTo',\n\n  /**\n   * @member {Function} Elem#clearRect\n   * @type {Function}\n   * @param {...*} args\n   * @returns {Elem}\n   * @see https://developer.mozilla.org/en/docs/Web/API/CanvasRenderingContext2D/clearRect\n   */\n  'clearRect',\n\n  /**\n   * @member {Function} Elem#clip\n   * @type {Function}\n   * @param {...*} args\n   * @returns {Elem}\n   * @see https://developer.mozilla.org/en/docs/Web/API/CanvasRenderingContext2D/clip\n   */\n  'clip',\n\n  /**\n   * @member {Function} Elem#closePath\n   * @type {Function}\n   * @param {...*} args\n   * @returns {Elem}\n   * @see https://developer.mozilla.org/en/docs/Web/API/CanvasRenderingContext2D/closePath\n   */\n  'closePath',\n\n  /**\n   * @member {Function} Elem#drawFocusIfNeeded\n   * @type {Function}\n   * @param {...*} args\n   * @returns {Elem}\n   * @see https://developer.mozilla.org/en/docs/Web/API/CanvasRenderingContext2D/drawFocusIfNeeded\n   */\n  'drawFocusIfNeeded',\n\n  /**\n   * @member {Function} Elem#drawImage\n   * @type {Function}\n   * @param {...*} args\n   * @returns {Elem}\n   * @see https://developer.mozilla.org/en/docs/Web/API/CanvasRenderingContext2D/drawImage\n   */\n  'drawImage',\n\n  /**\n   * @member {Function} Elem#ellipse\n   * @type {Function}\n   * @param {...*} args\n   * @returns {Elem}\n   * @see https://developer.mozilla.org/en/docs/Web/API/CanvasRenderingContext2D/ellipse\n   */\n  'ellipse',\n\n  /**\n   * @member {Function} Elem#fill\n   * @type {Function}\n   * @param {...*} args\n   * @returns {Elem}\n   * @see https://developer.mozilla.org/en/docs/Web/API/CanvasRenderingContext2D/fill\n   */\n  'fill',\n\n  /**\n   * @member {Function} Elem#fillRect\n   * @type {Function}\n   * @param {...*} args\n   * @returns {Elem}\n   * @see https://developer.mozilla.org/en/docs/Web/API/CanvasRenderingContext2D/fillRect\n   */\n  'fillRect',\n\n  /**\n   * @member {Function} Elem#fillText\n   * @type {Function}\n   * @param {...*} args\n   * @returns {Elem}\n   * @see https://developer.mozilla.org/en/docs/Web/API/CanvasRenderingContext2D/fillText\n   */\n  'fillText',\n\n  /**\n   * @member {Function} Elem#lineTo\n   * @type {Function}\n   * @param {...*} args\n   * @returns {Elem}\n   * @see https://developer.mozilla.org/en/docs/Web/API/CanvasRenderingContext2D/lineTo\n   */\n  'lineTo',\n\n  /**\n   * @member {Function} Elem#moveTo\n   * @type {Function}\n   * @param {...*} args\n   * @returns {Elem}\n   * @see https://developer.mozilla.org/en/docs/Web/API/CanvasRenderingContext2D/moveTo\n   */\n  'moveTo',\n\n  /**\n   * @member {Function} Elem#putImageData\n   * @type {Function}\n   * @param {...*} args\n   * @returns {Elem}\n   * @see https://developer.mozilla.org/en/docs/Web/API/CanvasRenderingContext2D/putImageData\n   */\n  'putImageData',\n\n  /**\n   * @member {Function} Elem#quadraticCurveTo\n   * @type {Function}\n   * @param {...*} args\n   * @returns {Elem}\n   * @see https://developer.mozilla.org/en/docs/Web/API/CanvasRenderingContext2D/quadraticCurveTo\n   */\n  'quadraticCurveTo',\n\n  /**\n   * @member {Function} Elem#rect\n   * @type {Function}\n   * @param {...*} args\n   * @returns {Elem}\n   * @see https://developer.mozilla.org/en/docs/Web/API/CanvasRenderingContext2D/rect\n   */\n  'rect',\n\n  /**\n   * @member {Function} Elem#resetTransform\n   * @type {Function}\n   * @param {...*} args\n   * @returns {Elem}\n   * @see https://developer.mozilla.org/en/docs/Web/API/CanvasRenderingContext2D/resetTransform\n   */\n  'resetTransform',\n\n  /**\n   * @member {Function} Elem#restore\n   * @type {Function}\n   * @param {...*} args\n   * @returns {Elem}\n   * @see https://developer.mozilla.org/en/docs/Web/API/CanvasRenderingContext2D/restore\n   */\n  'restore',\n\n  /**\n   * @member {Function} Elem#rotate\n   * @type {Function}\n   * @param {...*} args\n   * @returns {Elem}\n   * @see https://developer.mozilla.org/en/docs/Web/API/CanvasRenderingContext2D/rotate\n   */\n  'rotate',\n\n  /**\n   * @member {Function} Elem#save\n   * @type {Function}\n   * @param {...*} args\n   * @returns {Elem}\n   * @see https://developer.mozilla.org/en/docs/Web/API/CanvasRenderingContext2D/save\n   */\n  'save',\n\n  /**\n   * @member {Function} Elem#scale\n   * @type {Function}\n   * @param {...*} args\n   * @returns {Elem}\n   * @see https://developer.mozilla.org/en/docs/Web/API/CanvasRenderingContext2D/scale\n   */\n  'scale',\n\n  /**\n   * @member {Function} Elem#setLineDash\n   * @type {Function}\n   * @param {...*} args\n   * @returns {Elem}\n   * @see https://developer.mozilla.org/en/docs/Web/API/CanvasRenderingContext2D/setLineDash\n   */\n  'setLineDash',\n\n  /**\n   * @member {Function} Elem#setTransform\n   * @type {Function}\n   * @param {...*} args\n   * @returns {Elem}\n   * @see https://developer.mozilla.org/en/docs/Web/API/CanvasRenderingContext2D/setTransform\n   */\n  'setTransform',\n\n  /**\n   * @member {Function} Elem#stroke\n   * @type {Function}\n   * @param {...*} args\n   * @returns {Elem}\n   * @see https://developer.mozilla.org/en/docs/Web/API/CanvasRenderingContext2D/stroke\n   */\n  'stroke',\n\n  /**\n   * @member {Function} Elem#strokeRect\n   * @type {Function}\n   * @param {...*} args\n   * @returns {Elem}\n   * @see https://developer.mozilla.org/en/docs/Web/API/CanvasRenderingContext2D/strokeRect\n   */\n  'strokeRect',\n\n  /**\n   * @member {Function} Elem#strokeText\n   * @type {Function}\n   * @param {...*} args\n   * @returns {Elem}\n   * @see https://developer.mozilla.org/en/docs/Web/API/CanvasRenderingContext2D/strokeText\n   */\n  'strokeText',\n\n  /**\n   * @member {Function} Elem#transform\n   * @type {Function}\n   * @param {...*} args\n   * @returns {Elem}\n   * @see https://developer.mozilla.org/en/docs/Web/API/CanvasRenderingContext2D/transform\n   */\n  'transform',\n\n  /**\n   * @member {Function} Elem#translate\n   * @type {Function}\n   * @param {...*} args\n   * @returns {Elem}\n   * @see https://developer.mozilla.org/en/docs/Web/API/CanvasRenderingContext2D/translate\n   */\n  'translate'\n];\n","/**\n * @module helpers/resolveURL\n * @private\n * @description Exports Object.assign-like method.\n */\n\nimport Str from '../Str';\n\nexport default (url, decodeQuery) => {\n  const {\n    search: query,\n    hash\n  } = url;\n  const params = {\n    query: {},\n    hash: hash.replace(/^#/, '')\n  };\n\n  if (!query) {\n    return params;\n  }\n\n  new Str(query.replace(/^\\?/, ''))\n    .split('&')\n    .forEach((rawParam) => {\n      let [param, value = ''] = rawParam.split('=');\n\n      param = decodeQuery ? decodeURIComponent(param) : param;\n      value = decodeQuery ? decodeURIComponent(value) : value;\n\n      if (!/^[^\\[]+/.test(param)) {\n        return;\n      }\n\n      let paramName;\n      let paramObject = params.query;\n\n      new Str(param)\n        .match(/^[^\\[\\]]*|\\[[^\\[\\]]*\\]/g)\n        .forEach((name) => {\n          if (name.indexOf('[')) {\n            paramName = name;\n\n            return;\n          }\n\n          name = name.slice(1, -1);\n\n          paramObject = paramObject[paramName] = paramObject[paramName] || (name ? {} : []);\n          paramName = name || paramObject.length;\n        });\n\n      paramObject[paramName] = value;\n    });\n\n  return params;\n};\n","import * as statics from './lib/browser';\nimport { assign } from './lib/helpers/assign';\n\nconst { D } = statics;\n\nassign(D, statics);\n\ndelete D.default;\ndelete D.D;\n\nglobal.D = D;\n"],"names":["toStringTag","object","toString","call","replace","isArray","value","isArrayLike","isFunction","length","isInteger","isBoolean","isDate","isDateLike","Date","isNaN","getTime","isElement","test","isFinite","isNumber","Number","Infinity","isIntegerLike","parseInt","isNull","isNullOrUndefined","isNumberLike","isObject","Object","isPlainObject","isPrimitive","proto","getPrototypeOf","constructor","isRegExp","isString","isSymbol","isUndefined","D","i","constructors","levelConstructors","k","len","_constructor","cls","check","iterate","callback","array","iterated","key","hasOwnProperty","assign","target","arguments","source","index","dynamicDefineProperties","properties","propertyGenerator","name","defineProperty","defineProperties","method","undefined","get","set","toArray","createNewArray","push","validate","args","options","number","checker","checkExpressions","error","text","numbers","char","alphabet","string","ranges","split","range","Error","start","charCodeAt","end","String","fromCharCode","Alphabet","switcher","cases","mode","defaultValue","Switcher","when","condition","value1","value2","_deepAssign","hasProperty","_deepClone","clone","cloneSwitcher","deepEqual","o1","o2","strict","flags","lastIndex","p1","p2","keys","_deepEvery","n","tree","newTree","concat","_deepFilter","nul","o","filtered","_deepFind","result","_deepFreeze","freeze","_deepForEach","_deepMap","_deepReduce","IV","_deepSome","asc","x","y","Arr","blob","blobParts","BlobObject","Blob","apply","noop","self","rand","Math","random","floor","trim","parseJSON","json","JSON","parse","dates","parsed","this","round","digits","zeroes","zero","repeat","$","now","date","Super","Dat","isAbsolute","url","absoluteURLRegexp","encode","isEncoded","encodeURIComponent","fetchBeforeMiddleware","config","baseURL","data","headers","params","query","METHOD","toUpperCase","constructURL","transformData","values","header","Str","toCapitalCase","join","toFind","elem","_find","Elem","isElem","isWindow","isHTMLDocument","getElem","emptyDiv","getName","tagName","toLowerCase","addDwayneData","windowsDwayneData","some","element","getContext","selector","base","nativeDocument","querySelectorAll","parseHTML","html","doc","div","children","px","size","redirect","newURL","dispatchNewEvent","type","dispatchEvent","currentState","currentURL","eventPromise","then","hide","beforeLoad","handleError","action","renderingState","newState","origin","href","Promise","reject","stopError","resolveURL","Router","decodeQuery","hash","resolve","promise","forEach","state","stateName","$$","renderStates","templateParams","title","icon","ownTemplateParams","getStateBase","parent","unshift","stateAttrName","stateNameFromAttr","attr","states","find","foundState","template","parentTemplateParams","create","first","show","err","currentTitle","currentIcon","ref","decode","decodeParams","decodeURIComponent","printError","router","isInstanceOfRouterState","isPrototypeOf","MainState","prototype","resolveParameter","param","nameErrorName","valueErrorName","nameMatch","match","slice","regexp","indexOf","RegExp","findStatesByURL","pathname","search","eventualStates","stateURL","validatePath","requiredQuery","eventualParams","hasOwn","shift","_param","every","defaultState","event","paused","stopped","continuePropagation","stopPropagation","isStoppable","stoppable","indexOfStrict","listener","finished","getListeners","desc","listenerName","capitalizeFirst","listeners","ownListeners","Func","bind","initialize","initialized","routerLoaded","on","e","_currentURL","location","URL","preventDefault","parentParams","parentQuery","relativeURL","relativePath","count","newPath","pushed","_go","redirectTo","registerState","extendLink","$state","path","pathSwitcher","window","global","_Symbol","Symbol","RangeError","methods.isNullOrUndefined","TypeError","methods.isArray","a","methods.isArrayLike","methods.isDate","d","methods.isDateLike","methods.isFunction","f","methods.isInteger","methods.isIntegerLike","methods.isNumber","methods.isNumberLike","methods.isObject","methods.isRegExp","r","methods.isString","s","chars","word","token","def","ret","val","Case","case","eventualCases","setPrototypeOf","_mode","Function","deep","objects","sum","func","descriptors","Boolean","property","descriptor","props","getter","isFrozen","replacer","space","stringify","max","min","_object","obj","getOwnPropertyDescriptor","getOwnPropertyNames","getOwnPropertySymbols","_proto","isContextObject","startKey","setter","reduce","_value","keyOf","keyOfStrict","separator","pop","reverse","randomIndex","begin","compareFunction","sort","deleteCount","items","splice","secret","iterator","executor","hiddenPromise","status","onReject","handled","onFulfill","hiddenStatus","hiddenValue","realPromise","proxy","onRejected","onFulfilled","handle","handler","iterable","toResolve","next","done","methods","progress","reader","FileReader","toReject","onprogress","onerror","onload","_this2","abort","anchor","document","createElement","dataURL","setAttribute","click","createObjectURL","_arguments","called","canBeCalled","before","after","sync","contextLocked","context","middleware","afterAll","beforeAll","bindContext","bindArgs","times","lockContext","lockArgs","argsLocked","mark","time","timeEnd","unbindContext","unbindArgs","toRadian","PI","toDegree","ln2","LN2","ln10","LN10","Num","toDegrees","acos","asin","atan","asDegrees","cos","clearTimeout","timeout","aborted","interval","setTimeout","log","power","pow","sin","tan","rej","fractionDigits","toExponential","toFixed","precision","toPrecision","abs","sqrt","cbrt","ceil","exp","ln","sign","htmlSpecials","regexpSpecialsRegexp","regexpSpecialCharacters","searchString","position","revert","startsWith","escaped","symbol","searchValue","fromIndex","lastIndexOf","str","beginSlice","endSlice","substr","indexStart","indexEnd","substring","daysOfTheWeekNames","daysOfTheWeekAliases","map","monthsNames","monthsAliases","utc","coeffs","getSwitcher","NaN","setSwitcher","what","prefix","formats","format","replaceString","date1","date2","isBefore","started","coeff","w","_this4","_time","setTime","toISOString","toLocaleString","valueOf","querySwitcher","queryParams","encodeOptions","encodeParams","encodeQuery","rawHeaders","toCamelCase","notToTransform","withoutBody","contentType","defaults","uploadMethods","Fetch","fetch","request","conf","deepAssign","toPush","dataConfig","urlConfig","deepClone","xhr","auth","username","password","responseType","withCredentials","XMLHttpRequest","open","setRequestHeader","upload","onabort","ontimeout","onreadystatechange","readyState","response","responseText","parseHeaders","getAllResponseHeaders","statusText","send","id","addClass","prop","css","removeClass","removeAttr","removeCSS","canvasGetMethods","canvasRestMethods","eventSeparator","textProperty","Node","propertyDescriptor","classes","attrs","inputElements","dataURLFetch","refSwitcher","filterSwitcher","is","elems","innerSwitcher","paddings","borders","outerSwitcher","elements","list","classList","add","innerHTML","style","sheet","cssRules","rules","toHyphenCase","insertRule","dwayneData","appendChild","createTextNode","strings","applied","setApplied","np1","appliedRegExps","_attr","getAttribute","attributes","load","isBroken","canvas","width","height","drawImage","ab","_blob","blur","pseudo","getComputedStyle","rule","into","className","cloneNode","parentElement","contains","appliedExpressions","getPropertyValue","getPropertyPriority","setProperty","cssText","ctx","dataset","encoderOptions","toDataURL","deleteRule","eventInit","details","bubbles","cancelable","finalEvent","Event","createEvent","initEvent","found","focus","selectorText","hasAttribute","_height","currentDisplay","previousDisplay","_html","_id","insertBefore","matches","matchesSelector","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector","complete","naturalWidth","naturalHeight","closest","images","all","filter","$elem","removeListeners","proper","broken","prev","nextElementSibling","events","removeListener","allListeners","removeEventListeners","define","has","newListener","addEventListener","removeEventListener","parentNode","previousElementSibling","link","remove","removeAttribute","removeProperty","2","1","created","_text","txt","addText","_arguments5","hasAttr","hasClass","level","validator","validatorWrap","input","validity","valid","validationMessage","validators","errors","_width","innerHeight","calcCSS","borderTopWidth","borderBottomWidth","boxSizing","paddingTop","paddingBottom","innerWidth","borderLeftWidth","borderRightWidth","paddingLeft","paddingRight","outerHeight","marginTop","marginBottom","outerWidth","marginLeft","marginRight","win","documentElement","body","head","rawParam","paramName","paramObject","history","part","escapeRegExp","pageTitle","pageIcon","relativeToURL","buildURL","actualListeners","eventListeners","l","abstract","statics.D","statics"],"mappings":"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","sourceRoot":"/source/"}